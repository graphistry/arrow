"use strict";
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
/* tslint:disable:class-name */
const bit_1 = require("../util/bit");
const type_1 = require("../type");
class Footer {
    constructor(dictionaryBatches, recordBatches, schema) {
        this.dictionaryBatches = dictionaryBatches;
        this.recordBatches = recordBatches;
        this.schema = schema;
    }
}
exports.Footer = Footer;
class FileBlock {
    constructor(metaDataLength, bodyLength, offset) {
        this.metaDataLength = metaDataLength;
        this.offset = typeof offset === 'number' ? offset : offset.low;
        this.bodyLength = typeof bodyLength === 'number' ? bodyLength : bodyLength.low;
    }
}
exports.FileBlock = FileBlock;
class Message {
    constructor(version, bodyLength, headerType) {
        this.version = version;
        this.headerType = headerType;
        this.bodyLength = typeof bodyLength === 'number' ? bodyLength : bodyLength.low;
    }
    static isSchema(m) { return m.headerType === type_1.MessageHeader.Schema; }
    static isRecordBatch(m) { return m.headerType === type_1.MessageHeader.RecordBatch; }
    static isDictionaryBatch(m) { return m.headerType === type_1.MessageHeader.DictionaryBatch; }
}
exports.Message = Message;
class RecordBatchMetadata extends Message {
    constructor(version, length, nodes, buffers) {
        super(version, buffers.reduce((s, b) => bit_1.align(s + b.length + (b.offset - s), 8), 0), type_1.MessageHeader.RecordBatch);
        this.nodes = nodes;
        this.buffers = buffers;
        this.length = typeof length === 'number' ? length : length.low;
    }
}
exports.RecordBatchMetadata = RecordBatchMetadata;
class DictionaryBatch extends Message {
    constructor(version, data, id, isDelta = false) {
        super(version, data.bodyLength, type_1.MessageHeader.DictionaryBatch);
        this.isDelta = isDelta;
        this.data = data;
        this.id = typeof id === 'number' ? id : id.low;
    }
    static getId() { return DictionaryBatch.atomicDictionaryId++; }
    get nodes() { return this.data.nodes; }
    get buffers() { return this.data.buffers; }
}
DictionaryBatch.atomicDictionaryId = 0;
exports.DictionaryBatch = DictionaryBatch;
class BufferMetadata {
    constructor(offset, length) {
        this.offset = typeof offset === 'number' ? offset : offset.low;
        this.length = typeof length === 'number' ? length : length.low;
    }
}
exports.BufferMetadata = BufferMetadata;
class FieldMetadata {
    constructor(length, nullCount) {
        this.length = typeof length === 'number' ? length : length.low;
        this.nullCount = typeof nullCount === 'number' ? nullCount : nullCount.low;
    }
}
exports.FieldMetadata = FieldMetadata;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFPLE1BQU0sS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztRQUMvRCxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sU0FBUyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDO0lBQy9FLENBQUM7Q0FDSjtBQVBELHNDQU9DIiwiZmlsZSI6ImlwYy9tZXRhZGF0YS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbi8vIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuLy8gZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbi8vIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbi8vIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbi8vIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuLy8gd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuLy8gc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbi8vIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4vLyBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbi8vIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbi8vIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpjbGFzcy1uYW1lICovXG5cbmltcG9ydCB7IGFsaWduIH0gZnJvbSAnLi4vdXRpbC9iaXQnO1xuaW1wb3J0IHsgU2NoZW1hLCBMb25nLCBNZXNzYWdlSGVhZGVyLCBNZXRhZGF0YVZlcnNpb24gfSBmcm9tICcuLi90eXBlJztcblxuZXhwb3J0IGNsYXNzIEZvb3RlciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIGRpY3Rpb25hcnlCYXRjaGVzOiBGaWxlQmxvY2tbXSwgcHVibGljIHJlY29yZEJhdGNoZXM6IEZpbGVCbG9ja1tdLCBwdWJsaWMgc2NoZW1hOiBTY2hlbWEpIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWxlQmxvY2sge1xuICAgIHB1YmxpYyBvZmZzZXQ6IG51bWJlcjtcbiAgICBwdWJsaWMgYm9keUxlbmd0aDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBtZXRhRGF0YUxlbmd0aDogbnVtYmVyLCBib2R5TGVuZ3RoOiBMb25nIHwgbnVtYmVyLCBvZmZzZXQ6IExvbmcgfCBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSB0eXBlb2Ygb2Zmc2V0ID09PSAnbnVtYmVyJyA/IG9mZnNldCA6IG9mZnNldC5sb3c7XG4gICAgICAgIHRoaXMuYm9keUxlbmd0aCA9IHR5cGVvZiBib2R5TGVuZ3RoID09PSAnbnVtYmVyJyA/IGJvZHlMZW5ndGggOiBib2R5TGVuZ3RoLmxvdztcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlIHtcbiAgICBwdWJsaWMgYm9keUxlbmd0aDogbnVtYmVyO1xuICAgIHB1YmxpYyB2ZXJzaW9uOiBNZXRhZGF0YVZlcnNpb247XG4gICAgcHVibGljIGhlYWRlclR5cGU6IE1lc3NhZ2VIZWFkZXI7XG4gICAgY29uc3RydWN0b3IodmVyc2lvbjogTWV0YWRhdGFWZXJzaW9uLCBib2R5TGVuZ3RoOiBMb25nIHwgbnVtYmVyLCBoZWFkZXJUeXBlOiBNZXNzYWdlSGVhZGVyKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIHRoaXMuaGVhZGVyVHlwZSA9IGhlYWRlclR5cGU7XG4gICAgICAgIHRoaXMuYm9keUxlbmd0aCA9IHR5cGVvZiBib2R5TGVuZ3RoID09PSAnbnVtYmVyJyA/IGJvZHlMZW5ndGggOiBib2R5TGVuZ3RoLmxvdztcbiAgICB9XG4gICAgc3RhdGljIGlzU2NoZW1hKG06IE1lc3NhZ2UpOiBtIGlzIFNjaGVtYSB7IHJldHVybiBtLmhlYWRlclR5cGUgPT09IE1lc3NhZ2VIZWFkZXIuU2NoZW1hOyB9XG4gICAgc3RhdGljIGlzUmVjb3JkQmF0Y2gobTogTWVzc2FnZSk6IG0gaXMgUmVjb3JkQmF0Y2hNZXRhZGF0YSB7IHJldHVybiBtLmhlYWRlclR5cGUgPT09IE1lc3NhZ2VIZWFkZXIuUmVjb3JkQmF0Y2g7IH1cbiAgICBzdGF0aWMgaXNEaWN0aW9uYXJ5QmF0Y2gobTogTWVzc2FnZSk6IG0gaXMgRGljdGlvbmFyeUJhdGNoIHsgcmV0dXJuIG0uaGVhZGVyVHlwZSA9PT0gTWVzc2FnZUhlYWRlci5EaWN0aW9uYXJ5QmF0Y2g7IH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlY29yZEJhdGNoTWV0YWRhdGEgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XG4gICAgcHVibGljIG5vZGVzOiBGaWVsZE1ldGFkYXRhW107XG4gICAgcHVibGljIGJ1ZmZlcnM6IEJ1ZmZlck1ldGFkYXRhW107XG4gICAgY29uc3RydWN0b3IodmVyc2lvbjogTWV0YWRhdGFWZXJzaW9uLCBsZW5ndGg6IExvbmcgfCBudW1iZXIsIG5vZGVzOiBGaWVsZE1ldGFkYXRhW10sIGJ1ZmZlcnM6IEJ1ZmZlck1ldGFkYXRhW10pIHtcbiAgICAgICAgc3VwZXIodmVyc2lvbiwgYnVmZmVycy5yZWR1Y2UoKHMsIGIpID0+IGFsaWduKHMgKyBiLmxlbmd0aCArIChiLm9mZnNldCAtIHMpLCA4KSwgMCksIE1lc3NhZ2VIZWFkZXIuUmVjb3JkQmF0Y2gpO1xuICAgICAgICB0aGlzLm5vZGVzID0gbm9kZXM7XG4gICAgICAgIHRoaXMuYnVmZmVycyA9IGJ1ZmZlcnM7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgPyBsZW5ndGggOiBsZW5ndGgubG93O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIERpY3Rpb25hcnlCYXRjaCBleHRlbmRzIE1lc3NhZ2Uge1xuICAgIHB1YmxpYyBpZDogbnVtYmVyO1xuICAgIHB1YmxpYyBpc0RlbHRhOiBib29sZWFuO1xuICAgIHB1YmxpYyBkYXRhOiBSZWNvcmRCYXRjaE1ldGFkYXRhO1xuICAgIGNvbnN0cnVjdG9yKHZlcnNpb246IE1ldGFkYXRhVmVyc2lvbiwgZGF0YTogUmVjb3JkQmF0Y2hNZXRhZGF0YSwgaWQ6IExvbmcgfCBudW1iZXIsIGlzRGVsdGE6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcih2ZXJzaW9uLCBkYXRhLmJvZHlMZW5ndGgsIE1lc3NhZ2VIZWFkZXIuRGljdGlvbmFyeUJhdGNoKTtcbiAgICAgICAgdGhpcy5pc0RlbHRhID0gaXNEZWx0YTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5pZCA9IHR5cGVvZiBpZCA9PT0gJ251bWJlcicgPyBpZCA6IGlkLmxvdztcbiAgICB9XG4gICAgcHJpdmF0ZSBzdGF0aWMgYXRvbWljRGljdGlvbmFyeUlkID0gMDtcbiAgICBwdWJsaWMgc3RhdGljIGdldElkKCkgeyByZXR1cm4gRGljdGlvbmFyeUJhdGNoLmF0b21pY0RpY3Rpb25hcnlJZCsrOyB9XG4gICAgcHVibGljIGdldCBub2RlcygpOiBGaWVsZE1ldGFkYXRhW10geyByZXR1cm4gdGhpcy5kYXRhLm5vZGVzOyB9XG4gICAgcHVibGljIGdldCBidWZmZXJzKCk6IEJ1ZmZlck1ldGFkYXRhW10geyByZXR1cm4gdGhpcy5kYXRhLmJ1ZmZlcnM7IH1cbn1cblxuZXhwb3J0IGNsYXNzIEJ1ZmZlck1ldGFkYXRhIHtcbiAgICBwdWJsaWMgb2Zmc2V0OiBudW1iZXI7XG4gICAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKG9mZnNldDogTG9uZyB8IG51bWJlciwgbGVuZ3RoOiBMb25nIHwgbnVtYmVyKSB7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gdHlwZW9mIG9mZnNldCA9PT0gJ251bWJlcicgPyBvZmZzZXQgOiBvZmZzZXQubG93O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInID8gbGVuZ3RoIDogbGVuZ3RoLmxvdztcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaWVsZE1ldGFkYXRhIHtcbiAgICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XG4gICAgcHVibGljIG51bGxDb3VudDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aDogTG9uZyB8IG51bWJlciwgbnVsbENvdW50OiBMb25nIHwgbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdHlwZW9mIGxlbmd0aCA9PT0gJ251bWJlcicgPyBsZW5ndGggOiBsZW5ndGgubG93O1xuICAgICAgICB0aGlzLm51bGxDb3VudCA9IHR5cGVvZiBudWxsQ291bnQgPT09ICdudW1iZXInID8gbnVsbENvdW50IDogbnVsbENvdW50LmxvdztcbiAgICB9XG59XG4iXX0=
