"use strict";
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
var all_1 = require("./all");
exports.Row = all_1.Row;
var all_2 = require("./all");
exports.Vector = all_2.Vector;
var all_3 = require("./all");
exports.BaseVector = all_3.BaseVector;
var all_4 = require("./all");
exports.BinaryVector = all_4.BinaryVector;
var all_5 = require("./all");
exports.BoolVector = all_5.BoolVector;
var all_6 = require("./all");
exports.ChunkedVector = all_6.ChunkedVector;
var all_7 = require("./all");
exports.DateVector = all_7.DateVector;
exports.DateDayVector = all_7.DateDayVector;
exports.DateMillisecondVector = all_7.DateMillisecondVector;
var all_8 = require("./all");
exports.DecimalVector = all_8.DecimalVector;
var all_9 = require("./all");
exports.DictionaryVector = all_9.DictionaryVector;
var all_10 = require("./all");
exports.FixedSizeBinaryVector = all_10.FixedSizeBinaryVector;
var all_11 = require("./all");
exports.FixedSizeListVector = all_11.FixedSizeListVector;
var all_12 = require("./all");
exports.FloatVector = all_12.FloatVector;
exports.Float16Vector = all_12.Float16Vector;
exports.Float32Vector = all_12.Float32Vector;
exports.Float64Vector = all_12.Float64Vector;
var all_13 = require("./all");
exports.IntervalVector = all_13.IntervalVector;
exports.IntervalDayTimeVector = all_13.IntervalDayTimeVector;
exports.IntervalYearMonthVector = all_13.IntervalYearMonthVector;
var all_14 = require("./all");
exports.IntVector = all_14.IntVector;
exports.Int8Vector = all_14.Int8Vector;
exports.Int16Vector = all_14.Int16Vector;
exports.Int32Vector = all_14.Int32Vector;
exports.Int64Vector = all_14.Int64Vector;
exports.Uint8Vector = all_14.Uint8Vector;
exports.Uint16Vector = all_14.Uint16Vector;
exports.Uint32Vector = all_14.Uint32Vector;
exports.Uint64Vector = all_14.Uint64Vector;
var all_15 = require("./all");
exports.ListVector = all_15.ListVector;
var all_16 = require("./all");
exports.MapVector = all_16.MapVector;
var all_17 = require("./all");
exports.NullVector = all_17.NullVector;
var all_18 = require("./all");
exports.StructVector = all_18.StructVector;
var all_19 = require("./all");
exports.TimestampVector = all_19.TimestampVector;
exports.TimestampSecondVector = all_19.TimestampSecondVector;
exports.TimestampMillisecondVector = all_19.TimestampMillisecondVector;
exports.TimestampMicrosecondVector = all_19.TimestampMicrosecondVector;
exports.TimestampNanosecondVector = all_19.TimestampNanosecondVector;
var all_20 = require("./all");
exports.TimeVector = all_20.TimeVector;
exports.TimeSecondVector = all_20.TimeSecondVector;
exports.TimeMillisecondVector = all_20.TimeMillisecondVector;
exports.TimeMicrosecondVector = all_20.TimeMicrosecondVector;
exports.TimeNanosecondVector = all_20.TimeNanosecondVector;
var all_21 = require("./all");
exports.UnionVector = all_21.UnionVector;
exports.DenseUnionVector = all_21.DenseUnionVector;
exports.SparseUnionVector = all_21.SparseUnionVector;
var all_22 = require("./all");
exports.Utf8Vector = all_22.Utf8Vector;
const enum_1 = require("../enum");
const vector_1 = require("../vector");
const base_1 = require("./base");
const bit_1 = require("../util/bit");
const get_1 = require("../visitor/get");
const set_1 = require("../visitor/set");
const indexof_1 = require("../visitor/indexof");
const toarray_1 = require("../visitor/toarray");
const iterator_1 = require("../visitor/iterator");
const bytewidth_1 = require("../visitor/bytewidth");
const vectorctor_1 = require("../visitor/vectorctor");
/** @nocollapse */
vector_1.Vector.new = newVector;
function newVector(data, ...args) {
    return new (vectorctor_1.instance.getVisitFn(data.type)())(data, ...args);
}
//
// We provide the following method implementations for code navigability purposes only.
// They're overridden at runtime below with the specific Visitor implementation for each type,
// short-circuiting the usual Visitor traversal and reducing intermediate lookups and calls.
// This comment is here to remind you to not set breakpoints in these function bodies, or to inform
// you why the breakpoints you have already set are not being triggered. Have a great day!
//
base_1.BaseVector.prototype.get = function baseVectorGet(index) {
    return get_1.instance.visit(this, index);
};
base_1.BaseVector.prototype.set = function baseVectorSet(index, value) {
    return set_1.instance.visit(this, index, value);
};
base_1.BaseVector.prototype.indexOf = function baseVectorIndexOf(value, fromIndex) {
    return indexof_1.instance.visit(this, value, fromIndex);
};
base_1.BaseVector.prototype.toArray = function baseVectorToArray() {
    return toarray_1.instance.visit(this);
};
base_1.BaseVector.prototype.getByteWidth = function baseVectorGetByteWidth() {
    return bytewidth_1.instance.visit(this.type);
};
base_1.BaseVector.prototype[Symbol.iterator] = function baseVectorSymbolIterator() {
    return iterator_1.instance.visit(this);
};
// Perf: bind and assign the operator Visitor methods to each of the Vector subclasses for each Type
Object.keys(enum_1.Type)
    .filter((TType) => TType !== enum_1.Type.NONE && TType !== enum_1.Type[enum_1.Type.NONE])
    .map((T) => enum_1.Type[T]).filter((T) => typeof T === 'number')
    .forEach((TType) => {
    let typeIds;
    switch (TType) {
        case enum_1.Type['Int']:
            typeIds = [enum_1.Type['Int8'], enum_1.Type['Int16'], enum_1.Type['Int32'], enum_1.Type['Int64'], enum_1.Type['Uint8'], enum_1.Type['Uint16'], enum_1.Type['Uint32'], enum_1.Type['Uint64']];
            break;
        case enum_1.Type['Float']:
            typeIds = [enum_1.Type['Float16'], enum_1.Type['Float32'], enum_1.Type['Float64']];
            break;
        case enum_1.Type['Date']:
            typeIds = [enum_1.Type['DateDay'], enum_1.Type['DateMillisecond']];
            break;
        case enum_1.Type['Time']:
            typeIds = [enum_1.Type['TimeSecond'], enum_1.Type['TimeMillisecond'], enum_1.Type['TimeMicrosecond'], enum_1.Type['TimeNanosecond']];
            break;
        case enum_1.Type['Timestamp']:
            typeIds = [enum_1.Type['TimestampSecond'], enum_1.Type['TimestampMillisecond'], enum_1.Type['TimestampMicrosecond'], enum_1.Type['TimestampNanosecond']];
            break;
        case enum_1.Type['Interval']:
            typeIds = [enum_1.Type['IntervalDayTime'], enum_1.Type['IntervalYearMonth']];
            break;
        case enum_1.Type['Union']:
            typeIds = [enum_1.Type['DenseUnion'], enum_1.Type['SparseUnion']];
            break;
        default:
            typeIds = [TType];
            break;
    }
    typeIds.forEach((TType) => {
        const VectorCtor = vectorctor_1.instance.visit(TType);
        VectorCtor.prototype['get'] = partial1(get_1.instance.getVisitFn(TType));
        VectorCtor.prototype['set'] = partial2(set_1.instance.getVisitFn(TType));
        VectorCtor.prototype['indexOf'] = partial2(indexof_1.instance.getVisitFn(TType));
        VectorCtor.prototype['toArray'] = partial0(toarray_1.instance.getVisitFn(TType));
        VectorCtor.prototype['getByteWidth'] = partial0(bytewidth_1.instance.getVisitFn(TType));
        VectorCtor.prototype[Symbol.iterator] = partial0(iterator_1.instance.getVisitFn(TType));
    });
});
function partial0(visit) {
    return function () { return visit(this); };
}
function partial1(visit) {
    return function (a) { return visit(this, a); };
}
function partial2(visit) {
    return function (a, b) { return visit(this, a, b); };
}
function wrapNullableSet(fn) {
    return function (i, a) {
        if (bit_1.setBool(this.nullBitmap, this.offset + i, a != null)) {
            fn.call(this, i, a);
        }
    };
}
// @ts-ignore
function bindBaseVectorDataAccessors(data) {
    const type = this.type;
    this['get'] = get_1.instance.getVisitFn(type).bind(this, this);
    this['set'] = set_1.instance.getVisitFn(type).bind(this, this);
    this['indexOf'] = indexof_1.instance.getVisitFn(type).bind(this, this);
    this['toArray'] = toarray_1.instance.getVisitFn(type).bind(this, this);
    this[Symbol.iterator] = iterator_1.instance.getVisitFn(type).bind(this, this);
    if (this.nullCount > 0) {
        this['set'] = wrapNullableSet(this['set']);
    }
    vector_1.Vector.prototype.bindDataAccessors.call(this, data);
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUMsRUFBRTtRQUNwQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0tBQzlDO0lBQ0EsZUFBTSxDQUFDLFNBQWlCLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNqRSxDQUFDIiwiZmlsZSI6InZlY3Rvci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbi8vIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuLy8gZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbi8vIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbi8vIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbi8vIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuLy8gd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuLy8gc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbi8vIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4vLyBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbi8vIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbi8vIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG5leHBvcnQgeyBSb3cgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBCYXNlVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgQmluYXJ5VmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgQm9vbFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IENodW5rZWRWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBEYXRlVmVjdG9yLCBEYXRlRGF5VmVjdG9yLCBEYXRlTWlsbGlzZWNvbmRWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBEZWNpbWFsVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgRGljdGlvbmFyeVZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IEZpeGVkU2l6ZUJpbmFyeVZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IEZpeGVkU2l6ZUxpc3RWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBGbG9hdFZlY3RvciwgRmxvYXQxNlZlY3RvciwgRmxvYXQzMlZlY3RvciwgRmxvYXQ2NFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IEludGVydmFsVmVjdG9yLCBJbnRlcnZhbERheVRpbWVWZWN0b3IsIEludGVydmFsWWVhck1vbnRoVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgSW50VmVjdG9yLCBJbnQ4VmVjdG9yLCBJbnQxNlZlY3RvciwgSW50MzJWZWN0b3IsIEludDY0VmVjdG9yLCBVaW50OFZlY3RvciwgVWludDE2VmVjdG9yLCBVaW50MzJWZWN0b3IsIFVpbnQ2NFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IExpc3RWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBNYXBWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBOdWxsVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgU3RydWN0VmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgVGltZXN0YW1wVmVjdG9yLCBUaW1lc3RhbXBTZWNvbmRWZWN0b3IsIFRpbWVzdGFtcE1pbGxpc2Vjb25kVmVjdG9yLCBUaW1lc3RhbXBNaWNyb3NlY29uZFZlY3RvciwgVGltZXN0YW1wTmFub3NlY29uZFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IFRpbWVWZWN0b3IsIFRpbWVTZWNvbmRWZWN0b3IsIFRpbWVNaWxsaXNlY29uZFZlY3RvciwgVGltZU1pY3Jvc2Vjb25kVmVjdG9yLCBUaW1lTmFub3NlY29uZFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IFVuaW9uVmVjdG9yLCBEZW5zZVVuaW9uVmVjdG9yLCBTcGFyc2VVbmlvblZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IFV0ZjhWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5cbmltcG9ydCB7IERhdGEgfSBmcm9tICcuLi9kYXRhJztcbmltcG9ydCB7IFR5cGUgfSBmcm9tICcuLi9lbnVtJztcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gJy4uL3ZlY3Rvcic7XG5pbXBvcnQgeyBEYXRhVHlwZSB9IGZyb20gJy4uL3R5cGUnO1xuaW1wb3J0IHsgQmFzZVZlY3RvciB9IGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgeyBzZXRCb29sIH0gZnJvbSAnLi4vdXRpbC9iaXQnO1xuaW1wb3J0IHsgVmVjdG9yIGFzIFYsIFZlY3RvckN0b3JBcmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBpbnN0YW5jZSBhcyBnZXRWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci9nZXQnO1xuaW1wb3J0IHsgaW5zdGFuY2UgYXMgc2V0VmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3Ivc2V0JztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGluZGV4T2ZWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci9pbmRleG9mJztcbmltcG9ydCB7IGluc3RhbmNlIGFzIHRvQXJyYXlWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci90b2FycmF5JztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGl0ZXJhdG9yVmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3IvaXRlcmF0b3InO1xuaW1wb3J0IHsgaW5zdGFuY2UgYXMgYnl0ZVdpZHRoVmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3IvYnl0ZXdpZHRoJztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGdldFZlY3RvckNvbnN0cnVjdG9yIH0gZnJvbSAnLi4vdmlzaXRvci92ZWN0b3JjdG9yJztcblxuZGVjbGFyZSBtb2R1bGUgJy4uL3ZlY3Rvcicge1xuICAgIG5hbWVzcGFjZSBWZWN0b3Ige1xuICAgICAgICBleHBvcnQgeyBuZXdWZWN0b3IgYXMgbmV3IH07XG4gICAgfVxufVxuXG5kZWNsYXJlIG1vZHVsZSAnLi9iYXNlJyB7XG4gICAgaW50ZXJmYWNlIEJhc2VWZWN0b3I8VCBleHRlbmRzIERhdGFUeXBlPiB7XG4gICAgICAgIGdldChpbmRleDogbnVtYmVyKTogVFsnVFZhbHVlJ10gfCBudWxsO1xuICAgICAgICBzZXQoaW5kZXg6IG51bWJlciwgdmFsdWU6IFRbJ1RWYWx1ZSddIHwgbnVsbCk6IHZvaWQ7XG4gICAgICAgIGluZGV4T2YodmFsdWU6IFRbJ1RWYWx1ZSddIHwgbnVsbCwgZnJvbUluZGV4PzogbnVtYmVyKTogbnVtYmVyO1xuICAgICAgICB0b0FycmF5KCk6IFRbJ1RBcnJheSddO1xuICAgICAgICBnZXRCeXRlV2lkdGgoKTogbnVtYmVyO1xuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFRbJ1RWYWx1ZSddIHwgbnVsbD47XG4gICAgfVxufVxuXG4vKiogQG5vY29sbGFwc2UgKi9cblZlY3Rvci5uZXcgPSBuZXdWZWN0b3I7XG5cbmZ1bmN0aW9uIG5ld1ZlY3RvcjxUIGV4dGVuZHMgRGF0YVR5cGU+KGRhdGE6IERhdGE8VD4sIC4uLmFyZ3M6IFZlY3RvckN0b3JBcmdzPFY8VD4+KTogVjxUPiB7XG4gICAgcmV0dXJuIG5ldyAoZ2V0VmVjdG9yQ29uc3RydWN0b3IuZ2V0VmlzaXRGbihkYXRhLnR5cGUpKCkpKGRhdGEsIC4uLmFyZ3MpIGFzIFY8VD47XG59XG5cbi8vXG4vLyBXZSBwcm92aWRlIHRoZSBmb2xsb3dpbmcgbWV0aG9kIGltcGxlbWVudGF0aW9ucyBmb3IgY29kZSBuYXZpZ2FiaWxpdHkgcHVycG9zZXMgb25seS5cbi8vIFRoZXkncmUgb3ZlcnJpZGRlbiBhdCBydW50aW1lIGJlbG93IHdpdGggdGhlIHNwZWNpZmljIFZpc2l0b3IgaW1wbGVtZW50YXRpb24gZm9yIGVhY2ggdHlwZSxcbi8vIHNob3J0LWNpcmN1aXRpbmcgdGhlIHVzdWFsIFZpc2l0b3IgdHJhdmVyc2FsIGFuZCByZWR1Y2luZyBpbnRlcm1lZGlhdGUgbG9va3VwcyBhbmQgY2FsbHMuXG4vLyBUaGlzIGNvbW1lbnQgaXMgaGVyZSB0byByZW1pbmQgeW91IHRvIG5vdCBzZXQgYnJlYWtwb2ludHMgaW4gdGhlc2UgZnVuY3Rpb24gYm9kaWVzLCBvciB0byBpbmZvcm1cbi8vIHlvdSB3aHkgdGhlIGJyZWFrcG9pbnRzIHlvdSBoYXZlIGFscmVhZHkgc2V0IGFyZSBub3QgYmVpbmcgdHJpZ2dlcmVkLiBIYXZlIGEgZ3JlYXQgZGF5IVxuLy9cblxuQmFzZVZlY3Rvci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gYmFzZVZlY3RvckdldDxUIGV4dGVuZHMgRGF0YVR5cGU+KHRoaXM6IEJhc2VWZWN0b3I8VD4sIGluZGV4OiBudW1iZXIpOiBUWydUVmFsdWUnXSB8IG51bGwge1xuICAgIHJldHVybiBnZXRWaXNpdG9yLnZpc2l0KHRoaXMsIGluZGV4KTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIGJhc2VWZWN0b3JTZXQ8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+LCBpbmRleDogbnVtYmVyLCB2YWx1ZTogVFsnVFZhbHVlJ10gfCBudWxsKTogdm9pZCB7XG4gICAgcmV0dXJuIHNldFZpc2l0b3IudmlzaXQodGhpcywgaW5kZXgsIHZhbHVlKTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBiYXNlVmVjdG9ySW5kZXhPZjxUIGV4dGVuZHMgRGF0YVR5cGU+KHRoaXM6IEJhc2VWZWN0b3I8VD4sIHZhbHVlOiBUWydUVmFsdWUnXSB8IG51bGwsIGZyb21JbmRleD86IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGluZGV4T2ZWaXNpdG9yLnZpc2l0KHRoaXMsIHZhbHVlLCBmcm9tSW5kZXgpO1xufTtcblxuQmFzZVZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIGJhc2VWZWN0b3JUb0FycmF5PFQgZXh0ZW5kcyBEYXRhVHlwZT4odGhpczogQmFzZVZlY3RvcjxUPik6IFRbJ1RBcnJheSddIHtcbiAgICByZXR1cm4gdG9BcnJheVZpc2l0b3IudmlzaXQodGhpcyk7XG59O1xuXG5CYXNlVmVjdG9yLnByb3RvdHlwZS5nZXRCeXRlV2lkdGggPSBmdW5jdGlvbiBiYXNlVmVjdG9yR2V0Qnl0ZVdpZHRoPFQgZXh0ZW5kcyBEYXRhVHlwZT4odGhpczogQmFzZVZlY3RvcjxUPik6IG51bWJlciB7XG4gICAgcmV0dXJuIGJ5dGVXaWR0aFZpc2l0b3IudmlzaXQodGhpcy50eXBlKTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiBiYXNlVmVjdG9yU3ltYm9sSXRlcmF0b3I8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+KTogSXRlcmFibGVJdGVyYXRvcjxUWydUVmFsdWUnXSB8IG51bGw+IHtcbiAgICByZXR1cm4gaXRlcmF0b3JWaXNpdG9yLnZpc2l0KHRoaXMpO1xufTtcblxuLy8gUGVyZjogYmluZCBhbmQgYXNzaWduIHRoZSBvcGVyYXRvciBWaXNpdG9yIG1ldGhvZHMgdG8gZWFjaCBvZiB0aGUgVmVjdG9yIHN1YmNsYXNzZXMgZm9yIGVhY2ggVHlwZVxuKE9iamVjdC5rZXlzKFR5cGUpIGFzIGFueVtdKVxuICAgIC5maWx0ZXIoKFRUeXBlKSA9PiBUVHlwZSAhPT0gVHlwZS5OT05FICYmIFRUeXBlICE9PSBUeXBlW1R5cGUuTk9ORV0pXG4gICAgLm1hcCgoVDogYW55KSA9PiBUeXBlW1RdIGFzIGFueSkuZmlsdGVyKChUOiBhbnkpOiBUIGlzIFR5cGUgPT4gdHlwZW9mIFQgPT09ICdudW1iZXInKVxuICAgIC5mb3JFYWNoKChUVHlwZSkgPT4ge1xuICAgICAgICBsZXQgdHlwZUlkczogVHlwZVtdO1xuICAgICAgICBzd2l0Y2ggKFRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFR5cGVbJ0ludCddOiAgICAgICB0eXBlSWRzID0gW1R5cGVbJ0ludDgnXSwgVHlwZVsnSW50MTYnXSwgVHlwZVsnSW50MzInXSwgVHlwZVsnSW50NjQnXSwgVHlwZVsnVWludDgnXSwgVHlwZVsnVWludDE2J10sIFR5cGVbJ1VpbnQzMiddLCBUeXBlWydVaW50NjQnXV07IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUeXBlWydGbG9hdCddOiAgICAgdHlwZUlkcyA9IFtUeXBlWydGbG9hdDE2J10sIFR5cGVbJ0Zsb2F0MzInXSwgVHlwZVsnRmxvYXQ2NCddXTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFR5cGVbJ0RhdGUnXTogICAgICB0eXBlSWRzID0gW1R5cGVbJ0RhdGVEYXknXSwgVHlwZVsnRGF0ZU1pbGxpc2Vjb25kJ11dOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZVsnVGltZSddOiAgICAgIHR5cGVJZHMgPSBbVHlwZVsnVGltZVNlY29uZCddLCBUeXBlWydUaW1lTWlsbGlzZWNvbmQnXSwgVHlwZVsnVGltZU1pY3Jvc2Vjb25kJ10sIFR5cGVbJ1RpbWVOYW5vc2Vjb25kJ11dOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZVsnVGltZXN0YW1wJ106IHR5cGVJZHMgPSBbVHlwZVsnVGltZXN0YW1wU2Vjb25kJ10sIFR5cGVbJ1RpbWVzdGFtcE1pbGxpc2Vjb25kJ10sIFR5cGVbJ1RpbWVzdGFtcE1pY3Jvc2Vjb25kJ10sIFR5cGVbJ1RpbWVzdGFtcE5hbm9zZWNvbmQnXV07IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUeXBlWydJbnRlcnZhbCddOiAgdHlwZUlkcyA9IFtUeXBlWydJbnRlcnZhbERheVRpbWUnXSwgVHlwZVsnSW50ZXJ2YWxZZWFyTW9udGgnXV07IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUeXBlWydVbmlvbiddOiAgICAgdHlwZUlkcyA9IFtUeXBlWydEZW5zZVVuaW9uJ10sIFR5cGVbJ1NwYXJzZVVuaW9uJ11dOyBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgIHR5cGVJZHMgPSBbVFR5cGVdOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0eXBlSWRzLmZvckVhY2goKFRUeXBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBWZWN0b3JDdG9yID0gZ2V0VmVjdG9yQ29uc3RydWN0b3IudmlzaXQoVFR5cGUpO1xuICAgICAgICAgICAgVmVjdG9yQ3Rvci5wcm90b3R5cGVbJ2dldCddID0gcGFydGlhbDEoZ2V0VmlzaXRvci5nZXRWaXNpdEZuKFRUeXBlKSk7XG4gICAgICAgICAgICBWZWN0b3JDdG9yLnByb3RvdHlwZVsnc2V0J10gPSBwYXJ0aWFsMihzZXRWaXNpdG9yLmdldFZpc2l0Rm4oVFR5cGUpKTtcbiAgICAgICAgICAgIFZlY3RvckN0b3IucHJvdG90eXBlWydpbmRleE9mJ10gPSBwYXJ0aWFsMihpbmRleE9mVmlzaXRvci5nZXRWaXNpdEZuKFRUeXBlKSk7XG4gICAgICAgICAgICBWZWN0b3JDdG9yLnByb3RvdHlwZVsndG9BcnJheSddID0gcGFydGlhbDAodG9BcnJheVZpc2l0b3IuZ2V0VmlzaXRGbihUVHlwZSkpO1xuICAgICAgICAgICAgVmVjdG9yQ3Rvci5wcm90b3R5cGVbJ2dldEJ5dGVXaWR0aCddID0gcGFydGlhbDAoYnl0ZVdpZHRoVmlzaXRvci5nZXRWaXNpdEZuKFRUeXBlKSk7XG4gICAgICAgICAgICBWZWN0b3JDdG9yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gcGFydGlhbDAoaXRlcmF0b3JWaXNpdG9yLmdldFZpc2l0Rm4oVFR5cGUpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbmZ1bmN0aW9uIHBhcnRpYWwwPFQ+KHZpc2l0OiAobm9kZTogVCkgPT4gYW55KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRoaXM6IFQpIHsgcmV0dXJuIHZpc2l0KHRoaXMpOyB9O1xufVxuXG5mdW5jdGlvbiBwYXJ0aWFsMTxUPih2aXNpdDogKG5vZGU6IFQsIGE6IGFueSkgPT4gYW55KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRoaXM6IFQsIGE6IGFueSkgeyByZXR1cm4gdmlzaXQodGhpcywgYSk7IH07XG59XG5cbmZ1bmN0aW9uIHBhcnRpYWwyPFQ+KHZpc2l0OiAobm9kZTogVCwgYTogYW55LCBiOiBhbnkpID0+IGFueSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0aGlzOiBULCBhOiBhbnksIGI6IGFueSkgeyByZXR1cm4gdmlzaXQodGhpcywgYSwgYik7IH07XG59XG5cbmZ1bmN0aW9uIHdyYXBOdWxsYWJsZVNldDxUIGV4dGVuZHMgRGF0YVR5cGUsIFYgZXh0ZW5kcyBCYXNlVmVjdG9yPFQ+LCBGIGV4dGVuZHMgKGk6IG51bWJlciwgYTogYW55KSA9PiB2b2lkPihmbjogRik6ICguLi5hcmdzOiBQYXJhbWV0ZXJzPEY+KSA9PiB2b2lkIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGhpczogViwgaTogbnVtYmVyLCBhOiBhbnkpIHtcbiAgICAgICAgaWYgKHNldEJvb2wodGhpcy5udWxsQml0bWFwLCB0aGlzLm9mZnNldCArIGksIGEgIT0gbnVsbCkpIHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgaSwgYSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBAdHMtaWdub3JlXG5mdW5jdGlvbiBiaW5kQmFzZVZlY3RvckRhdGFBY2Nlc3NvcnM8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+LCBkYXRhOiBEYXRhPFQ+KSB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMudHlwZTtcbiAgICB0aGlzWydnZXQnXSA9IGdldFZpc2l0b3IuZ2V0VmlzaXRGbih0eXBlKS5iaW5kKHRoaXMsIDxhbnk+IHRoaXMgYXMgVjxUPik7XG4gICAgdGhpc1snc2V0J10gPSBzZXRWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbJ2luZGV4T2YnXSA9IGluZGV4T2ZWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbJ3RvQXJyYXknXSA9IHRvQXJyYXlWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbU3ltYm9sLml0ZXJhdG9yXSA9IGl0ZXJhdG9yVmlzaXRvci5nZXRWaXNpdEZuKHR5cGUpLmJpbmQodGhpcywgPGFueT4gdGhpcyBhcyBWPFQ+KTtcbiAgICBpZiAodGhpcy5udWxsQ291bnQgPiAwKSB7XG4gICAgICAgIHRoaXNbJ3NldCddID0gd3JhcE51bGxhYmxlU2V0KHRoaXNbJ3NldCddKTtcbiAgICB9XG4gICAgKFZlY3Rvci5wcm90b3R5cGUgYXMgYW55KS5iaW5kRGF0YUFjY2Vzc29ycy5jYWxsKHRoaXMsIGRhdGEpO1xufVxuIl19
