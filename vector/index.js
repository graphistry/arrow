"use strict";
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
var row_1 = require("./row");
exports.Row = row_1.Row;
var vector_1 = require("../vector");
exports.Vector = vector_1.Vector;
var base_1 = require("./base");
exports.BaseVector = base_1.BaseVector;
var binary_1 = require("./binary");
exports.BinaryVector = binary_1.BinaryVector;
var bool_1 = require("./bool");
exports.BoolVector = bool_1.BoolVector;
var chunked_1 = require("./chunked");
exports.Chunked = chunked_1.Chunked;
var date_1 = require("./date");
exports.DateVector = date_1.DateVector;
exports.DateDayVector = date_1.DateDayVector;
exports.DateMillisecondVector = date_1.DateMillisecondVector;
var decimal_1 = require("./decimal");
exports.DecimalVector = decimal_1.DecimalVector;
var dictionary_1 = require("./dictionary");
exports.DictionaryVector = dictionary_1.DictionaryVector;
var fixedsizebinary_1 = require("./fixedsizebinary");
exports.FixedSizeBinaryVector = fixedsizebinary_1.FixedSizeBinaryVector;
var fixedsizelist_1 = require("./fixedsizelist");
exports.FixedSizeListVector = fixedsizelist_1.FixedSizeListVector;
var float_1 = require("./float");
exports.FloatVector = float_1.FloatVector;
exports.Float16Vector = float_1.Float16Vector;
exports.Float32Vector = float_1.Float32Vector;
exports.Float64Vector = float_1.Float64Vector;
var interval_1 = require("./interval");
exports.IntervalVector = interval_1.IntervalVector;
exports.IntervalDayTimeVector = interval_1.IntervalDayTimeVector;
exports.IntervalYearMonthVector = interval_1.IntervalYearMonthVector;
var int_1 = require("./int");
exports.IntVector = int_1.IntVector;
exports.Int8Vector = int_1.Int8Vector;
exports.Int16Vector = int_1.Int16Vector;
exports.Int32Vector = int_1.Int32Vector;
exports.Int64Vector = int_1.Int64Vector;
exports.Uint8Vector = int_1.Uint8Vector;
exports.Uint16Vector = int_1.Uint16Vector;
exports.Uint32Vector = int_1.Uint32Vector;
exports.Uint64Vector = int_1.Uint64Vector;
var list_1 = require("./list");
exports.ListVector = list_1.ListVector;
var map_1 = require("./map");
exports.MapVector = map_1.MapVector;
var null_1 = require("./null");
exports.NullVector = null_1.NullVector;
var struct_1 = require("./struct");
exports.StructVector = struct_1.StructVector;
var timestamp_1 = require("./timestamp");
exports.TimestampVector = timestamp_1.TimestampVector;
exports.TimestampSecondVector = timestamp_1.TimestampSecondVector;
exports.TimestampMillisecondVector = timestamp_1.TimestampMillisecondVector;
exports.TimestampMicrosecondVector = timestamp_1.TimestampMicrosecondVector;
exports.TimestampNanosecondVector = timestamp_1.TimestampNanosecondVector;
var time_1 = require("./time");
exports.TimeVector = time_1.TimeVector;
exports.TimeSecondVector = time_1.TimeSecondVector;
exports.TimeMillisecondVector = time_1.TimeMillisecondVector;
exports.TimeMicrosecondVector = time_1.TimeMicrosecondVector;
exports.TimeNanosecondVector = time_1.TimeNanosecondVector;
var union_1 = require("./union");
exports.UnionVector = union_1.UnionVector;
exports.DenseUnionVector = union_1.DenseUnionVector;
exports.SparseUnionVector = union_1.SparseUnionVector;
var utf8_1 = require("./utf8");
exports.Utf8Vector = utf8_1.Utf8Vector;
const enum_1 = require("../enum");
const vector_2 = require("../vector");
const base_2 = require("./base");
const bit_1 = require("../util/bit");
const get_1 = require("../visitor/get");
const set_1 = require("../visitor/set");
const indexof_1 = require("../visitor/indexof");
const toarray_1 = require("../visitor/toarray");
const iterator_1 = require("../visitor/iterator");
const bytewidth_1 = require("../visitor/bytewidth");
const vectorctor_1 = require("../visitor/vectorctor");
/** @nocollapse */
vector_2.Vector.new = newVector;
function newVector(data, ...args) {
    return new (vectorctor_1.instance.getVisitFn(data.type)())(data, ...args);
}
//
// We provide the following method implementations for code navigability purposes only.
// They're overridden at runtime below with the specific Visitor implementation for each type,
// short-circuiting the usual Visitor traversal and reducing intermediate lookups and calls.
// This comment is here to remind you to not set breakpoints in these function bodies, or to inform
// you why the breakpoints you have already set are not being triggered. Have a great day!
//
base_2.BaseVector.prototype.get = function baseVectorGet(index) {
    return get_1.instance.visit(this, index);
};
base_2.BaseVector.prototype.set = function baseVectorSet(index, value) {
    return set_1.instance.visit(this, index, value);
};
base_2.BaseVector.prototype.indexOf = function baseVectorIndexOf(value, fromIndex) {
    return indexof_1.instance.visit(this, value, fromIndex);
};
base_2.BaseVector.prototype.toArray = function baseVectorToArray() {
    return toarray_1.instance.visit(this);
};
base_2.BaseVector.prototype.getByteWidth = function baseVectorGetByteWidth() {
    return bytewidth_1.instance.visit(this.type);
};
base_2.BaseVector.prototype[Symbol.iterator] = function baseVectorSymbolIterator() {
    return iterator_1.instance.visit(this);
};
base_2.BaseVector.prototype._bindDataAccessors = bindBaseVectorDataAccessors;
// Perf: bind and assign the operator Visitor methods to each of the Vector subclasses for each Type
Object.keys(enum_1.Type)
    .filter((typeId) => typeId !== enum_1.Type.NONE && typeId !== enum_1.Type[enum_1.Type.NONE])
    .map((T) => enum_1.Type[T]).filter((T) => typeof T === 'number')
    .forEach((typeId) => {
    let typeIds;
    switch (typeId) {
        case enum_1.Type.Int:
            typeIds = [enum_1.Type.Int8, enum_1.Type.Int16, enum_1.Type.Int32, enum_1.Type.Int64, enum_1.Type.Uint8, enum_1.Type.Uint16, enum_1.Type.Uint32, enum_1.Type.Uint64];
            break;
        case enum_1.Type.Float:
            typeIds = [enum_1.Type.Float16, enum_1.Type.Float32, enum_1.Type.Float64];
            break;
        case enum_1.Type.Date:
            typeIds = [enum_1.Type.DateDay, enum_1.Type.DateMillisecond];
            break;
        case enum_1.Type.Time:
            typeIds = [enum_1.Type.TimeSecond, enum_1.Type.TimeMillisecond, enum_1.Type.TimeMicrosecond, enum_1.Type.TimeNanosecond];
            break;
        case enum_1.Type.Timestamp:
            typeIds = [enum_1.Type.TimestampSecond, enum_1.Type.TimestampMillisecond, enum_1.Type.TimestampMicrosecond, enum_1.Type.TimestampNanosecond];
            break;
        case enum_1.Type.Interval:
            typeIds = [enum_1.Type.IntervalDayTime, enum_1.Type.IntervalYearMonth];
            break;
        case enum_1.Type.Union:
            typeIds = [enum_1.Type.DenseUnion, enum_1.Type.SparseUnion];
            break;
        default:
            typeIds = [typeId];
            break;
    }
    typeIds.forEach((typeId) => {
        const VectorCtor = vectorctor_1.instance.visit(typeId);
        VectorCtor.prototype['get'] = partial1(get_1.instance.getVisitFn(typeId));
        VectorCtor.prototype['set'] = partial2(set_1.instance.getVisitFn(typeId));
        VectorCtor.prototype['indexOf'] = partial2(indexof_1.instance.getVisitFn(typeId));
        VectorCtor.prototype['toArray'] = partial0(toarray_1.instance.getVisitFn(typeId));
        VectorCtor.prototype['getByteWidth'] = partial0(bytewidth_1.instance.getVisitFn(typeId));
        VectorCtor.prototype[Symbol.iterator] = partial0(iterator_1.instance.getVisitFn(typeId));
    });
});
function partial0(visit) {
    return function () { return visit(this); };
}
function partial1(visit) {
    return function (a) { return visit(this, a); };
}
function partial2(visit) {
    return function (a, b) { return visit(this, a, b); };
}
function wrapNullable1(fn) {
    return function (i) { return this.isValid(i) ? fn.call(this, i) : null; };
}
function wrapNullableSet(fn) {
    return function (i, a) {
        if (bit_1.setBool(this.nullBitmap, this.offset + i, a != null)) {
            fn.call(this, i, a);
        }
    };
}
// @ts-ignore
function bindBaseVectorDataAccessors(data) {
    const type = this.type;
    this['get'] = get_1.instance.getVisitFn(type).bind(this, this);
    this['set'] = set_1.instance.getVisitFn(type).bind(this, this);
    this['indexOf'] = indexof_1.instance.getVisitFn(type).bind(this, this);
    this['toArray'] = toarray_1.instance.getVisitFn(type).bind(this, this);
    this[Symbol.iterator] = iterator_1.instance.getVisitFn(type).bind(this, this);
    if (this.nullCount > 0) {
        this['get'] = wrapNullable1(this['get']);
        this['set'] = wrapNullableSet(this['set']);
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQVEsSUFBWSxDQUFDLENBQUM7SUFDeEYsSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsRUFBRTtRQUNwQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7S0FDOUM7QUFDTCxDQUFDIiwiZmlsZSI6InZlY3Rvci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbi8vIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuLy8gZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbi8vIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbi8vIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbi8vIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuLy8gd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuLy8gc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbi8vIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4vLyBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbi8vIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbi8vIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG5leHBvcnQgeyBSb3cgfSBmcm9tICcuL3Jvdyc7XG5leHBvcnQgeyBWZWN0b3IgfSBmcm9tICcuLi92ZWN0b3InO1xuZXhwb3J0IHsgQmFzZVZlY3RvciB9IGZyb20gJy4vYmFzZSc7XG5leHBvcnQgeyBCaW5hcnlWZWN0b3IgfSBmcm9tICcuL2JpbmFyeSc7XG5leHBvcnQgeyBCb29sVmVjdG9yIH0gZnJvbSAnLi9ib29sJztcbmV4cG9ydCB7IENodW5rZWQgfSBmcm9tICcuL2NodW5rZWQnO1xuZXhwb3J0IHsgRGF0ZVZlY3RvciwgRGF0ZURheVZlY3RvciwgRGF0ZU1pbGxpc2Vjb25kVmVjdG9yIH0gZnJvbSAnLi9kYXRlJztcbmV4cG9ydCB7IERlY2ltYWxWZWN0b3IgfSBmcm9tICcuL2RlY2ltYWwnO1xuZXhwb3J0IHsgRGljdGlvbmFyeVZlY3RvciB9IGZyb20gJy4vZGljdGlvbmFyeSc7XG5leHBvcnQgeyBGaXhlZFNpemVCaW5hcnlWZWN0b3IgfSBmcm9tICcuL2ZpeGVkc2l6ZWJpbmFyeSc7XG5leHBvcnQgeyBGaXhlZFNpemVMaXN0VmVjdG9yIH0gZnJvbSAnLi9maXhlZHNpemVsaXN0JztcbmV4cG9ydCB7IEZsb2F0VmVjdG9yLCBGbG9hdDE2VmVjdG9yLCBGbG9hdDMyVmVjdG9yLCBGbG9hdDY0VmVjdG9yIH0gZnJvbSAnLi9mbG9hdCc7XG5leHBvcnQgeyBJbnRlcnZhbFZlY3RvciwgSW50ZXJ2YWxEYXlUaW1lVmVjdG9yLCBJbnRlcnZhbFllYXJNb250aFZlY3RvciB9IGZyb20gJy4vaW50ZXJ2YWwnO1xuZXhwb3J0IHsgSW50VmVjdG9yLCBJbnQ4VmVjdG9yLCBJbnQxNlZlY3RvciwgSW50MzJWZWN0b3IsIEludDY0VmVjdG9yLCBVaW50OFZlY3RvciwgVWludDE2VmVjdG9yLCBVaW50MzJWZWN0b3IsIFVpbnQ2NFZlY3RvciB9IGZyb20gJy4vaW50JztcbmV4cG9ydCB7IExpc3RWZWN0b3IgfSBmcm9tICcuL2xpc3QnO1xuZXhwb3J0IHsgTWFwVmVjdG9yIH0gZnJvbSAnLi9tYXAnO1xuZXhwb3J0IHsgTnVsbFZlY3RvciB9IGZyb20gJy4vbnVsbCc7XG5leHBvcnQgeyBTdHJ1Y3RWZWN0b3IgfSBmcm9tICcuL3N0cnVjdCc7XG5leHBvcnQgeyBUaW1lc3RhbXBWZWN0b3IsIFRpbWVzdGFtcFNlY29uZFZlY3RvciwgVGltZXN0YW1wTWlsbGlzZWNvbmRWZWN0b3IsIFRpbWVzdGFtcE1pY3Jvc2Vjb25kVmVjdG9yLCBUaW1lc3RhbXBOYW5vc2Vjb25kVmVjdG9yIH0gZnJvbSAnLi90aW1lc3RhbXAnO1xuZXhwb3J0IHsgVGltZVZlY3RvciwgVGltZVNlY29uZFZlY3RvciwgVGltZU1pbGxpc2Vjb25kVmVjdG9yLCBUaW1lTWljcm9zZWNvbmRWZWN0b3IsIFRpbWVOYW5vc2Vjb25kVmVjdG9yIH0gZnJvbSAnLi90aW1lJztcbmV4cG9ydCB7IFVuaW9uVmVjdG9yLCBEZW5zZVVuaW9uVmVjdG9yLCBTcGFyc2VVbmlvblZlY3RvciB9IGZyb20gJy4vdW5pb24nO1xuZXhwb3J0IHsgVXRmOFZlY3RvciB9IGZyb20gJy4vdXRmOCc7XG5cbmltcG9ydCB7IERhdGEgfSBmcm9tICcuLi9kYXRhJztcbmltcG9ydCB7IFR5cGUgfSBmcm9tICcuLi9lbnVtJztcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gJy4uL3ZlY3Rvcic7XG5pbXBvcnQgeyBEYXRhVHlwZSB9IGZyb20gJy4uL3R5cGUnO1xuaW1wb3J0IHsgQmFzZVZlY3RvciB9IGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgeyBzZXRCb29sIH0gZnJvbSAnLi4vdXRpbC9iaXQnO1xuaW1wb3J0IHsgVmVjdG9yIGFzIFYsIFZlY3RvckN0b3JBcmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBpbnN0YW5jZSBhcyBnZXRWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci9nZXQnO1xuaW1wb3J0IHsgaW5zdGFuY2UgYXMgc2V0VmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3Ivc2V0JztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGluZGV4T2ZWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci9pbmRleG9mJztcbmltcG9ydCB7IGluc3RhbmNlIGFzIHRvQXJyYXlWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci90b2FycmF5JztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGl0ZXJhdG9yVmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3IvaXRlcmF0b3InO1xuaW1wb3J0IHsgaW5zdGFuY2UgYXMgYnl0ZVdpZHRoVmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3IvYnl0ZXdpZHRoJztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGdldFZlY3RvckNvbnN0cnVjdG9yIH0gZnJvbSAnLi4vdmlzaXRvci92ZWN0b3JjdG9yJztcblxuZGVjbGFyZSBtb2R1bGUgJy4uL3ZlY3Rvcicge1xuICAgIG5hbWVzcGFjZSBWZWN0b3Ige1xuICAgICAgICBleHBvcnQgeyBuZXdWZWN0b3IgYXMgbmV3IH07XG4gICAgfVxufVxuXG5kZWNsYXJlIG1vZHVsZSAnLi9iYXNlJyB7XG4gICAgaW50ZXJmYWNlIEJhc2VWZWN0b3I8VCBleHRlbmRzIERhdGFUeXBlPiB7XG4gICAgICAgIGdldChpbmRleDogbnVtYmVyKTogVFsnVFZhbHVlJ10gfCBudWxsO1xuICAgICAgICBzZXQoaW5kZXg6IG51bWJlciwgdmFsdWU6IFRbJ1RWYWx1ZSddIHwgbnVsbCk6IHZvaWQ7XG4gICAgICAgIGluZGV4T2YodmFsdWU6IFRbJ1RWYWx1ZSddIHwgbnVsbCwgZnJvbUluZGV4PzogbnVtYmVyKTogbnVtYmVyO1xuICAgICAgICB0b0FycmF5KCk6IFRbJ1RBcnJheSddO1xuICAgICAgICBnZXRCeXRlV2lkdGgoKTogbnVtYmVyO1xuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFRbJ1RWYWx1ZSddIHwgbnVsbD47XG4gICAgfVxufVxuXG4vKiogQG5vY29sbGFwc2UgKi9cblZlY3Rvci5uZXcgPSBuZXdWZWN0b3I7XG5cbmZ1bmN0aW9uIG5ld1ZlY3RvcjxUIGV4dGVuZHMgRGF0YVR5cGU+KGRhdGE6IERhdGE8VD4sIC4uLmFyZ3M6IFZlY3RvckN0b3JBcmdzPFY8VD4+KTogVjxUPiB7XG4gICAgcmV0dXJuIG5ldyAoZ2V0VmVjdG9yQ29uc3RydWN0b3IuZ2V0VmlzaXRGbihkYXRhLnR5cGUpKCkpKGRhdGEsIC4uLmFyZ3MpIGFzIFY8VD47XG59XG5cbi8vXG4vLyBXZSBwcm92aWRlIHRoZSBmb2xsb3dpbmcgbWV0aG9kIGltcGxlbWVudGF0aW9ucyBmb3IgY29kZSBuYXZpZ2FiaWxpdHkgcHVycG9zZXMgb25seS5cbi8vIFRoZXkncmUgb3ZlcnJpZGRlbiBhdCBydW50aW1lIGJlbG93IHdpdGggdGhlIHNwZWNpZmljIFZpc2l0b3IgaW1wbGVtZW50YXRpb24gZm9yIGVhY2ggdHlwZSxcbi8vIHNob3J0LWNpcmN1aXRpbmcgdGhlIHVzdWFsIFZpc2l0b3IgdHJhdmVyc2FsIGFuZCByZWR1Y2luZyBpbnRlcm1lZGlhdGUgbG9va3VwcyBhbmQgY2FsbHMuXG4vLyBUaGlzIGNvbW1lbnQgaXMgaGVyZSB0byByZW1pbmQgeW91IHRvIG5vdCBzZXQgYnJlYWtwb2ludHMgaW4gdGhlc2UgZnVuY3Rpb24gYm9kaWVzLCBvciB0byBpbmZvcm1cbi8vIHlvdSB3aHkgdGhlIGJyZWFrcG9pbnRzIHlvdSBoYXZlIGFscmVhZHkgc2V0IGFyZSBub3QgYmVpbmcgdHJpZ2dlcmVkLiBIYXZlIGEgZ3JlYXQgZGF5IVxuLy9cblxuQmFzZVZlY3Rvci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gYmFzZVZlY3RvckdldDxUIGV4dGVuZHMgRGF0YVR5cGU+KHRoaXM6IEJhc2VWZWN0b3I8VD4sIGluZGV4OiBudW1iZXIpOiBUWydUVmFsdWUnXSB8IG51bGwge1xuICAgIHJldHVybiBnZXRWaXNpdG9yLnZpc2l0KHRoaXMsIGluZGV4KTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIGJhc2VWZWN0b3JTZXQ8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+LCBpbmRleDogbnVtYmVyLCB2YWx1ZTogVFsnVFZhbHVlJ10gfCBudWxsKTogdm9pZCB7XG4gICAgcmV0dXJuIHNldFZpc2l0b3IudmlzaXQodGhpcywgaW5kZXgsIHZhbHVlKTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBiYXNlVmVjdG9ySW5kZXhPZjxUIGV4dGVuZHMgRGF0YVR5cGU+KHRoaXM6IEJhc2VWZWN0b3I8VD4sIHZhbHVlOiBUWydUVmFsdWUnXSB8IG51bGwsIGZyb21JbmRleD86IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGluZGV4T2ZWaXNpdG9yLnZpc2l0KHRoaXMsIHZhbHVlLCBmcm9tSW5kZXgpO1xufTtcblxuQmFzZVZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIGJhc2VWZWN0b3JUb0FycmF5PFQgZXh0ZW5kcyBEYXRhVHlwZT4odGhpczogQmFzZVZlY3RvcjxUPik6IFRbJ1RBcnJheSddIHtcbiAgICByZXR1cm4gdG9BcnJheVZpc2l0b3IudmlzaXQodGhpcyk7XG59O1xuXG5CYXNlVmVjdG9yLnByb3RvdHlwZS5nZXRCeXRlV2lkdGggPSBmdW5jdGlvbiBiYXNlVmVjdG9yR2V0Qnl0ZVdpZHRoPFQgZXh0ZW5kcyBEYXRhVHlwZT4odGhpczogQmFzZVZlY3RvcjxUPik6IG51bWJlciB7XG4gICAgcmV0dXJuIGJ5dGVXaWR0aFZpc2l0b3IudmlzaXQodGhpcy50eXBlKTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiBiYXNlVmVjdG9yU3ltYm9sSXRlcmF0b3I8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+KTogSXRlcmFibGVJdGVyYXRvcjxUWydUVmFsdWUnXSB8IG51bGw+IHtcbiAgICByZXR1cm4gaXRlcmF0b3JWaXNpdG9yLnZpc2l0KHRoaXMpO1xufTtcblxuKEJhc2VWZWN0b3IucHJvdG90eXBlIGFzIGFueSkuX2JpbmREYXRhQWNjZXNzb3JzID0gYmluZEJhc2VWZWN0b3JEYXRhQWNjZXNzb3JzO1xuXG4vLyBQZXJmOiBiaW5kIGFuZCBhc3NpZ24gdGhlIG9wZXJhdG9yIFZpc2l0b3IgbWV0aG9kcyB0byBlYWNoIG9mIHRoZSBWZWN0b3Igc3ViY2xhc3NlcyBmb3IgZWFjaCBUeXBlXG4oT2JqZWN0LmtleXMoVHlwZSkgYXMgYW55W10pXG4gICAgLmZpbHRlcigodHlwZUlkKSA9PiB0eXBlSWQgIT09IFR5cGUuTk9ORSAmJiB0eXBlSWQgIT09IFR5cGVbVHlwZS5OT05FXSlcbiAgICAubWFwKChUOiBhbnkpID0+IFR5cGVbVF0gYXMgYW55KS5maWx0ZXIoKFQ6IGFueSk6IFQgaXMgVHlwZSA9PiB0eXBlb2YgVCA9PT0gJ251bWJlcicpXG4gICAgLmZvckVhY2goKHR5cGVJZCkgPT4ge1xuICAgICAgICBsZXQgdHlwZUlkczogVHlwZVtdO1xuICAgICAgICBzd2l0Y2ggKHR5cGVJZCkge1xuICAgICAgICAgICAgY2FzZSBUeXBlLkludDogICAgICAgdHlwZUlkcyA9IFtUeXBlLkludDgsIFR5cGUuSW50MTYsIFR5cGUuSW50MzIsIFR5cGUuSW50NjQsIFR5cGUuVWludDgsIFR5cGUuVWludDE2LCBUeXBlLlVpbnQzMiwgVHlwZS5VaW50NjRdOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZS5GbG9hdDogICAgIHR5cGVJZHMgPSBbVHlwZS5GbG9hdDE2LCBUeXBlLkZsb2F0MzIsIFR5cGUuRmxvYXQ2NF07IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUeXBlLkRhdGU6ICAgICAgdHlwZUlkcyA9IFtUeXBlLkRhdGVEYXksIFR5cGUuRGF0ZU1pbGxpc2Vjb25kXTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFR5cGUuVGltZTogICAgICB0eXBlSWRzID0gW1R5cGUuVGltZVNlY29uZCwgVHlwZS5UaW1lTWlsbGlzZWNvbmQsIFR5cGUuVGltZU1pY3Jvc2Vjb25kLCBUeXBlLlRpbWVOYW5vc2Vjb25kXTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wOiB0eXBlSWRzID0gW1R5cGUuVGltZXN0YW1wU2Vjb25kLCBUeXBlLlRpbWVzdGFtcE1pbGxpc2Vjb25kLCBUeXBlLlRpbWVzdGFtcE1pY3Jvc2Vjb25kLCBUeXBlLlRpbWVzdGFtcE5hbm9zZWNvbmRdOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbDogIHR5cGVJZHMgPSBbVHlwZS5JbnRlcnZhbERheVRpbWUsIFR5cGUuSW50ZXJ2YWxZZWFyTW9udGhdOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZS5VbmlvbjogICAgIHR5cGVJZHMgPSBbVHlwZS5EZW5zZVVuaW9uLCBUeXBlLlNwYXJzZVVuaW9uXTsgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICB0eXBlSWRzID0gW3R5cGVJZF07IGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHR5cGVJZHMuZm9yRWFjaCgodHlwZUlkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBWZWN0b3JDdG9yID0gZ2V0VmVjdG9yQ29uc3RydWN0b3IudmlzaXQodHlwZUlkKTtcbiAgICAgICAgICAgIFZlY3RvckN0b3IucHJvdG90eXBlWydnZXQnXSA9IHBhcnRpYWwxKGdldFZpc2l0b3IuZ2V0VmlzaXRGbih0eXBlSWQpKTtcbiAgICAgICAgICAgIFZlY3RvckN0b3IucHJvdG90eXBlWydzZXQnXSA9IHBhcnRpYWwyKHNldFZpc2l0b3IuZ2V0VmlzaXRGbih0eXBlSWQpKTtcbiAgICAgICAgICAgIFZlY3RvckN0b3IucHJvdG90eXBlWydpbmRleE9mJ10gPSBwYXJ0aWFsMihpbmRleE9mVmlzaXRvci5nZXRWaXNpdEZuKHR5cGVJZCkpO1xuICAgICAgICAgICAgVmVjdG9yQ3Rvci5wcm90b3R5cGVbJ3RvQXJyYXknXSA9IHBhcnRpYWwwKHRvQXJyYXlWaXNpdG9yLmdldFZpc2l0Rm4odHlwZUlkKSk7XG4gICAgICAgICAgICBWZWN0b3JDdG9yLnByb3RvdHlwZVsnZ2V0Qnl0ZVdpZHRoJ10gPSBwYXJ0aWFsMChieXRlV2lkdGhWaXNpdG9yLmdldFZpc2l0Rm4odHlwZUlkKSk7XG4gICAgICAgICAgICBWZWN0b3JDdG9yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gcGFydGlhbDAoaXRlcmF0b3JWaXNpdG9yLmdldFZpc2l0Rm4odHlwZUlkKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG5mdW5jdGlvbiBwYXJ0aWFsMDxUPih2aXNpdDogKG5vZGU6IFQpID0+IGFueSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0aGlzOiBUKSB7IHJldHVybiB2aXNpdCh0aGlzKTsgfTtcbn1cblxuZnVuY3Rpb24gcGFydGlhbDE8VD4odmlzaXQ6IChub2RlOiBULCBhOiBhbnkpID0+IGFueSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0aGlzOiBULCBhOiBhbnkpIHsgcmV0dXJuIHZpc2l0KHRoaXMsIGEpOyB9O1xufVxuXG5mdW5jdGlvbiBwYXJ0aWFsMjxUPih2aXNpdDogKG5vZGU6IFQsIGE6IGFueSwgYjogYW55KSA9PiBhbnkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGhpczogVCwgYTogYW55LCBiOiBhbnkpIHsgcmV0dXJuIHZpc2l0KHRoaXMsIGEsIGIpOyB9O1xufVxuXG5mdW5jdGlvbiB3cmFwTnVsbGFibGUxPFQgZXh0ZW5kcyBEYXRhVHlwZSwgViBleHRlbmRzIFZlY3RvcjxUPiwgRiBleHRlbmRzIChpOiBudW1iZXIpID0+IGFueT4oZm46IEYpOiAoLi4uYXJnczogUGFyYW1ldGVyczxGPikgPT4gUmV0dXJuVHlwZTxGPiB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRoaXM6IFYsIGk6IG51bWJlcikgeyByZXR1cm4gdGhpcy5pc1ZhbGlkKGkpID8gZm4uY2FsbCh0aGlzLCBpKSA6IG51bGw7IH07XG59XG5cbmZ1bmN0aW9uIHdyYXBOdWxsYWJsZVNldDxUIGV4dGVuZHMgRGF0YVR5cGUsIFYgZXh0ZW5kcyBCYXNlVmVjdG9yPFQ+LCBGIGV4dGVuZHMgKGk6IG51bWJlciwgYTogYW55KSA9PiB2b2lkPihmbjogRik6ICguLi5hcmdzOiBQYXJhbWV0ZXJzPEY+KSA9PiB2b2lkIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGhpczogViwgaTogbnVtYmVyLCBhOiBhbnkpIHtcbiAgICAgICAgaWYgKHNldEJvb2wodGhpcy5udWxsQml0bWFwLCB0aGlzLm9mZnNldCArIGksIGEgIT0gbnVsbCkpIHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgaSwgYSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBAdHMtaWdub3JlXG5mdW5jdGlvbiBiaW5kQmFzZVZlY3RvckRhdGFBY2Nlc3NvcnM8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+LCBkYXRhOiBEYXRhPFQ+KSB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMudHlwZTtcbiAgICB0aGlzWydnZXQnXSA9IGdldFZpc2l0b3IuZ2V0VmlzaXRGbih0eXBlKS5iaW5kKHRoaXMsIDxhbnk+IHRoaXMgYXMgVjxUPik7XG4gICAgdGhpc1snc2V0J10gPSBzZXRWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbJ2luZGV4T2YnXSA9IGluZGV4T2ZWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbJ3RvQXJyYXknXSA9IHRvQXJyYXlWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbU3ltYm9sLml0ZXJhdG9yXSA9IGl0ZXJhdG9yVmlzaXRvci5nZXRWaXNpdEZuKHR5cGUpLmJpbmQodGhpcywgPGFueT4gdGhpcyBhcyBWPFQ+KTtcbiAgICBpZiAodGhpcy5udWxsQ291bnQgPiAwKSB7XG4gICAgICAgIHRoaXNbJ2dldCddID0gd3JhcE51bGxhYmxlMSh0aGlzWydnZXQnXSk7XG4gICAgICAgIHRoaXNbJ3NldCddID0gd3JhcE51bGxhYmxlU2V0KHRoaXNbJ3NldCddKTtcbiAgICB9XG59XG4iXX0=
