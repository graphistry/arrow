// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
export { Row } from './all';
export { Vector } from './all';
export { BaseVector } from './all';
export { BinaryVector } from './all';
export { BoolVector } from './all';
export { ChunkedVector } from './all';
export { DateVector, DateDayVector, DateMillisecondVector } from './all';
export { DecimalVector } from './all';
export { DictionaryVector } from './all';
export { FixedSizeBinaryVector } from './all';
export { FixedSizeListVector } from './all';
export { FloatVector, Float16Vector, Float32Vector, Float64Vector } from './all';
export { IntervalVector, IntervalDayTimeVector, IntervalYearMonthVector } from './all';
export { IntVector, Int8Vector, Int16Vector, Int32Vector, Int64Vector, Uint8Vector, Uint16Vector, Uint32Vector, Uint64Vector } from './all';
export { ListVector } from './all';
export { MapVector } from './all';
export { NullVector } from './all';
export { StructVector } from './all';
export { TimestampVector, TimestampSecondVector, TimestampMillisecondVector, TimestampMicrosecondVector, TimestampNanosecondVector } from './all';
export { TimeVector, TimeSecondVector, TimeMillisecondVector, TimeMicrosecondVector, TimeNanosecondVector } from './all';
export { UnionVector, DenseUnionVector, SparseUnionVector } from './all';
export { Utf8Vector } from './all';
import { Type } from '../enum';
import { Vector } from '../vector';
import { BaseVector } from './base';
import { setBool } from '../util/bit';
import { instance as getVisitor } from '../visitor/get';
import { instance as setVisitor } from '../visitor/set';
import { instance as indexOfVisitor } from '../visitor/indexof';
import { instance as toArrayVisitor } from '../visitor/toarray';
import { instance as iteratorVisitor } from '../visitor/iterator';
import { instance as byteWidthVisitor } from '../visitor/bytewidth';
import { instance as getVectorConstructor } from '../visitor/vectorctor';
/** @nocollapse */
Vector.new = newVector;
function newVector(data, ...args) {
    return new (getVectorConstructor.getVisitFn(data.type)())(data, ...args);
}
//
// We provide the following method implementations for code navigability purposes only.
// They're overridden at runtime below with the specific Visitor implementation for each type,
// short-circuiting the usual Visitor traversal and reducing intermediate lookups and calls.
// This comment is here to remind you to not set breakpoints in these function bodies, or to inform
// you why the breakpoints you have already set are not being triggered. Have a great day!
//
BaseVector.prototype.get = function baseVectorGet(index) {
    return getVisitor.visit(this, index);
};
BaseVector.prototype.set = function baseVectorSet(index, value) {
    return setVisitor.visit(this, index, value);
};
BaseVector.prototype.indexOf = function baseVectorIndexOf(value, fromIndex) {
    return indexOfVisitor.visit(this, value, fromIndex);
};
BaseVector.prototype.toArray = function baseVectorToArray() {
    return toArrayVisitor.visit(this);
};
BaseVector.prototype.getByteWidth = function baseVectorGetByteWidth() {
    return byteWidthVisitor.visit(this.type);
};
BaseVector.prototype[Symbol.iterator] = function baseVectorSymbolIterator() {
    return iteratorVisitor.visit(this);
};
BaseVector.prototype._bindDataAccessors = bindBaseVectorDataAccessors;
// Perf: bind and assign the operator Visitor methods to each of the Vector subclasses for each Type
Object.keys(Type)
    .filter((typeId) => typeId !== Type.NONE && typeId !== Type[Type.NONE])
    .map((T) => Type[T]).filter((T) => typeof T === 'number')
    .forEach((typeId) => {
    let typeIds;
    switch (typeId) {
        case Type.Int:
            typeIds = [Type.Int8, Type.Int16, Type.Int32, Type.Int64, Type.Uint8, Type.Uint16, Type.Uint32, Type.Uint64];
            break;
        case Type.Float:
            typeIds = [Type.Float16, Type.Float32, Type.Float64];
            break;
        case Type.Date:
            typeIds = [Type.DateDay, Type.DateMillisecond];
            break;
        case Type.Time:
            typeIds = [Type.TimeSecond, Type.TimeMillisecond, Type.TimeMicrosecond, Type.TimeNanosecond];
            break;
        case Type.Timestamp:
            typeIds = [Type.TimestampSecond, Type.TimestampMillisecond, Type.TimestampMicrosecond, Type.TimestampNanosecond];
            break;
        case Type.Interval:
            typeIds = [Type.IntervalDayTime, Type.IntervalYearMonth];
            break;
        case Type.Union:
            typeIds = [Type.DenseUnion, Type.SparseUnion];
            break;
        default:
            typeIds = [typeId];
            break;
    }
    typeIds.forEach((typeId) => {
        const VectorCtor = getVectorConstructor.visit(typeId);
        VectorCtor.prototype['get'] = partial1(getVisitor.getVisitFn(typeId));
        VectorCtor.prototype['set'] = partial2(setVisitor.getVisitFn(typeId));
        VectorCtor.prototype['indexOf'] = partial2(indexOfVisitor.getVisitFn(typeId));
        VectorCtor.prototype['toArray'] = partial0(toArrayVisitor.getVisitFn(typeId));
        VectorCtor.prototype['getByteWidth'] = partial0(byteWidthVisitor.getVisitFn(typeId));
        VectorCtor.prototype[Symbol.iterator] = partial0(iteratorVisitor.getVisitFn(typeId));
    });
});
function partial0(visit) {
    return function () { return visit(this); };
}
function partial1(visit) {
    return function (a) { return visit(this, a); };
}
function partial2(visit) {
    return function (a, b) { return visit(this, a, b); };
}
function wrapNullable1(fn) {
    return function (i) { return this.isValid(i) ? fn.call(this, i) : null; };
}
function wrapNullableSet(fn) {
    return function (i, a) {
        if (setBool(this.nullBitmap, this.offset + i, a != null)) {
            fn.call(this, i, a);
        }
    };
}
// @ts-ignore
function bindBaseVectorDataAccessors(data) {
    const type = this.type;
    this['get'] = getVisitor.getVisitFn(type).bind(this, this);
    this['set'] = setVisitor.getVisitFn(type).bind(this, this);
    this['indexOf'] = indexOfVisitor.getVisitFn(type).bind(this, this);
    this['toArray'] = toArrayVisitor.getVisitFn(type).bind(this, this);
    this[Symbol.iterator] = iteratorVisitor.getVisitFn(type).bind(this, this);
    if (this.nullCount > 0) {
        this['get'] = wrapNullable1(this['get']);
        this['set'] = wrapNullableSet(this['set']);
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,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YyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFRLElBQVksQ0FBQyxDQUFDO0lBQ2pGLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxjQUFjLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQVEsSUFBWSxDQUFDLENBQUM7SUFDakYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxlQUFlLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQVEsSUFBWSxDQUFDLENBQUM7SUFDeEYsSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsRUFBRTtRQUNwQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7S0FDOUM7QUFDTCxDQUFDIiwiZmlsZSI6InZlY3Rvci9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbi8vIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuLy8gZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbi8vIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbi8vIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbi8vIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuLy8gd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuLy8gc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbi8vIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4vLyBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbi8vIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbi8vIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG5leHBvcnQgeyBSb3cgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBCYXNlVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgQmluYXJ5VmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgQm9vbFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IENodW5rZWRWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBEYXRlVmVjdG9yLCBEYXRlRGF5VmVjdG9yLCBEYXRlTWlsbGlzZWNvbmRWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBEZWNpbWFsVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgRGljdGlvbmFyeVZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IEZpeGVkU2l6ZUJpbmFyeVZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IEZpeGVkU2l6ZUxpc3RWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBGbG9hdFZlY3RvciwgRmxvYXQxNlZlY3RvciwgRmxvYXQzMlZlY3RvciwgRmxvYXQ2NFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IEludGVydmFsVmVjdG9yLCBJbnRlcnZhbERheVRpbWVWZWN0b3IsIEludGVydmFsWWVhck1vbnRoVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgSW50VmVjdG9yLCBJbnQ4VmVjdG9yLCBJbnQxNlZlY3RvciwgSW50MzJWZWN0b3IsIEludDY0VmVjdG9yLCBVaW50OFZlY3RvciwgVWludDE2VmVjdG9yLCBVaW50MzJWZWN0b3IsIFVpbnQ2NFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IExpc3RWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBNYXBWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5leHBvcnQgeyBOdWxsVmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgU3RydWN0VmVjdG9yIH0gZnJvbSAnLi9hbGwnO1xuZXhwb3J0IHsgVGltZXN0YW1wVmVjdG9yLCBUaW1lc3RhbXBTZWNvbmRWZWN0b3IsIFRpbWVzdGFtcE1pbGxpc2Vjb25kVmVjdG9yLCBUaW1lc3RhbXBNaWNyb3NlY29uZFZlY3RvciwgVGltZXN0YW1wTmFub3NlY29uZFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IFRpbWVWZWN0b3IsIFRpbWVTZWNvbmRWZWN0b3IsIFRpbWVNaWxsaXNlY29uZFZlY3RvciwgVGltZU1pY3Jvc2Vjb25kVmVjdG9yLCBUaW1lTmFub3NlY29uZFZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IFVuaW9uVmVjdG9yLCBEZW5zZVVuaW9uVmVjdG9yLCBTcGFyc2VVbmlvblZlY3RvciB9IGZyb20gJy4vYWxsJztcbmV4cG9ydCB7IFV0ZjhWZWN0b3IgfSBmcm9tICcuL2FsbCc7XG5cbmltcG9ydCB7IERhdGEgfSBmcm9tICcuLi9kYXRhJztcbmltcG9ydCB7IFR5cGUgfSBmcm9tICcuLi9lbnVtJztcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gJy4uL3ZlY3Rvcic7XG5pbXBvcnQgeyBEYXRhVHlwZSB9IGZyb20gJy4uL3R5cGUnO1xuaW1wb3J0IHsgQmFzZVZlY3RvciB9IGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgeyBzZXRCb29sIH0gZnJvbSAnLi4vdXRpbC9iaXQnO1xuaW1wb3J0IHsgVmVjdG9yIGFzIFYsIFZlY3RvckN0b3JBcmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBpbnN0YW5jZSBhcyBnZXRWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci9nZXQnO1xuaW1wb3J0IHsgaW5zdGFuY2UgYXMgc2V0VmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3Ivc2V0JztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGluZGV4T2ZWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci9pbmRleG9mJztcbmltcG9ydCB7IGluc3RhbmNlIGFzIHRvQXJyYXlWaXNpdG9yIH0gZnJvbSAnLi4vdmlzaXRvci90b2FycmF5JztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGl0ZXJhdG9yVmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3IvaXRlcmF0b3InO1xuaW1wb3J0IHsgaW5zdGFuY2UgYXMgYnl0ZVdpZHRoVmlzaXRvciB9IGZyb20gJy4uL3Zpc2l0b3IvYnl0ZXdpZHRoJztcbmltcG9ydCB7IGluc3RhbmNlIGFzIGdldFZlY3RvckNvbnN0cnVjdG9yIH0gZnJvbSAnLi4vdmlzaXRvci92ZWN0b3JjdG9yJztcblxuZGVjbGFyZSBtb2R1bGUgJy4uL3ZlY3Rvcicge1xuICAgIG5hbWVzcGFjZSBWZWN0b3Ige1xuICAgICAgICBleHBvcnQgeyBuZXdWZWN0b3IgYXMgbmV3IH07XG4gICAgfVxufVxuXG5kZWNsYXJlIG1vZHVsZSAnLi9iYXNlJyB7XG4gICAgaW50ZXJmYWNlIEJhc2VWZWN0b3I8VCBleHRlbmRzIERhdGFUeXBlPiB7XG4gICAgICAgIGdldChpbmRleDogbnVtYmVyKTogVFsnVFZhbHVlJ10gfCBudWxsO1xuICAgICAgICBzZXQoaW5kZXg6IG51bWJlciwgdmFsdWU6IFRbJ1RWYWx1ZSddIHwgbnVsbCk6IHZvaWQ7XG4gICAgICAgIGluZGV4T2YodmFsdWU6IFRbJ1RWYWx1ZSddIHwgbnVsbCwgZnJvbUluZGV4PzogbnVtYmVyKTogbnVtYmVyO1xuICAgICAgICB0b0FycmF5KCk6IFRbJ1RBcnJheSddO1xuICAgICAgICBnZXRCeXRlV2lkdGgoKTogbnVtYmVyO1xuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFRbJ1RWYWx1ZSddIHwgbnVsbD47XG4gICAgfVxufVxuXG4vKiogQG5vY29sbGFwc2UgKi9cblZlY3Rvci5uZXcgPSBuZXdWZWN0b3I7XG5cbmZ1bmN0aW9uIG5ld1ZlY3RvcjxUIGV4dGVuZHMgRGF0YVR5cGU+KGRhdGE6IERhdGE8VD4sIC4uLmFyZ3M6IFZlY3RvckN0b3JBcmdzPFY8VD4+KTogVjxUPiB7XG4gICAgcmV0dXJuIG5ldyAoZ2V0VmVjdG9yQ29uc3RydWN0b3IuZ2V0VmlzaXRGbihkYXRhLnR5cGUpKCkpKGRhdGEsIC4uLmFyZ3MpIGFzIFY8VD47XG59XG5cbi8vXG4vLyBXZSBwcm92aWRlIHRoZSBmb2xsb3dpbmcgbWV0aG9kIGltcGxlbWVudGF0aW9ucyBmb3IgY29kZSBuYXZpZ2FiaWxpdHkgcHVycG9zZXMgb25seS5cbi8vIFRoZXkncmUgb3ZlcnJpZGRlbiBhdCBydW50aW1lIGJlbG93IHdpdGggdGhlIHNwZWNpZmljIFZpc2l0b3IgaW1wbGVtZW50YXRpb24gZm9yIGVhY2ggdHlwZSxcbi8vIHNob3J0LWNpcmN1aXRpbmcgdGhlIHVzdWFsIFZpc2l0b3IgdHJhdmVyc2FsIGFuZCByZWR1Y2luZyBpbnRlcm1lZGlhdGUgbG9va3VwcyBhbmQgY2FsbHMuXG4vLyBUaGlzIGNvbW1lbnQgaXMgaGVyZSB0byByZW1pbmQgeW91IHRvIG5vdCBzZXQgYnJlYWtwb2ludHMgaW4gdGhlc2UgZnVuY3Rpb24gYm9kaWVzLCBvciB0byBpbmZvcm1cbi8vIHlvdSB3aHkgdGhlIGJyZWFrcG9pbnRzIHlvdSBoYXZlIGFscmVhZHkgc2V0IGFyZSBub3QgYmVpbmcgdHJpZ2dlcmVkLiBIYXZlIGEgZ3JlYXQgZGF5IVxuLy9cblxuQmFzZVZlY3Rvci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gYmFzZVZlY3RvckdldDxUIGV4dGVuZHMgRGF0YVR5cGU+KHRoaXM6IEJhc2VWZWN0b3I8VD4sIGluZGV4OiBudW1iZXIpOiBUWydUVmFsdWUnXSB8IG51bGwge1xuICAgIHJldHVybiBnZXRWaXNpdG9yLnZpc2l0KHRoaXMsIGluZGV4KTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIGJhc2VWZWN0b3JTZXQ8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+LCBpbmRleDogbnVtYmVyLCB2YWx1ZTogVFsnVFZhbHVlJ10gfCBudWxsKTogdm9pZCB7XG4gICAgcmV0dXJuIHNldFZpc2l0b3IudmlzaXQodGhpcywgaW5kZXgsIHZhbHVlKTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBiYXNlVmVjdG9ySW5kZXhPZjxUIGV4dGVuZHMgRGF0YVR5cGU+KHRoaXM6IEJhc2VWZWN0b3I8VD4sIHZhbHVlOiBUWydUVmFsdWUnXSB8IG51bGwsIGZyb21JbmRleD86IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIGluZGV4T2ZWaXNpdG9yLnZpc2l0KHRoaXMsIHZhbHVlLCBmcm9tSW5kZXgpO1xufTtcblxuQmFzZVZlY3Rvci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIGJhc2VWZWN0b3JUb0FycmF5PFQgZXh0ZW5kcyBEYXRhVHlwZT4odGhpczogQmFzZVZlY3RvcjxUPik6IFRbJ1RBcnJheSddIHtcbiAgICByZXR1cm4gdG9BcnJheVZpc2l0b3IudmlzaXQodGhpcyk7XG59O1xuXG5CYXNlVmVjdG9yLnByb3RvdHlwZS5nZXRCeXRlV2lkdGggPSBmdW5jdGlvbiBiYXNlVmVjdG9yR2V0Qnl0ZVdpZHRoPFQgZXh0ZW5kcyBEYXRhVHlwZT4odGhpczogQmFzZVZlY3RvcjxUPik6IG51bWJlciB7XG4gICAgcmV0dXJuIGJ5dGVXaWR0aFZpc2l0b3IudmlzaXQodGhpcy50eXBlKTtcbn07XG5cbkJhc2VWZWN0b3IucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiBiYXNlVmVjdG9yU3ltYm9sSXRlcmF0b3I8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+KTogSXRlcmFibGVJdGVyYXRvcjxUWydUVmFsdWUnXSB8IG51bGw+IHtcbiAgICByZXR1cm4gaXRlcmF0b3JWaXNpdG9yLnZpc2l0KHRoaXMpO1xufTtcblxuKEJhc2VWZWN0b3IucHJvdG90eXBlIGFzIGFueSkuX2JpbmREYXRhQWNjZXNzb3JzID0gYmluZEJhc2VWZWN0b3JEYXRhQWNjZXNzb3JzO1xuXG4vLyBQZXJmOiBiaW5kIGFuZCBhc3NpZ24gdGhlIG9wZXJhdG9yIFZpc2l0b3IgbWV0aG9kcyB0byBlYWNoIG9mIHRoZSBWZWN0b3Igc3ViY2xhc3NlcyBmb3IgZWFjaCBUeXBlXG4oT2JqZWN0LmtleXMoVHlwZSkgYXMgYW55W10pXG4gICAgLmZpbHRlcigodHlwZUlkKSA9PiB0eXBlSWQgIT09IFR5cGUuTk9ORSAmJiB0eXBlSWQgIT09IFR5cGVbVHlwZS5OT05FXSlcbiAgICAubWFwKChUOiBhbnkpID0+IFR5cGVbVF0gYXMgYW55KS5maWx0ZXIoKFQ6IGFueSk6IFQgaXMgVHlwZSA9PiB0eXBlb2YgVCA9PT0gJ251bWJlcicpXG4gICAgLmZvckVhY2goKHR5cGVJZCkgPT4ge1xuICAgICAgICBsZXQgdHlwZUlkczogVHlwZVtdO1xuICAgICAgICBzd2l0Y2ggKHR5cGVJZCkge1xuICAgICAgICAgICAgY2FzZSBUeXBlLkludDogICAgICAgdHlwZUlkcyA9IFtUeXBlLkludDgsIFR5cGUuSW50MTYsIFR5cGUuSW50MzIsIFR5cGUuSW50NjQsIFR5cGUuVWludDgsIFR5cGUuVWludDE2LCBUeXBlLlVpbnQzMiwgVHlwZS5VaW50NjRdOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZS5GbG9hdDogICAgIHR5cGVJZHMgPSBbVHlwZS5GbG9hdDE2LCBUeXBlLkZsb2F0MzIsIFR5cGUuRmxvYXQ2NF07IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBUeXBlLkRhdGU6ICAgICAgdHlwZUlkcyA9IFtUeXBlLkRhdGVEYXksIFR5cGUuRGF0ZU1pbGxpc2Vjb25kXTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFR5cGUuVGltZTogICAgICB0eXBlSWRzID0gW1R5cGUuVGltZVNlY29uZCwgVHlwZS5UaW1lTWlsbGlzZWNvbmQsIFR5cGUuVGltZU1pY3Jvc2Vjb25kLCBUeXBlLlRpbWVOYW5vc2Vjb25kXTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wOiB0eXBlSWRzID0gW1R5cGUuVGltZXN0YW1wU2Vjb25kLCBUeXBlLlRpbWVzdGFtcE1pbGxpc2Vjb25kLCBUeXBlLlRpbWVzdGFtcE1pY3Jvc2Vjb25kLCBUeXBlLlRpbWVzdGFtcE5hbm9zZWNvbmRdOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbDogIHR5cGVJZHMgPSBbVHlwZS5JbnRlcnZhbERheVRpbWUsIFR5cGUuSW50ZXJ2YWxZZWFyTW9udGhdOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVHlwZS5VbmlvbjogICAgIHR5cGVJZHMgPSBbVHlwZS5EZW5zZVVuaW9uLCBUeXBlLlNwYXJzZVVuaW9uXTsgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICB0eXBlSWRzID0gW3R5cGVJZF07IGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHR5cGVJZHMuZm9yRWFjaCgodHlwZUlkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBWZWN0b3JDdG9yID0gZ2V0VmVjdG9yQ29uc3RydWN0b3IudmlzaXQodHlwZUlkKTtcbiAgICAgICAgICAgIFZlY3RvckN0b3IucHJvdG90eXBlWydnZXQnXSA9IHBhcnRpYWwxKGdldFZpc2l0b3IuZ2V0VmlzaXRGbih0eXBlSWQpKTtcbiAgICAgICAgICAgIFZlY3RvckN0b3IucHJvdG90eXBlWydzZXQnXSA9IHBhcnRpYWwyKHNldFZpc2l0b3IuZ2V0VmlzaXRGbih0eXBlSWQpKTtcbiAgICAgICAgICAgIFZlY3RvckN0b3IucHJvdG90eXBlWydpbmRleE9mJ10gPSBwYXJ0aWFsMihpbmRleE9mVmlzaXRvci5nZXRWaXNpdEZuKHR5cGVJZCkpO1xuICAgICAgICAgICAgVmVjdG9yQ3Rvci5wcm90b3R5cGVbJ3RvQXJyYXknXSA9IHBhcnRpYWwwKHRvQXJyYXlWaXNpdG9yLmdldFZpc2l0Rm4odHlwZUlkKSk7XG4gICAgICAgICAgICBWZWN0b3JDdG9yLnByb3RvdHlwZVsnZ2V0Qnl0ZVdpZHRoJ10gPSBwYXJ0aWFsMChieXRlV2lkdGhWaXNpdG9yLmdldFZpc2l0Rm4odHlwZUlkKSk7XG4gICAgICAgICAgICBWZWN0b3JDdG9yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gcGFydGlhbDAoaXRlcmF0b3JWaXNpdG9yLmdldFZpc2l0Rm4odHlwZUlkKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG5mdW5jdGlvbiBwYXJ0aWFsMDxUPih2aXNpdDogKG5vZGU6IFQpID0+IGFueSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0aGlzOiBUKSB7IHJldHVybiB2aXNpdCh0aGlzKTsgfTtcbn1cblxuZnVuY3Rpb24gcGFydGlhbDE8VD4odmlzaXQ6IChub2RlOiBULCBhOiBhbnkpID0+IGFueSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0aGlzOiBULCBhOiBhbnkpIHsgcmV0dXJuIHZpc2l0KHRoaXMsIGEpOyB9O1xufVxuXG5mdW5jdGlvbiBwYXJ0aWFsMjxUPih2aXNpdDogKG5vZGU6IFQsIGE6IGFueSwgYjogYW55KSA9PiBhbnkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGhpczogVCwgYTogYW55LCBiOiBhbnkpIHsgcmV0dXJuIHZpc2l0KHRoaXMsIGEsIGIpOyB9O1xufVxuXG5mdW5jdGlvbiB3cmFwTnVsbGFibGUxPFQgZXh0ZW5kcyBEYXRhVHlwZSwgViBleHRlbmRzIFZlY3RvcjxUPiwgRiBleHRlbmRzIChpOiBudW1iZXIpID0+IGFueT4oZm46IEYpOiAoLi4uYXJnczogUGFyYW1ldGVyczxGPikgPT4gUmV0dXJuVHlwZTxGPiB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRoaXM6IFYsIGk6IG51bWJlcikgeyByZXR1cm4gdGhpcy5pc1ZhbGlkKGkpID8gZm4uY2FsbCh0aGlzLCBpKSA6IG51bGw7IH07XG59XG5cbmZ1bmN0aW9uIHdyYXBOdWxsYWJsZVNldDxUIGV4dGVuZHMgRGF0YVR5cGUsIFYgZXh0ZW5kcyBCYXNlVmVjdG9yPFQ+LCBGIGV4dGVuZHMgKGk6IG51bWJlciwgYTogYW55KSA9PiB2b2lkPihmbjogRik6ICguLi5hcmdzOiBQYXJhbWV0ZXJzPEY+KSA9PiB2b2lkIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odGhpczogViwgaTogbnVtYmVyLCBhOiBhbnkpIHtcbiAgICAgICAgaWYgKHNldEJvb2wodGhpcy5udWxsQml0bWFwLCB0aGlzLm9mZnNldCArIGksIGEgIT0gbnVsbCkpIHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgaSwgYSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBAdHMtaWdub3JlXG5mdW5jdGlvbiBiaW5kQmFzZVZlY3RvckRhdGFBY2Nlc3NvcnM8VCBleHRlbmRzIERhdGFUeXBlPih0aGlzOiBCYXNlVmVjdG9yPFQ+LCBkYXRhOiBEYXRhPFQ+KSB7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMudHlwZTtcbiAgICB0aGlzWydnZXQnXSA9IGdldFZpc2l0b3IuZ2V0VmlzaXRGbih0eXBlKS5iaW5kKHRoaXMsIDxhbnk+IHRoaXMgYXMgVjxUPik7XG4gICAgdGhpc1snc2V0J10gPSBzZXRWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbJ2luZGV4T2YnXSA9IGluZGV4T2ZWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbJ3RvQXJyYXknXSA9IHRvQXJyYXlWaXNpdG9yLmdldFZpc2l0Rm4odHlwZSkuYmluZCh0aGlzLCA8YW55PiB0aGlzIGFzIFY8VD4pO1xuICAgIHRoaXNbU3ltYm9sLml0ZXJhdG9yXSA9IGl0ZXJhdG9yVmlzaXRvci5nZXRWaXNpdEZuKHR5cGUpLmJpbmQodGhpcywgPGFueT4gdGhpcyBhcyBWPFQ+KTtcbiAgICBpZiAodGhpcy5udWxsQ291bnQgPiAwKSB7XG4gICAgICAgIHRoaXNbJ2dldCddID0gd3JhcE51bGxhYmxlMSh0aGlzWydnZXQnXSk7XG4gICAgICAgIHRoaXNbJ3NldCddID0gd3JhcE51bGxhYmxlU2V0KHRoaXNbJ3NldCddKTtcbiAgICB9XG59XG4iXX0=
