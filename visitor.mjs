// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
import { Data } from './data';
import { Vector } from './vector';
import { Type, Precision, DateUnit, TimeUnit, IntervalUnit, UnionMode } from './enum';
import { DataType, } from './type';
export class Visitor {
    visitMany(nodes, ...args) {
        return nodes.map((node, i) => this.visit(node, ...args.map((x) => x[i])));
    }
    visit(...args) {
        return this.getVisitFn(args[0], false).apply(this, args);
    }
    getVisitFn(node, throwIfNotFound = true) {
        return getVisitFn(this, node, throwIfNotFound);
    }
    visitNull(_node, ..._args) { return null; }
    visitBool(_node, ..._args) { return null; }
    visitInt(_node, ..._args) { return null; }
    visitFloat(_node, ..._args) { return null; }
    visitUtf8(_node, ..._args) { return null; }
    visitBinary(_node, ..._args) { return null; }
    visitFixedSizeBinary(_node, ..._args) { return null; }
    visitDate(_node, ..._args) { return null; }
    visitTimestamp(_node, ..._args) { return null; }
    visitTime(_node, ..._args) { return null; }
    visitDecimal(_node, ..._args) { return null; }
    visitList(_node, ..._args) { return null; }
    visitStruct(_node, ..._args) { return null; }
    visitUnion(_node, ..._args) { return null; }
    visitDictionary(_node, ..._args) { return null; }
    visitInterval(_node, ..._args) { return null; }
    visitFixedSizeList(_node, ..._args) { return null; }
    visitMap(_node, ..._args) { return null; }
}
/** @ignore */
function getVisitFn(visitor, node, throwIfNotFound = true) {
    let fn = null;
    let dtype = Type.NONE;
    // tslint:disable
    if (node instanceof Data) {
        dtype = inferDType(node.type);
    }
    else if (node instanceof Vector) {
        dtype = inferDType(node.type);
    }
    else if (node instanceof DataType) {
        dtype = inferDType(node);
    }
    else if (typeof (dtype = node) !== 'number') {
        dtype = Type[node];
    }
    switch (dtype) {
        case Type.Null:
            fn = visitor.visitNull;
            break;
        case Type.Bool:
            fn = visitor.visitBool;
            break;
        case Type.Int:
            fn = visitor.visitInt;
            break;
        case Type.Int8:
            fn = visitor.visitInt8 || visitor.visitInt;
            break;
        case Type.Int16:
            fn = visitor.visitInt16 || visitor.visitInt;
            break;
        case Type.Int32:
            fn = visitor.visitInt32 || visitor.visitInt;
            break;
        case Type.Int64:
            fn = visitor.visitInt64 || visitor.visitInt;
            break;
        case Type.Uint8:
            fn = visitor.visitUint8 || visitor.visitInt;
            break;
        case Type.Uint16:
            fn = visitor.visitUint16 || visitor.visitInt;
            break;
        case Type.Uint32:
            fn = visitor.visitUint32 || visitor.visitInt;
            break;
        case Type.Uint64:
            fn = visitor.visitUint64 || visitor.visitInt;
            break;
        case Type.Float:
            fn = visitor.visitFloat;
            break;
        case Type.Float16:
            fn = visitor.visitFloat16 || visitor.visitFloat;
            break;
        case Type.Float32:
            fn = visitor.visitFloat32 || visitor.visitFloat;
            break;
        case Type.Float64:
            fn = visitor.visitFloat64 || visitor.visitFloat;
            break;
        case Type.Utf8:
            fn = visitor.visitUtf8;
            break;
        case Type.Binary:
            fn = visitor.visitBinary;
            break;
        case Type.FixedSizeBinary:
            fn = visitor.visitFixedSizeBinary;
            break;
        case Type.Date:
            fn = visitor.visitDate;
            break;
        case Type.DateDay:
            fn = visitor.visitDateDay || visitor.visitDate;
            break;
        case Type.DateMillisecond:
            fn = visitor.visitDateMillisecond || visitor.visitDate;
            break;
        case Type.Timestamp:
            fn = visitor.visitTimestamp;
            break;
        case Type.TimestampSecond:
            fn = visitor.visitTimestampSecond || visitor.visitTimestamp;
            break;
        case Type.TimestampMillisecond:
            fn = visitor.visitTimestampMillisecond || visitor.visitTimestamp;
            break;
        case Type.TimestampMicrosecond:
            fn = visitor.visitTimestampMicrosecond || visitor.visitTimestamp;
            break;
        case Type.TimestampNanosecond:
            fn = visitor.visitTimestampNanosecond || visitor.visitTimestamp;
            break;
        case Type.Time:
            fn = visitor.visitTime;
            break;
        case Type.TimeSecond:
            fn = visitor.visitTimeSecond || visitor.visitTime;
            break;
        case Type.TimeMillisecond:
            fn = visitor.visitTimeMillisecond || visitor.visitTime;
            break;
        case Type.TimeMicrosecond:
            fn = visitor.visitTimeMicrosecond || visitor.visitTime;
            break;
        case Type.TimeNanosecond:
            fn = visitor.visitTimeNanosecond || visitor.visitTime;
            break;
        case Type.Decimal:
            fn = visitor.visitDecimal;
            break;
        case Type.List:
            fn = visitor.visitList;
            break;
        case Type.Struct:
            fn = visitor.visitStruct;
            break;
        case Type.Union:
            fn = visitor.visitUnion;
            break;
        case Type.DenseUnion:
            fn = visitor.visitDenseUnion || visitor.visitUnion;
            break;
        case Type.SparseUnion:
            fn = visitor.visitSparseUnion || visitor.visitUnion;
            break;
        case Type.Dictionary:
            fn = visitor.visitDictionary;
            break;
        case Type.Interval:
            fn = visitor.visitInterval;
            break;
        case Type.IntervalDayTime:
            fn = visitor.visitIntervalDayTime || visitor.visitInterval;
            break;
        case Type.IntervalYearMonth:
            fn = visitor.visitIntervalYearMonth || visitor.visitInterval;
            break;
        case Type.FixedSizeList:
            fn = visitor.visitFixedSizeList;
            break;
        case Type.Map:
            fn = visitor.visitMap;
            break;
    }
    if (typeof fn === 'function')
        return fn;
    if (!throwIfNotFound)
        return () => null;
    throw new Error(`Unrecognized type '${Type[dtype]}'`);
}
/** @ignore */
function inferDType(type) {
    switch (type.typeId) {
        case Type.Null: return Type.Null;
        case Type.Int:
            const { bitWidth, isSigned } = type;
            switch (bitWidth) {
                case 8: return isSigned ? Type.Int8 : Type.Uint8;
                case 16: return isSigned ? Type.Int16 : Type.Uint16;
                case 32: return isSigned ? Type.Int32 : Type.Uint32;
                case 64: return isSigned ? Type.Int64 : Type.Uint64;
            }
            return Type.Int;
        case Type.Float:
            switch (type.precision) {
                case Precision.HALF: return Type.Float16;
                case Precision.SINGLE: return Type.Float32;
                case Precision.DOUBLE: return Type.Float64;
            }
            return Type.Float;
        case Type.Binary: return Type.Binary;
        case Type.Utf8: return Type.Utf8;
        case Type.Bool: return Type.Bool;
        case Type.Decimal: return Type.Decimal;
        case Type.Time:
            switch (type.unit) {
                case TimeUnit.SECOND: return Type.TimeSecond;
                case TimeUnit.MILLISECOND: return Type.TimeMillisecond;
                case TimeUnit.MICROSECOND: return Type.TimeMicrosecond;
                case TimeUnit.NANOSECOND: return Type.TimeNanosecond;
            }
            return Type.Time;
        case Type.Timestamp:
            switch (type.unit) {
                case TimeUnit.SECOND: return Type.TimestampSecond;
                case TimeUnit.MILLISECOND: return Type.TimestampMillisecond;
                case TimeUnit.MICROSECOND: return Type.TimestampMicrosecond;
                case TimeUnit.NANOSECOND: return Type.TimestampNanosecond;
            }
            return Type.Timestamp;
        case Type.Date:
            switch (type.unit) {
                case DateUnit.DAY: return Type.DateDay;
                case DateUnit.MILLISECOND: return Type.DateMillisecond;
            }
            return Type.Date;
        case Type.Interval:
            switch (type.unit) {
                case IntervalUnit.DAY_TIME: return Type.IntervalDayTime;
                case IntervalUnit.YEAR_MONTH: return Type.IntervalYearMonth;
            }
            return Type.Interval;
        case Type.Map: return Type.Map;
        case Type.List: return Type.List;
        case Type.Struct: return Type.Struct;
        case Type.Union:
            switch (type.mode) {
                case UnionMode.Dense: return Type.DenseUnion;
                case UnionMode.Sparse: return Type.SparseUnion;
            }
            return Type.Union;
        case Type.FixedSizeBinary: return Type.FixedSizeBinary;
        case Type.FixedSizeList: return Type.FixedSizeList;
        case Type.Dictionary: return Type.Dictionary;
    }
    throw new Error(`Unrecognized type '${Type[type.typeId]}'`);
}
// Add these here so they're picked up by the externs creator
// in the build, and closure-compiler doesn't minify them away
Visitor.prototype.visitInt8 = null;
Visitor.prototype.visitInt16 = null;
Visitor.prototype.visitInt32 = null;
Visitor.prototype.visitInt64 = null;
Visitor.prototype.visitUint8 = null;
Visitor.prototype.visitUint16 = null;
Visitor.prototype.visitUint32 = null;
Visitor.prototype.visitUint64 = null;
Visitor.prototype.visitFloat16 = null;
Visitor.prototype.visitFloat32 = null;
Visitor.prototype.visitFloat64 = null;
Visitor.prototype.visitDateDay = null;
Visitor.prototype.visitDateMillisecond = null;
Visitor.prototype.visitTimestampSecond = null;
Visitor.prototype.visitTimestampMillisecond = null;
Visitor.prototype.visitTimestampMicrosecond = null;
Visitor.prototype.visitTimestampNanosecond = null;
Visitor.prototype.visitTimeSecond = null;
Visitor.prototype.visitTimeMillisecond = null;
Visitor.prototype.visitTimeMicrosecond = null;
Visitor.prototype.visitTimeNanosecond = null;
Visitor.prototype.visitDenseUnion = null;
Visitor.prototype.visitSparseUnion = null;
Visitor.prototype.visitIntervalDayTime = null;
Visitor.prototype.visitIntervalYearMonth = null;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFPLENBQUMsU0FBaUIsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQzlDLE9BQU8sQ0FBQyxTQUFpQixDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDOUMsT0FBTyxDQUFDLFNBQWlCLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztBQUM5QyxPQUFPLENBQUMsU0FBaUIsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQzlDLE9BQU8sQ0FBQyxTQUFpQixDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUN0RCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7QUFDdEQsT0FBTyxDQUFDLFNBQWlCLENBQUMseUJBQXlCLEdBQUcsSUFBSSxDQUFDO0FBQzNELE9BQU8sQ0FBQyxTQUFpQixDQUFDLHlCQUF5QixHQUFHLElBQUksQ0FBQztBQUMzRCxPQUFPLENBQUMsU0FBaUIsQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUM7QUFDMUQsT0FBTyxDQUFDLFNBQWlCLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztBQUNqRCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7QUFDdEQsT0FBTyxDQUFDLFNBQWlCLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0FBQ3RELE9BQU8sQ0FBQyxTQUFpQixDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUNyRCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQ2pELE9BQU8sQ0FBQyxTQUFpQixDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQztBQUNsRCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7QUFDdEQsT0FBTyxDQUFDLFNBQWlCLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDIiwiZmlsZSI6InZpc2l0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4vLyBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbi8vIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4vLyByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4vLyB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4vLyBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbi8vIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbi8vIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4vLyBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuLy8gS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4vLyBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4vLyB1bmRlciB0aGUgTGljZW5zZS5cblxuaW1wb3J0IHsgRGF0YSB9IGZyb20gJy4vZGF0YSc7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tICcuL3ZlY3Rvcic7XG5pbXBvcnQgeyBUeXBlLCBQcmVjaXNpb24sIERhdGVVbml0LCBUaW1lVW5pdCwgSW50ZXJ2YWxVbml0LCBVbmlvbk1vZGUgfSBmcm9tICcuL2VudW0nO1xuaW1wb3J0IHsgRGF0YVR5cGUsIEZsb2F0LCBJbnQsIERhdGVfLCBJbnRlcnZhbCwgVGltZSwgVGltZXN0YW1wLCBVbmlvbiwgfSBmcm9tICcuL3R5cGUnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmlzaXRvciB7XG4gICAgcHVibGljIHZpc2l0TWFueShub2RlczogYW55W10sIC4uLmFyZ3M6IGFueVtdW10pIHtcbiAgICAgICAgcmV0dXJuIG5vZGVzLm1hcCgobm9kZSwgaSkgPT4gdGhpcy52aXNpdChub2RlLCAuLi5hcmdzLm1hcCgoeCkgPT4geFtpXSkpKTtcbiAgICB9XG4gICAgcHVibGljIHZpc2l0KC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpc2l0Rm4oYXJnc1swXSwgZmFsc2UpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0VmlzaXRGbihub2RlOiBhbnksIHRocm93SWZOb3RGb3VuZCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGdldFZpc2l0Rm4odGhpcywgbm9kZSwgdGhyb3dJZk5vdEZvdW5kKTtcbiAgICB9XG4gICAgcHVibGljIHZpc2l0TnVsbCAgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdEJvb2wgICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRJbnQgICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0RmxvYXQgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdFV0ZjggICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRCaW5hcnkgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0Rml4ZWRTaXplQmluYXJ5IChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdERhdGUgICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRUaW1lc3RhbXAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0VGltZSAgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdERlY2ltYWwgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRMaXN0ICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0U3RydWN0ICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdFVuaW9uICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXREaWN0aW9uYXJ5ICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0SW50ZXJ2YWwgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdEZpeGVkU2l6ZUxpc3QgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRNYXAgICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG59XG5cbi8qKiBAaWdub3JlICovXG5mdW5jdGlvbiBnZXRWaXNpdEZuPFQgZXh0ZW5kcyBEYXRhVHlwZT4odmlzaXRvcjogVmlzaXRvciwgbm9kZTogYW55LCB0aHJvd0lmTm90Rm91bmQgPSB0cnVlKSB7XG4gICAgbGV0IGZuOiBhbnkgPSBudWxsO1xuICAgIGxldCBkdHlwZTogVFsnVFR5cGUnXSA9IFR5cGUuTk9ORTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZVxuICAgIGlmICAgICAgKG5vZGUgaW5zdGFuY2VvZiBEYXRhICAgICkgeyBkdHlwZSA9IGluZmVyRFR5cGUobm9kZS50eXBlIGFzIFQpOyB9XG4gICAgZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFZlY3RvciAgKSB7IGR0eXBlID0gaW5mZXJEVHlwZShub2RlLnR5cGUgYXMgVCk7IH1cbiAgICBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgRGF0YVR5cGUpIHsgZHR5cGUgPSBpbmZlckRUeXBlKG5vZGUgICAgICBhcyBUKTsgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiAoZHR5cGUgPSBub2RlKSAhPT0gJ251bWJlcicpIHsgZHR5cGUgPSBUeXBlW25vZGVdIGFzIGFueSBhcyBUWydUVHlwZSddOyB9XG5cbiAgICBzd2l0Y2ggKGR0eXBlKSB7XG4gICAgICAgIGNhc2UgVHlwZS5OdWxsOiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0TnVsbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5Cb29sOiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0Qm9vbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnQ6ICAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkludDg6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRJbnQ4IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50MTY6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEludDE2IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50MzI6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEludDMyIHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50NjQ6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEludDY0IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVWludDg6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFVpbnQ4IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVWludDE2OiAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFVpbnQxNiB8fCB2aXNpdG9yLnZpc2l0SW50OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlVpbnQzMjogICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRVaW50MzIgfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5VaW50NjQ6ICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VWludDY0IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuRmxvYXQ6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEZsb2F0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkZsb2F0MTY6ICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRGbG9hdDE2IHx8IHZpc2l0b3IudmlzaXRGbG9hdDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5GbG9hdDMyOiAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RmxvYXQzMiB8fCB2aXNpdG9yLnZpc2l0RmxvYXQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuRmxvYXQ2NDogICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEZsb2F0NjQgfHwgdmlzaXRvci52aXNpdEZsb2F0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlV0Zjg6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRVdGY4OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkJpbmFyeTogICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRCaW5hcnk7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuRml4ZWRTaXplQmluYXJ5OiAgICAgIGZuID0gdmlzaXRvci52aXNpdEZpeGVkU2l6ZUJpbmFyeTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EYXRlOiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGF0ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EYXRlRGF5OiAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGF0ZURheSB8fCB2aXNpdG9yLnZpc2l0RGF0ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EYXRlTWlsbGlzZWNvbmQ6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGF0ZU1pbGxpc2Vjb25kIHx8IHZpc2l0b3IudmlzaXREYXRlOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcDogICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXA7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wU2Vjb25kOiAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVzdGFtcFNlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZXN0YW1wOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcE1pbGxpc2Vjb25kOiBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXBNaWxsaXNlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZXN0YW1wOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcE1pY3Jvc2Vjb25kOiBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXBNaWNyb3NlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZXN0YW1wOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcE5hbm9zZWNvbmQ6ICBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXBOYW5vc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lc3RhbXA7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZTogICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWU7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZVNlY29uZDogICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVTZWNvbmQgfHwgdmlzaXRvci52aXNpdFRpbWU7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZU1pbGxpc2Vjb25kOiAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVNaWxsaXNlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lTWljcm9zZWNvbmQ6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VGltZU1pY3Jvc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVOYW5vc2Vjb25kOiAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRUaW1lTmFub3NlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EZWNpbWFsOiAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGVjaW1hbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5MaXN0OiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0TGlzdDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5TdHJ1Y3Q6ICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0U3RydWN0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlVuaW9uOiAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRVbmlvbjsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EZW5zZVVuaW9uOiAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGVuc2VVbmlvbiB8fCB2aXNpdG9yLnZpc2l0VW5pb247IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuU3BhcnNlVW5pb246ICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFNwYXJzZVVuaW9uIHx8IHZpc2l0b3IudmlzaXRVbmlvbjsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EaWN0aW9uYXJ5OiAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGljdGlvbmFyeTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbDogICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50ZXJ2YWw7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50ZXJ2YWxEYXlUaW1lOiAgICAgIGZuID0gdmlzaXRvci52aXNpdEludGVydmFsRGF5VGltZSB8fCB2aXNpdG9yLnZpc2l0SW50ZXJ2YWw7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50ZXJ2YWxZZWFyTW9udGg6ICAgIGZuID0gdmlzaXRvci52aXNpdEludGVydmFsWWVhck1vbnRoIHx8IHZpc2l0b3IudmlzaXRJbnRlcnZhbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5GaXhlZFNpemVMaXN0OiAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0Rml4ZWRTaXplTGlzdDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5NYXA6ICAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0TWFwOyBicmVhaztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZuO1xuICAgIGlmICghdGhyb3dJZk5vdEZvdW5kKSByZXR1cm4gKCkgPT4gbnVsbDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCB0eXBlICcke1R5cGVbZHR5cGVdfSdgKTtcbn1cblxuLyoqIEBpZ25vcmUgKi9cbmZ1bmN0aW9uIGluZmVyRFR5cGU8VCBleHRlbmRzIERhdGFUeXBlPih0eXBlOiBUKTogVHlwZSB7XG4gICAgc3dpdGNoICh0eXBlLnR5cGVJZCkge1xuICAgICAgICBjYXNlIFR5cGUuTnVsbDogcmV0dXJuIFR5cGUuTnVsbDtcbiAgICAgICAgY2FzZSBUeXBlLkludDpcbiAgICAgICAgICAgIGNvbnN0IHsgYml0V2lkdGgsIGlzU2lnbmVkIH0gPSAodHlwZSBhcyBhbnkgYXMgSW50KTtcbiAgICAgICAgICAgIHN3aXRjaCAoYml0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlICA4OiByZXR1cm4gaXNTaWduZWQgPyBUeXBlLkludDggIDogVHlwZS5VaW50OCA7XG4gICAgICAgICAgICAgICAgY2FzZSAxNjogcmV0dXJuIGlzU2lnbmVkID8gVHlwZS5JbnQxNiA6IFR5cGUuVWludDE2O1xuICAgICAgICAgICAgICAgIGNhc2UgMzI6IHJldHVybiBpc1NpZ25lZCA/IFR5cGUuSW50MzIgOiBUeXBlLlVpbnQzMjtcbiAgICAgICAgICAgICAgICBjYXNlIDY0OiByZXR1cm4gaXNTaWduZWQgPyBUeXBlLkludDY0IDogVHlwZS5VaW50NjQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gVHlwZS5JbnQ7XG4gICAgICAgIGNhc2UgVHlwZS5GbG9hdDpcbiAgICAgICAgICAgIHN3aXRjaCgodHlwZSBhcyBhbnkgYXMgRmxvYXQpLnByZWNpc2lvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgUHJlY2lzaW9uLkhBTEY6IHJldHVybiBUeXBlLkZsb2F0MTY7XG4gICAgICAgICAgICAgICAgY2FzZSBQcmVjaXNpb24uU0lOR0xFOiByZXR1cm4gVHlwZS5GbG9hdDMyO1xuICAgICAgICAgICAgICAgIGNhc2UgUHJlY2lzaW9uLkRPVUJMRTogcmV0dXJuIFR5cGUuRmxvYXQ2NDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLkZsb2F0O1xuICAgICAgICBjYXNlIFR5cGUuQmluYXJ5OiByZXR1cm4gVHlwZS5CaW5hcnk7XG4gICAgICAgIGNhc2UgVHlwZS5VdGY4OiByZXR1cm4gVHlwZS5VdGY4O1xuICAgICAgICBjYXNlIFR5cGUuQm9vbDogcmV0dXJuIFR5cGUuQm9vbDtcbiAgICAgICAgY2FzZSBUeXBlLkRlY2ltYWw6IHJldHVybiBUeXBlLkRlY2ltYWw7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lOlxuICAgICAgICAgICAgc3dpdGNoICgodHlwZSBhcyBhbnkgYXMgVGltZSkudW5pdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lU2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTUlMTElTRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVNaWxsaXNlY29uZDtcbiAgICAgICAgICAgICAgICBjYXNlIFRpbWVVbml0Lk1JQ1JPU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lTWljcm9zZWNvbmQ7XG4gICAgICAgICAgICAgICAgY2FzZSBUaW1lVW5pdC5OQU5PU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lTmFub3NlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLlRpbWU7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lc3RhbXA6XG4gICAgICAgICAgICBzd2l0Y2ggKCh0eXBlIGFzIGFueSBhcyBUaW1lc3RhbXApLnVuaXQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFRpbWVVbml0LlNFQ09ORDogcmV0dXJuIFR5cGUuVGltZXN0YW1wU2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTUlMTElTRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVzdGFtcE1pbGxpc2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTUlDUk9TRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVzdGFtcE1pY3Jvc2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTkFOT1NFQ09ORDogcmV0dXJuIFR5cGUuVGltZXN0YW1wTmFub3NlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLlRpbWVzdGFtcDtcbiAgICAgICAgY2FzZSBUeXBlLkRhdGU6XG4gICAgICAgICAgICBzd2l0Y2ggKCh0eXBlIGFzIGFueSBhcyBEYXRlXykudW5pdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgRGF0ZVVuaXQuREFZOiByZXR1cm4gVHlwZS5EYXRlRGF5O1xuICAgICAgICAgICAgICAgIGNhc2UgRGF0ZVVuaXQuTUlMTElTRUNPTkQ6IHJldHVybiBUeXBlLkRhdGVNaWxsaXNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLkRhdGU7XG4gICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbDpcbiAgICAgICAgICAgIHN3aXRjaCAoKHR5cGUgYXMgYW55IGFzIEludGVydmFsKS51bml0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBJbnRlcnZhbFVuaXQuREFZX1RJTUU6IHJldHVybiBUeXBlLkludGVydmFsRGF5VGltZTtcbiAgICAgICAgICAgICAgICBjYXNlIEludGVydmFsVW5pdC5ZRUFSX01PTlRIOiByZXR1cm4gVHlwZS5JbnRlcnZhbFllYXJNb250aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLkludGVydmFsO1xuICAgICAgICBjYXNlIFR5cGUuTWFwOiByZXR1cm4gVHlwZS5NYXA7XG4gICAgICAgIGNhc2UgVHlwZS5MaXN0OiByZXR1cm4gVHlwZS5MaXN0O1xuICAgICAgICBjYXNlIFR5cGUuU3RydWN0OiByZXR1cm4gVHlwZS5TdHJ1Y3Q7XG4gICAgICAgIGNhc2UgVHlwZS5VbmlvbjpcbiAgICAgICAgICAgIHN3aXRjaCAoKHR5cGUgYXMgYW55IGFzIFVuaW9uKS5tb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBVbmlvbk1vZGUuRGVuc2U6IHJldHVybiBUeXBlLkRlbnNlVW5pb247XG4gICAgICAgICAgICAgICAgY2FzZSBVbmlvbk1vZGUuU3BhcnNlOiByZXR1cm4gVHlwZS5TcGFyc2VVbmlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLlVuaW9uO1xuICAgICAgICBjYXNlIFR5cGUuRml4ZWRTaXplQmluYXJ5OiByZXR1cm4gVHlwZS5GaXhlZFNpemVCaW5hcnk7XG4gICAgICAgIGNhc2UgVHlwZS5GaXhlZFNpemVMaXN0OiByZXR1cm4gVHlwZS5GaXhlZFNpemVMaXN0O1xuICAgICAgICBjYXNlIFR5cGUuRGljdGlvbmFyeTogcmV0dXJuIFR5cGUuRGljdGlvbmFyeTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgdHlwZSAnJHtUeXBlW3R5cGUudHlwZUlkXX0nYCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlzaXRvciB7XG4gICAgdmlzaXROdWxsICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRCb29sICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQgICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQ4PyAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQxNj8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQzMj8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQ2ND8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50OD8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50MTY/ICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50MzI/ICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50NjQ/ICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdCAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdDE2PyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdDMyPyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdDY0PyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVdGY4ICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRCaW5hcnkgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGaXhlZFNpemVCaW5hcnkgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREYXRlICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREYXRlRGF5PyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREYXRlTWlsbGlzZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBTZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBNaWxsaXNlY29uZD8gKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBNaWNyb3NlY29uZD8gKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBOYW5vc2Vjb25kPyAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lU2Vjb25kPyAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lTWlsbGlzZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lTWljcm9zZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lTmFub3NlY29uZD8gICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREZWNpbWFsICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRMaXN0ICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRTdHJ1Y3QgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVbmlvbiAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREZW5zZVVuaW9uPyAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRTcGFyc2VVbmlvbj8gICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREaWN0aW9uYXJ5ICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnRlcnZhbCAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnRlcnZhbERheVRpbWU/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnRlcnZhbFllYXJNb250aD8gICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGaXhlZFNpemVMaXN0ICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRNYXAgICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG59XG5cbi8vIEFkZCB0aGVzZSBoZXJlIHNvIHRoZXkncmUgcGlja2VkIHVwIGJ5IHRoZSBleHRlcm5zIGNyZWF0b3Jcbi8vIGluIHRoZSBidWlsZCwgYW5kIGNsb3N1cmUtY29tcGlsZXIgZG9lc24ndCBtaW5pZnkgdGhlbSBhd2F5XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludDggPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRJbnQxNiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludDMyID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0SW50NjQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRVaW50OCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFVpbnQxNiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFVpbnQzMiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFVpbnQ2NCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEZsb2F0MTYgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRGbG9hdDMyID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0RmxvYXQ2NCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdERhdGVEYXkgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXREYXRlTWlsbGlzZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lc3RhbXBTZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lc3RhbXBNaWxsaXNlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVzdGFtcE1pY3Jvc2Vjb25kID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVTZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lTWlsbGlzZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lTWljcm9zZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lTmFub3NlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdERlbnNlVW5pb24gPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRTcGFyc2VVbmlvbiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludGVydmFsRGF5VGltZSA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludGVydmFsWWVhck1vbnRoID0gbnVsbDtcbiJdfQ==
