// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
import { Data } from './data';
import { Vector } from './vector';
import { Type, Precision, DateUnit, TimeUnit, IntervalUnit, UnionMode } from './enum';
import { DataType, } from './type';
export class Visitor {
    visitMany(nodes, ...args) {
        return nodes.map((node, i) => this.visit(node, ...args.map((x) => x[i])));
    }
    visit(node, ...args) {
        return this.getVisitFn(node, false).call(this, node, ...args);
    }
    getVisitFn(node, throwIfNotFound = true) {
        return getVisitFn(this, node, throwIfNotFound);
    }
    visitNull(_node, ..._args) { return null; }
    visitBool(_node, ..._args) { return null; }
    visitInt(_node, ..._args) { return null; }
    visitFloat(_node, ..._args) { return null; }
    visitUtf8(_node, ..._args) { return null; }
    visitBinary(_node, ..._args) { return null; }
    visitFixedSizeBinary(_node, ..._args) { return null; }
    visitDate(_node, ..._args) { return null; }
    visitTimestamp(_node, ..._args) { return null; }
    visitTime(_node, ..._args) { return null; }
    visitDecimal(_node, ..._args) { return null; }
    visitList(_node, ..._args) { return null; }
    visitStruct(_node, ..._args) { return null; }
    visitUnion(_node, ..._args) { return null; }
    visitDictionary(_node, ..._args) { return null; }
    visitInterval(_node, ..._args) { return null; }
    visitFixedSizeList(_node, ..._args) { return null; }
    visitMap(_node, ..._args) { return null; }
}
/** @ignore */
function getVisitFn(visitor, node, throwIfNotFound = true) {
    let fn = null;
    let dtype = Type.NONE;
    // tslint:disable
    if (node instanceof Data) {
        dtype = inferDType(node.type);
    }
    else if (node instanceof Vector) {
        dtype = inferDType(node.type);
    }
    else if (node instanceof DataType) {
        dtype = inferDType(node);
    }
    else if (typeof (dtype = node) !== 'number') {
        dtype = Type[node];
    }
    switch (dtype) {
        case Type.Null:
            fn = visitor.visitNull;
            break;
        case Type.Bool:
            fn = visitor.visitBool;
            break;
        case Type.Int:
            fn = visitor.visitInt;
            break;
        case Type.Int8:
            fn = visitor.visitInt8 || visitor.visitInt;
            break;
        case Type.Int16:
            fn = visitor.visitInt16 || visitor.visitInt;
            break;
        case Type.Int32:
            fn = visitor.visitInt32 || visitor.visitInt;
            break;
        case Type.Int64:
            fn = visitor.visitInt64 || visitor.visitInt;
            break;
        case Type.Uint8:
            fn = visitor.visitUint8 || visitor.visitInt;
            break;
        case Type.Uint16:
            fn = visitor.visitUint16 || visitor.visitInt;
            break;
        case Type.Uint32:
            fn = visitor.visitUint32 || visitor.visitInt;
            break;
        case Type.Uint64:
            fn = visitor.visitUint64 || visitor.visitInt;
            break;
        case Type.Float:
            fn = visitor.visitFloat;
            break;
        case Type.Float16:
            fn = visitor.visitFloat16 || visitor.visitFloat;
            break;
        case Type.Float32:
            fn = visitor.visitFloat32 || visitor.visitFloat;
            break;
        case Type.Float64:
            fn = visitor.visitFloat64 || visitor.visitFloat;
            break;
        case Type.Utf8:
            fn = visitor.visitUtf8;
            break;
        case Type.Binary:
            fn = visitor.visitBinary;
            break;
        case Type.FixedSizeBinary:
            fn = visitor.visitFixedSizeBinary;
            break;
        case Type.Date:
            fn = visitor.visitDate;
            break;
        case Type.DateDay:
            fn = visitor.visitDateDay || visitor.visitDate;
            break;
        case Type.DateMillisecond:
            fn = visitor.visitDateMillisecond || visitor.visitDate;
            break;
        case Type.Timestamp:
            fn = visitor.visitTimestamp;
            break;
        case Type.TimestampSecond:
            fn = visitor.visitTimestampSecond || visitor.visitTimestamp;
            break;
        case Type.TimestampMillisecond:
            fn = visitor.visitTimestampMillisecond || visitor.visitTimestamp;
            break;
        case Type.TimestampMicrosecond:
            fn = visitor.visitTimestampMicrosecond || visitor.visitTimestamp;
            break;
        case Type.TimestampNanosecond:
            fn = visitor.visitTimestampNanosecond || visitor.visitTimestamp;
            break;
        case Type.Time:
            fn = visitor.visitTime;
            break;
        case Type.TimeSecond:
            fn = visitor.visitTimeSecond || visitor.visitTime;
            break;
        case Type.TimeMillisecond:
            fn = visitor.visitTimeMillisecond || visitor.visitTime;
            break;
        case Type.TimeMicrosecond:
            fn = visitor.visitTimeMicrosecond || visitor.visitTime;
            break;
        case Type.TimeNanosecond:
            fn = visitor.visitTimeNanosecond || visitor.visitTime;
            break;
        case Type.Decimal:
            fn = visitor.visitDecimal;
            break;
        case Type.List:
            fn = visitor.visitList;
            break;
        case Type.Struct:
            fn = visitor.visitStruct;
            break;
        case Type.Union:
            fn = visitor.visitUnion;
            break;
        case Type.DenseUnion:
            fn = visitor.visitDenseUnion || visitor.visitUnion;
            break;
        case Type.SparseUnion:
            fn = visitor.visitSparseUnion || visitor.visitUnion;
            break;
        case Type.Dictionary:
            fn = visitor.visitDictionary;
            break;
        case Type.Interval:
            fn = visitor.visitInterval;
            break;
        case Type.IntervalDayTime:
            fn = visitor.visitIntervalDayTime || visitor.visitInterval;
            break;
        case Type.IntervalYearMonth:
            fn = visitor.visitIntervalYearMonth || visitor.visitInterval;
            break;
        case Type.FixedSizeList:
            fn = visitor.visitFixedSizeList;
            break;
        case Type.Map:
            fn = visitor.visitMap;
            break;
    }
    if (typeof fn === 'function')
        return fn;
    if (!throwIfNotFound)
        return () => null;
    throw new Error(`Unrecognized type '${Type[dtype]}'`);
}
/** @ignore */
function inferDType(type) {
    switch (type.typeId) {
        case Type.Null: return Type.Null;
        case Type.Int:
            const { bitWidth, isSigned } = type;
            switch (bitWidth) {
                case 8: return isSigned ? Type.Int8 : Type.Uint8;
                case 16: return isSigned ? Type.Int16 : Type.Uint16;
                case 32: return isSigned ? Type.Int32 : Type.Uint32;
                case 64: return isSigned ? Type.Int64 : Type.Uint64;
            }
            return Type.Int;
        case Type.Float:
            switch (type.precision) {
                case Precision.HALF: return Type.Float16;
                case Precision.SINGLE: return Type.Float32;
                case Precision.DOUBLE: return Type.Float64;
            }
            return Type.Float;
        case Type.Binary: return Type.Binary;
        case Type.Utf8: return Type.Utf8;
        case Type.Bool: return Type.Bool;
        case Type.Decimal: return Type.Decimal;
        case Type.Time:
            switch (type.unit) {
                case TimeUnit.SECOND: return Type.TimeSecond;
                case TimeUnit.MILLISECOND: return Type.TimeMillisecond;
                case TimeUnit.MICROSECOND: return Type.TimeMicrosecond;
                case TimeUnit.NANOSECOND: return Type.TimeNanosecond;
            }
            return Type.Time;
        case Type.Timestamp:
            switch (type.unit) {
                case TimeUnit.SECOND: return Type.TimestampSecond;
                case TimeUnit.MILLISECOND: return Type.TimestampMillisecond;
                case TimeUnit.MICROSECOND: return Type.TimestampMicrosecond;
                case TimeUnit.NANOSECOND: return Type.TimestampNanosecond;
            }
            return Type.Timestamp;
        case Type.Date:
            switch (type.unit) {
                case DateUnit.DAY: return Type.DateDay;
                case DateUnit.MILLISECOND: return Type.DateMillisecond;
            }
            return Type.Date;
        case Type.Interval:
            switch (type.unit) {
                case IntervalUnit.DAY_TIME: return Type.IntervalDayTime;
                case IntervalUnit.YEAR_MONTH: return Type.IntervalYearMonth;
            }
            return Type.Interval;
        case Type.Map: return Type.Map;
        case Type.List: return Type.List;
        case Type.Struct: return Type.Struct;
        case Type.Union:
            switch (type.mode) {
                case UnionMode.Dense: return Type.DenseUnion;
                case UnionMode.Sparse: return Type.SparseUnion;
            }
            return Type.Union;
        case Type.FixedSizeBinary: return Type.FixedSizeBinary;
        case Type.FixedSizeList: return Type.FixedSizeList;
        case Type.Dictionary: return Type.Dictionary;
    }
    throw new Error(`Unrecognized type '${Type[type.typeId]}'`);
}
// Add these here so they're picked up by the externs creator
// in the build, and closure-compiler doesn't minify them away
Visitor.prototype.visitInt8 = null;
Visitor.prototype.visitInt16 = null;
Visitor.prototype.visitInt32 = null;
Visitor.prototype.visitInt64 = null;
Visitor.prototype.visitUint8 = null;
Visitor.prototype.visitUint16 = null;
Visitor.prototype.visitUint32 = null;
Visitor.prototype.visitUint64 = null;
Visitor.prototype.visitFloat16 = null;
Visitor.prototype.visitFloat32 = null;
Visitor.prototype.visitFloat64 = null;
Visitor.prototype.visitDateDay = null;
Visitor.prototype.visitDateMillisecond = null;
Visitor.prototype.visitTimestampSecond = null;
Visitor.prototype.visitTimestampMillisecond = null;
Visitor.prototype.visitTimestampMicrosecond = null;
Visitor.prototype.visitTimestampNanosecond = null;
Visitor.prototype.visitTimeSecond = null;
Visitor.prototype.visitTimeMillisecond = null;
Visitor.prototype.visitTimeMicrosecond = null;
Visitor.prototype.visitTimeNanosecond = null;
Visitor.prototype.visitDenseUnion = null;
Visitor.prototype.visitSparseUnion = null;
Visitor.prototype.visitIntervalDayTime = null;
Visitor.prototype.visitIntervalYearMonth = null;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUM7QUFDN0MsT0FBTyxDQUFDLFNBQWlCLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztBQUM5QyxPQUFPLENBQUMsU0FBaUIsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQzlDLE9BQU8sQ0FBQyxTQUFpQixDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDOUMsT0FBTyxDQUFDLFNBQWlCLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztBQUM5QyxPQUFPLENBQUMsU0FBaUIsQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7QUFDdEQsT0FBTyxDQUFDLFNBQWlCLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0FBQ3RELE9BQU8sQ0FBQyxTQUFpQixDQUFDLHlCQUF5QixHQUFHLElBQUksQ0FBQztBQUMzRCxPQUFPLENBQUMsU0FBaUIsQ0FBQyx5QkFBeUIsR0FBRyxJQUFJLENBQUM7QUFDM0QsT0FBTyxDQUFDLFNBQWlCLENBQUMsd0JBQXdCLEdBQUcsSUFBSSxDQUFDO0FBQzFELE9BQU8sQ0FBQyxTQUFpQixDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7QUFDakQsT0FBTyxDQUFDLFNBQWlCLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0FBQ3RELE9BQU8sQ0FBQyxTQUFpQixDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUN0RCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUM7QUFDckQsT0FBTyxDQUFDLFNBQWlCLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztBQUNqRCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7QUFDbEQsT0FBTyxDQUFDLFNBQWlCLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0FBQ3RELE9BQU8sQ0FBQyxTQUFpQixDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyIsImZpbGUiOiJ2aXNpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuLy8gb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4vLyBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuLy8gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuLy8gdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuLy8gXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4vLyB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4vLyBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuLy8gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbi8vIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuLy8gc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuLy8gdW5kZXIgdGhlIExpY2Vuc2UuXG5cbmltcG9ydCB7IERhdGEgfSBmcm9tICcuL2RhdGEnO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSAnLi92ZWN0b3InO1xuaW1wb3J0IHsgVHlwZSwgUHJlY2lzaW9uLCBEYXRlVW5pdCwgVGltZVVuaXQsIEludGVydmFsVW5pdCwgVW5pb25Nb2RlIH0gZnJvbSAnLi9lbnVtJztcbmltcG9ydCB7IERhdGFUeXBlLCBGbG9hdCwgSW50LCBEYXRlXywgSW50ZXJ2YWwsIFRpbWUsIFRpbWVzdGFtcCwgVW5pb24sIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFZpc2l0b3Ige1xuICAgIHB1YmxpYyB2aXNpdE1hbnkobm9kZXM6IGFueVtdLCAuLi5hcmdzOiBhbnlbXVtdKSB7XG4gICAgICAgIHJldHVybiBub2Rlcy5tYXAoKG5vZGUsIGkpID0+IHRoaXMudmlzaXQobm9kZSwgLi4uYXJncy5tYXAoKHgpID0+IHhbaV0pKSk7XG4gICAgfVxuICAgIHB1YmxpYyB2aXNpdChub2RlOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpc2l0Rm4obm9kZSwgZmFsc2UpLmNhbGwodGhpcywgbm9kZSwgLi4uYXJncyk7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRWaXNpdEZuKG5vZGU6IGFueSwgdGhyb3dJZk5vdEZvdW5kID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gZ2V0VmlzaXRGbih0aGlzLCBub2RlLCB0aHJvd0lmTm90Rm91bmQpO1xuICAgIH1cbiAgICBwdWJsaWMgdmlzaXROdWxsICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0Qm9vbCAgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdEludCAgICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRGbG9hdCAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0VXRmOCAgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdEJpbmFyeSAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRGaXhlZFNpemVCaW5hcnkgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0RGF0ZSAgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdFRpbWVzdGFtcCAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRUaW1lICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0RGVjaW1hbCAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdExpc3QgICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRTdHJ1Y3QgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0VW5pb24gICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdERpY3Rpb25hcnkgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRJbnRlcnZhbCAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0Rml4ZWRTaXplTGlzdCAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdE1hcCAgICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbn1cblxuLyoqIEBpZ25vcmUgKi9cbmZ1bmN0aW9uIGdldFZpc2l0Rm48VCBleHRlbmRzIERhdGFUeXBlPih2aXNpdG9yOiBWaXNpdG9yLCBub2RlOiBhbnksIHRocm93SWZOb3RGb3VuZCA9IHRydWUpIHtcbiAgICBsZXQgZm46IGFueSA9IG51bGw7XG4gICAgbGV0IGR0eXBlOiBUWydUVHlwZSddID0gVHlwZS5OT05FO1xuICAgIC8vIHRzbGludDpkaXNhYmxlXG4gICAgaWYgICAgICAobm9kZSBpbnN0YW5jZW9mIERhdGEgICAgKSB7IGR0eXBlID0gaW5mZXJEVHlwZShub2RlLnR5cGUgYXMgVCk7IH1cbiAgICBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgVmVjdG9yICApIHsgZHR5cGUgPSBpbmZlckRUeXBlKG5vZGUudHlwZSBhcyBUKTsgfVxuICAgIGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBEYXRhVHlwZSkgeyBkdHlwZSA9IGluZmVyRFR5cGUobm9kZSAgICAgIGFzIFQpOyB9XG4gICAgZWxzZSBpZiAodHlwZW9mIChkdHlwZSA9IG5vZGUpICE9PSAnbnVtYmVyJykgeyBkdHlwZSA9IFR5cGVbbm9kZV0gYXMgYW55IGFzIFRbJ1RUeXBlJ107IH1cblxuICAgIHN3aXRjaCAoZHR5cGUpIHtcbiAgICAgICAgY2FzZSBUeXBlLk51bGw6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXROdWxsOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkJvb2w6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRCb29sOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkludDogICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50ODogICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEludDggfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnQxNjogICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50MTYgfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnQzMjogICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50MzIgfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnQ2NDogICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50NjQgfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5VaW50ODogICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VWludDggfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5VaW50MTY6ICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VWludDE2IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVWludDMyOiAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFVpbnQzMiB8fCB2aXNpdG9yLnZpc2l0SW50OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlVpbnQ2NDogICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRVaW50NjQgfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5GbG9hdDogICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RmxvYXQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuRmxvYXQxNjogICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEZsb2F0MTYgfHwgdmlzaXRvci52aXNpdEZsb2F0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkZsb2F0MzI6ICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRGbG9hdDMyIHx8IHZpc2l0b3IudmlzaXRGbG9hdDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5GbG9hdDY0OiAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RmxvYXQ2NCB8fCB2aXNpdG9yLnZpc2l0RmxvYXQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVXRmODogICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFV0Zjg7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuQmluYXJ5OiAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEJpbmFyeTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5GaXhlZFNpemVCaW5hcnk6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0Rml4ZWRTaXplQmluYXJ5OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkRhdGU6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXREYXRlOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkRhdGVEYXk6ICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXREYXRlRGF5IHx8IHZpc2l0b3IudmlzaXREYXRlOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkRhdGVNaWxsaXNlY29uZDogICAgICBmbiA9IHZpc2l0b3IudmlzaXREYXRlTWlsbGlzZWNvbmQgfHwgdmlzaXRvci52aXNpdERhdGU7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wOiAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVzdGFtcDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lc3RhbXBTZWNvbmQ6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VGltZXN0YW1wU2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lc3RhbXA7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wTWlsbGlzZWNvbmQ6IGZuID0gdmlzaXRvci52aXNpdFRpbWVzdGFtcE1pbGxpc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lc3RhbXA7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wTWljcm9zZWNvbmQ6IGZuID0gdmlzaXRvci52aXNpdFRpbWVzdGFtcE1pY3Jvc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lc3RhbXA7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wTmFub3NlY29uZDogIGZuID0gdmlzaXRvci52aXNpdFRpbWVzdGFtcE5hbm9zZWNvbmQgfHwgdmlzaXRvci52aXNpdFRpbWVzdGFtcDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lOiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VGltZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lU2Vjb25kOiAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VGltZVNlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lTWlsbGlzZWNvbmQ6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VGltZU1pbGxpc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVNaWNyb3NlY29uZDogICAgICBmbiA9IHZpc2l0b3IudmlzaXRUaW1lTWljcm9zZWNvbmQgfHwgdmlzaXRvci52aXNpdFRpbWU7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZU5hbm9zZWNvbmQ6ICAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVOYW5vc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkRlY2ltYWw6ICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXREZWNpbWFsOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkxpc3Q6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRMaXN0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlN0cnVjdDogICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRTdHJ1Y3Q7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVW5pb246ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFVuaW9uOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkRlbnNlVW5pb246ICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXREZW5zZVVuaW9uIHx8IHZpc2l0b3IudmlzaXRVbmlvbjsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5TcGFyc2VVbmlvbjogICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0U3BhcnNlVW5pb24gfHwgdmlzaXRvci52aXNpdFVuaW9uOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkRpY3Rpb25hcnk6ICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXREaWN0aW9uYXJ5OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkludGVydmFsOiAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRJbnRlcnZhbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbERheVRpbWU6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50ZXJ2YWxEYXlUaW1lIHx8IHZpc2l0b3IudmlzaXRJbnRlcnZhbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbFllYXJNb250aDogICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGggfHwgdmlzaXRvci52aXNpdEludGVydmFsOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkZpeGVkU2l6ZUxpc3Q6ICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRGaXhlZFNpemVMaXN0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLk1hcDogICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRNYXA7IGJyZWFrO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gZm47XG4gICAgaWYgKCF0aHJvd0lmTm90Rm91bmQpIHJldHVybiAoKSA9PiBudWxsO1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIHR5cGUgJyR7VHlwZVtkdHlwZV19J2ApO1xufVxuXG4vKiogQGlnbm9yZSAqL1xuZnVuY3Rpb24gaW5mZXJEVHlwZTxUIGV4dGVuZHMgRGF0YVR5cGU+KHR5cGU6IFQpOiBUeXBlIHtcbiAgICBzd2l0Y2ggKHR5cGUudHlwZUlkKSB7XG4gICAgICAgIGNhc2UgVHlwZS5OdWxsOiByZXR1cm4gVHlwZS5OdWxsO1xuICAgICAgICBjYXNlIFR5cGUuSW50OlxuICAgICAgICAgICAgY29uc3QgeyBiaXRXaWR0aCwgaXNTaWduZWQgfSA9ICh0eXBlIGFzIGFueSBhcyBJbnQpO1xuICAgICAgICAgICAgc3dpdGNoIChiaXRXaWR0aCkge1xuICAgICAgICAgICAgICAgIGNhc2UgIDg6IHJldHVybiBpc1NpZ25lZCA/IFR5cGUuSW50OCAgOiBUeXBlLlVpbnQ4IDtcbiAgICAgICAgICAgICAgICBjYXNlIDE2OiByZXR1cm4gaXNTaWduZWQgPyBUeXBlLkludDE2IDogVHlwZS5VaW50MTY7XG4gICAgICAgICAgICAgICAgY2FzZSAzMjogcmV0dXJuIGlzU2lnbmVkID8gVHlwZS5JbnQzMiA6IFR5cGUuVWludDMyO1xuICAgICAgICAgICAgICAgIGNhc2UgNjQ6IHJldHVybiBpc1NpZ25lZCA/IFR5cGUuSW50NjQgOiBUeXBlLlVpbnQ2NDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLkludDtcbiAgICAgICAgY2FzZSBUeXBlLkZsb2F0OlxuICAgICAgICAgICAgc3dpdGNoKCh0eXBlIGFzIGFueSBhcyBGbG9hdCkucHJlY2lzaW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBQcmVjaXNpb24uSEFMRjogcmV0dXJuIFR5cGUuRmxvYXQxNjtcbiAgICAgICAgICAgICAgICBjYXNlIFByZWNpc2lvbi5TSU5HTEU6IHJldHVybiBUeXBlLkZsb2F0MzI7XG4gICAgICAgICAgICAgICAgY2FzZSBQcmVjaXNpb24uRE9VQkxFOiByZXR1cm4gVHlwZS5GbG9hdDY0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFR5cGUuRmxvYXQ7XG4gICAgICAgIGNhc2UgVHlwZS5CaW5hcnk6IHJldHVybiBUeXBlLkJpbmFyeTtcbiAgICAgICAgY2FzZSBUeXBlLlV0Zjg6IHJldHVybiBUeXBlLlV0Zjg7XG4gICAgICAgIGNhc2UgVHlwZS5Cb29sOiByZXR1cm4gVHlwZS5Cb29sO1xuICAgICAgICBjYXNlIFR5cGUuRGVjaW1hbDogcmV0dXJuIFR5cGUuRGVjaW1hbDtcbiAgICAgICAgY2FzZSBUeXBlLlRpbWU6XG4gICAgICAgICAgICBzd2l0Y2ggKCh0eXBlIGFzIGFueSBhcyBUaW1lKS51bml0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBUaW1lVW5pdC5TRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVTZWNvbmQ7XG4gICAgICAgICAgICAgICAgY2FzZSBUaW1lVW5pdC5NSUxMSVNFQ09ORDogcmV0dXJuIFR5cGUuVGltZU1pbGxpc2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTUlDUk9TRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVNaWNyb3NlY29uZDtcbiAgICAgICAgICAgICAgICBjYXNlIFRpbWVVbml0Lk5BTk9TRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVOYW5vc2Vjb25kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFR5cGUuVGltZTtcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcDpcbiAgICAgICAgICAgIHN3aXRjaCAoKHR5cGUgYXMgYW55IGFzIFRpbWVzdGFtcCkudW5pdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lc3RhbXBTZWNvbmQ7XG4gICAgICAgICAgICAgICAgY2FzZSBUaW1lVW5pdC5NSUxMSVNFQ09ORDogcmV0dXJuIFR5cGUuVGltZXN0YW1wTWlsbGlzZWNvbmQ7XG4gICAgICAgICAgICAgICAgY2FzZSBUaW1lVW5pdC5NSUNST1NFQ09ORDogcmV0dXJuIFR5cGUuVGltZXN0YW1wTWljcm9zZWNvbmQ7XG4gICAgICAgICAgICAgICAgY2FzZSBUaW1lVW5pdC5OQU5PU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lc3RhbXBOYW5vc2Vjb25kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFR5cGUuVGltZXN0YW1wO1xuICAgICAgICBjYXNlIFR5cGUuRGF0ZTpcbiAgICAgICAgICAgIHN3aXRjaCAoKHR5cGUgYXMgYW55IGFzIERhdGVfKS51bml0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBEYXRlVW5pdC5EQVk6IHJldHVybiBUeXBlLkRhdGVEYXk7XG4gICAgICAgICAgICAgICAgY2FzZSBEYXRlVW5pdC5NSUxMSVNFQ09ORDogcmV0dXJuIFR5cGUuRGF0ZU1pbGxpc2Vjb25kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFR5cGUuRGF0ZTtcbiAgICAgICAgY2FzZSBUeXBlLkludGVydmFsOlxuICAgICAgICAgICAgc3dpdGNoICgodHlwZSBhcyBhbnkgYXMgSW50ZXJ2YWwpLnVuaXQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEludGVydmFsVW5pdC5EQVlfVElNRTogcmV0dXJuIFR5cGUuSW50ZXJ2YWxEYXlUaW1lO1xuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJ2YWxVbml0LllFQVJfTU9OVEg6IHJldHVybiBUeXBlLkludGVydmFsWWVhck1vbnRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFR5cGUuSW50ZXJ2YWw7XG4gICAgICAgIGNhc2UgVHlwZS5NYXA6IHJldHVybiBUeXBlLk1hcDtcbiAgICAgICAgY2FzZSBUeXBlLkxpc3Q6IHJldHVybiBUeXBlLkxpc3Q7XG4gICAgICAgIGNhc2UgVHlwZS5TdHJ1Y3Q6IHJldHVybiBUeXBlLlN0cnVjdDtcbiAgICAgICAgY2FzZSBUeXBlLlVuaW9uOlxuICAgICAgICAgICAgc3dpdGNoICgodHlwZSBhcyBhbnkgYXMgVW5pb24pLm1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFVuaW9uTW9kZS5EZW5zZTogcmV0dXJuIFR5cGUuRGVuc2VVbmlvbjtcbiAgICAgICAgICAgICAgICBjYXNlIFVuaW9uTW9kZS5TcGFyc2U6IHJldHVybiBUeXBlLlNwYXJzZVVuaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFR5cGUuVW5pb247XG4gICAgICAgIGNhc2UgVHlwZS5GaXhlZFNpemVCaW5hcnk6IHJldHVybiBUeXBlLkZpeGVkU2l6ZUJpbmFyeTtcbiAgICAgICAgY2FzZSBUeXBlLkZpeGVkU2l6ZUxpc3Q6IHJldHVybiBUeXBlLkZpeGVkU2l6ZUxpc3Q7XG4gICAgICAgIGNhc2UgVHlwZS5EaWN0aW9uYXJ5OiByZXR1cm4gVHlwZS5EaWN0aW9uYXJ5O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCB0eXBlICcke1R5cGVbdHlwZS50eXBlSWRdfSdgKTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaXNpdG9yIHtcbiAgICB2aXNpdE51bGwgICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEJvb2wgICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludCAgICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludDg/ICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludDE2PyAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludDMyPyAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludDY0PyAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFVpbnQ4PyAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFVpbnQxNj8gICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFVpbnQzMj8gICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFVpbnQ2ND8gICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEZsb2F0ICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEZsb2F0MTY/ICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEZsb2F0MzI/ICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEZsb2F0NjQ/ICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFV0ZjggICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEJpbmFyeSAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEZpeGVkU2l6ZUJpbmFyeSAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdERhdGUgICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdERhdGVEYXk/ICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdERhdGVNaWxsaXNlY29uZD8gICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVzdGFtcCAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVzdGFtcFNlY29uZD8gICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVzdGFtcE1pbGxpc2Vjb25kPyAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVzdGFtcE1pY3Jvc2Vjb25kPyAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVzdGFtcE5hbm9zZWNvbmQ/ICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWUgICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVTZWNvbmQ/ICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVNaWxsaXNlY29uZD8gICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVNaWNyb3NlY29uZD8gICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFRpbWVOYW5vc2Vjb25kPyAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdERlY2ltYWwgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdExpc3QgICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFN0cnVjdCAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFVuaW9uICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdERlbnNlVW5pb24/ICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdFNwYXJzZVVuaW9uPyAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdERpY3Rpb25hcnkgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludGVydmFsICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludGVydmFsRGF5VGltZT8gICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEludGVydmFsWWVhck1vbnRoPyAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdEZpeGVkU2l6ZUxpc3QgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbiAgICB2aXNpdE1hcCAgICAgICAgICAgICAgICAgICAobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcbn1cblxuLy8gQWRkIHRoZXNlIGhlcmUgc28gdGhleSdyZSBwaWNrZWQgdXAgYnkgdGhlIGV4dGVybnMgY3JlYXRvclxuLy8gaW4gdGhlIGJ1aWxkLCBhbmQgY2xvc3VyZS1jb21waWxlciBkb2Vzbid0IG1pbmlmeSB0aGVtIGF3YXlcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0SW50OCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludDE2ID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0SW50MzIgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRJbnQ2NCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFVpbnQ4ID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0VWludDE2ID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0VWludDMyID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0VWludDY0ID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0RmxvYXQxNiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEZsb2F0MzIgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRGbG9hdDY0ID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0RGF0ZURheSA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdERhdGVNaWxsaXNlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVzdGFtcFNlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVzdGFtcE1pbGxpc2Vjb25kID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0VGltZXN0YW1wTWljcm9zZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lc3RhbXBOYW5vc2Vjb25kID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0VGltZVNlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVNaWxsaXNlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVNaWNyb3NlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVOYW5vc2Vjb25kID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0RGVuc2VVbmlvbiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFNwYXJzZVVuaW9uID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0SW50ZXJ2YWxEYXlUaW1lID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0SW50ZXJ2YWxZZWFyTW9udGggPSBudWxsO1xuIl19
