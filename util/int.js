"use strict";
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
const carryBit16 = 1 << 16;
function intAsHex(value) {
    if (value < 0) {
        value = 0xFFFFFFFF + value + 1;
    }
    return `0x${value.toString(16)}`;
}
const kInt32DecimalDigits = 8;
const kPowersOfTen = [1,
    10,
    100,
    1000,
    10000,
    100000,
    1000000,
    10000000,
    100000000];
class BaseInt64 {
    constructor(buffer) {
        this.buffer = buffer;
    }
    high() { return this.buffer[1]; }
    low() { return this.buffer[0]; }
    _times(other) {
        // Break the left and right numbers into 16 bit chunks
        // so that we can multiply them without overflow.
        const L = new Uint32Array([
            this.buffer[1] >>> 16,
            this.buffer[1] & 0xFFFF,
            this.buffer[0] >>> 16,
            this.buffer[0] & 0xFFFF
        ]);
        const R = new Uint32Array([
            other.buffer[1] >>> 16,
            other.buffer[1] & 0xFFFF,
            other.buffer[0] >>> 16,
            other.buffer[0] & 0xFFFF
        ]);
        let product = L[3] * R[3];
        this.buffer[0] = product & 0xFFFF;
        let sum = product >>> 16;
        product = L[2] * R[3];
        sum += product;
        product = (L[3] * R[2]) >>> 0;
        sum += product;
        this.buffer[0] += sum << 16;
        this.buffer[1] = (sum >>> 0 < product ? carryBit16 : 0);
        this.buffer[1] += sum >>> 16;
        this.buffer[1] += L[1] * R[3] + L[2] * R[2] + L[3] * R[1];
        this.buffer[1] += (L[0] * R[3] + L[1] * R[2] + L[2] * R[1] + L[3] * R[0]) << 16;
        return this;
    }
    _plus(other) {
        const sum = (this.buffer[0] + other.buffer[0]) >>> 0;
        this.buffer[1] += other.buffer[1];
        if (sum < (this.buffer[0] >>> 0)) {
            ++this.buffer[1];
        }
        this.buffer[0] = sum;
    }
    lessThan(other) {
        return this.buffer[1] < other.buffer[1] ||
            (this.buffer[1] === other.buffer[1] && this.buffer[0] < other.buffer[0]);
    }
    equals(other) {
        return this.buffer[1] === other.buffer[1] && this.buffer[0] == other.buffer[0];
    }
    greaterThan(other) {
        return other.lessThan(this);
    }
    hex() {
        return `${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;
    }
}
exports.BaseInt64 = BaseInt64;
class Uint64 extends BaseInt64 {
    times(other) {
        this._times(other);
        return this;
    }
    plus(other) {
        this._plus(other);
        return this;
    }
    static multiply(left, right) {
        let rtrn = new Uint64(new Uint32Array(left.buffer));
        return rtrn.times(right);
    }
    static add(left, right) {
        let rtrn = new Uint64(new Uint32Array(left.buffer));
        return rtrn.plus(right);
    }
}
exports.Uint64 = Uint64;
class Int64 extends BaseInt64 {
    negate() {
        this.buffer[0] = ~this.buffer[0] + 1;
        this.buffer[1] = ~this.buffer[1];
        if (this.buffer[0] == 0) {
            ++this.buffer[1];
        }
        return this;
    }
    times(other) {
        this._times(other);
        return this;
    }
    plus(other) {
        this._plus(other);
        return this;
    }
    lessThan(other) {
        // force high bytes to be signed
        const this_high = this.buffer[1] << 0;
        const other_high = other.buffer[1] << 0;
        return this_high < other_high ||
            (this_high === other_high && this.buffer[0] < other.buffer[0]);
    }
    static fromString(str, out_buffer = new Uint32Array(2)) {
        // TODO: Assert that out_buffer is 0 and length = 2
        const negate = str.startsWith('-');
        const length = str.length;
        let out = new Int64(out_buffer);
        for (let posn = negate ? 1 : 0; posn < length;) {
            const group = kInt32DecimalDigits < length - posn ?
                kInt32DecimalDigits : length - posn;
            const chunk = new Int64(new Uint32Array([parseInt(str.substr(posn, group), 10), 0]));
            const multiple = new Int64(new Uint32Array([kPowersOfTen[group], 0]));
            out.times(multiple);
            out.plus(chunk);
            posn += group;
        }
        return negate ? out.negate() : out;
    }
    static multiply(left, right) {
        let rtrn = new Int64(new Uint32Array(left.buffer));
        return rtrn.times(right);
    }
    static add(left, right) {
        let rtrn = new Int64(new Uint32Array(left.buffer));
        return rtrn.plus(right);
    }
}
exports.Int64 = Int64;
class Int128 {
    constructor(buffer) {
        this.buffer = buffer;
        // buffer[3] MSB (high)
        // buffer[2]
        // buffer[1]
        // buffer[0] LSB (low)
    }
    high() {
        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));
    }
    low() {
        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset, 2));
    }
    negate() {
        this.buffer[0] = ~this.buffer[0] + 1;
        this.buffer[1] = ~this.buffer[1];
        this.buffer[2] = ~this.buffer[2];
        this.buffer[3] = ~this.buffer[3];
        if (this.buffer[0] == 0) {
            ++this.buffer[1];
        }
        if (this.buffer[1] == 0) {
            ++this.buffer[2];
        }
        if (this.buffer[2] == 0) {
            ++this.buffer[3];
        }
        return this;
    }
    times(other) {
        // Break the left and right numbers into 32 bit chunks
        // so that we can multiply them without overflow.
        const L0 = new Uint64(new Uint32Array([this.buffer[3], 0]));
        const L1 = new Uint64(new Uint32Array([this.buffer[2], 0]));
        const L2 = new Uint64(new Uint32Array([this.buffer[1], 0]));
        const L3 = new Uint64(new Uint32Array([this.buffer[0], 0]));
        const R0 = new Uint64(new Uint32Array([other.buffer[3], 0]));
        const R1 = new Uint64(new Uint32Array([other.buffer[2], 0]));
        const R2 = new Uint64(new Uint32Array([other.buffer[1], 0]));
        const R3 = new Uint64(new Uint32Array([other.buffer[0], 0]));
        let product = Uint64.multiply(L3, R3);
        this.buffer[0] = product.low();
        let sum = new Uint64(new Uint32Array([product.high(), 0]));
        product = Uint64.multiply(L2, R3);
        sum.plus(product);
        product = Uint64.multiply(L3, R2);
        sum.plus(product);
        this.buffer[1] = sum.low();
        this.buffer[3] = (sum.lessThan(product) ? 1 : 0);
        this.buffer[2] = sum.high();
        let high = new Uint64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));
        high.plus(Uint64.multiply(L1, R3))
            .plus(Uint64.multiply(L2, R2))
            .plus(Uint64.multiply(L3, R1));
        this.buffer[3] += Uint64.multiply(L0, R3)
            .plus(Uint64.multiply(L1, R2))
            .plus(Uint64.multiply(L2, R1))
            .plus(Uint64.multiply(L3, R0)).low();
        return this;
    }
    plus(other) {
        let sums = new Uint32Array(4);
        sums[3] = (this.buffer[3] + other.buffer[3]) >>> 0;
        sums[2] = (this.buffer[2] + other.buffer[2]) >>> 0;
        sums[1] = (this.buffer[1] + other.buffer[1]) >>> 0;
        sums[0] = (this.buffer[0] + other.buffer[0]) >>> 0;
        if (sums[0] < (this.buffer[0] >>> 0)) {
            ++sums[1];
        }
        if (sums[1] < (this.buffer[1] >>> 0)) {
            ++sums[2];
        }
        if (sums[2] < (this.buffer[2] >>> 0)) {
            ++sums[3];
        }
        this.buffer[3] = sums[3];
        this.buffer[2] = sums[2];
        this.buffer[1] = sums[1];
        this.buffer[0] = sums[0];
        return this;
    }
    hex() {
        return `${intAsHex(this.buffer[3])} ${intAsHex(this.buffer[2])} ${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;
    }
    static multiply(left, right) {
        let rtrn = new Int128(new Uint32Array(left.buffer));
        return rtrn.times(right);
    }
    static add(left, right) {
        let rtrn = new Int128(new Uint32Array(left.buffer));
        return rtrn.plus(right);
    }
    static fromString(str, out_buffer = new Uint32Array(4)) {
        // TODO: Assert that out_buffer is 0 and length = 4
        const negate = str.startsWith('-');
        const length = str.length;
        let out = new Int128(out_buffer);
        for (let posn = negate ? 1 : 0; posn < length;) {
            const group = kInt32DecimalDigits < length - posn ?
                kInt32DecimalDigits : length - posn;
            const chunk = new Int128(new Uint32Array([parseInt(str.substr(posn, group), 10), 0, 0, 0]));
            const multiple = new Int128(new Uint32Array([kPowersOfTen[group], 0, 0, 0]));
            out.times(multiple);
            out.plus(chunk);
            posn += group;
        }
        return negate ? out.negate() : out;
    }
}
exports.Int128 = Int128;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwvaW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSw2REFBNkQ7QUFDN0QsK0RBQStEO0FBQy9ELHdEQUF3RDtBQUN4RCw2REFBNkQ7QUFDN0Qsb0RBQW9EO0FBQ3BELDZEQUE2RDtBQUM3RCw2REFBNkQ7QUFDN0QsRUFBRTtBQUNGLCtDQUErQztBQUMvQyxFQUFFO0FBQ0YsNkRBQTZEO0FBQzdELDhEQUE4RDtBQUM5RCx5REFBeUQ7QUFDekQsNERBQTREO0FBQzVELDBEQUEwRDtBQUMxRCxxQkFBcUI7O0FBRXJCLE1BQU0sVUFBVSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7QUFFM0IsU0FBUyxRQUFRLENBQUMsS0FBYTtJQUMzQixJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUU7UUFDWCxLQUFLLEdBQUcsVUFBVSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7S0FDbEM7SUFDRCxPQUFPLEtBQUssS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO0FBQ3JDLENBQUM7QUFFRCxNQUFNLG1CQUFtQixHQUFHLENBQUMsQ0FBQztBQUM5QixNQUFNLFlBQVksR0FBRyxDQUFDLENBQUM7SUFDRCxFQUFFO0lBQ0YsR0FBRztJQUNILElBQUk7SUFDSixLQUFLO0lBQ0wsTUFBTTtJQUNOLE9BQU87SUFDUCxRQUFRO0lBQ1IsU0FBUyxDQUFDLENBQUM7QUFFakMsTUFBYSxTQUFTO0lBQ2xCLFlBQXVCLE1BQW1CO1FBQW5CLFdBQU0sR0FBTixNQUFNLENBQWE7SUFBRyxDQUFDO0lBRTlDLElBQUksS0FBYSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLEdBQUcsS0FBYyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRS9CLE1BQU0sQ0FBQyxLQUFnQjtRQUM3QixzREFBc0Q7UUFDdEQsaURBQWlEO1FBQ2pELE1BQU0sQ0FBQyxHQUFHLElBQUksV0FBVyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtZQUNyQixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU07WUFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO1lBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTTtTQUMxQixDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsR0FBRyxJQUFJLFdBQVcsQ0FBQztZQUN0QixLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUU7WUFDdEIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNO1lBQ3hCLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtZQUN0QixLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU07U0FDM0IsQ0FBQyxDQUFDO1FBRUgsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFFbEMsSUFBSSxHQUFHLEdBQUcsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUV6QixPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixHQUFHLElBQUksT0FBTyxDQUFDO1FBRWYsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QixHQUFHLElBQUksT0FBTyxDQUFDO1FBRWYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDO1FBRTVCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV4RCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsS0FBSyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVoRixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFTyxLQUFLLENBQUMsS0FBZ0I7UUFDNUIsTUFBTSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE1B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QVk7UUFDWixZQUFZO1FBQ1osc0JBQXNCO0lBQzFCLENBQUM7SUFFRCxJQUFJO1FBQ0EsT0FBTyxJQUFJLEtBQUssQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6RixDQUFDO0lBRUQsR0FBRztRQUNDLE9BQU8sSUFBSSxLQUFLLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRixDQUFDO0lBRUQsTUFBTTtRQUNGLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVqQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDOUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQzlDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUM5QyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQWE7UUFDZixzREFBc0Q7UUFDdEQsaURBQWlEO1FBQ2pELE1BQU0sRUFBRSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0QsTUFBTSxFQUFFLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RCxNQUFNLEVBQUUsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sRUFBRSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFN0QsTUFBTSxFQUFFLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RCxNQUFNLEVBQUUsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sRUFBRSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0QsTUFBTSxFQUFFLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU3RCxJQUFJLE9BQU8sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUUvQixJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFM0QsT0FBTyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFbEIsT0FBTyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFM0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFakQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDNUIsSUFBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFMUYsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUM7YUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUVyRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsSUFBSSxDQUFDLEtBQWE7UUFDZCxJQUFJLElBQUksR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QixJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbkQsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ2xDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2I7UUFDRCxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDbEMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDYjtRQUNELElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUNsQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNiO1FBRUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFekIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELEdBQUc7UUFDQyxPQUFPLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQzdILENBQUM7SUFFRCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQVksRUFBRSxLQUFhO1FBQ3ZDLElBQUksSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUNsQyxJQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNwRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVELE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBVyxFQUFFLFVBQVUsR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDMUQsbURBQW1EO1FBQ25ELE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbkMsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztRQUUxQixJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqQyxLQUFLLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxHQUFHLE1BQU0sR0FBRztZQUM1QyxNQUFNLEtBQUssR0FBRyxtQkFBbUIsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUM7Z0JBQ3JDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ2xELE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVGLE1BQU0sUUFBUSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTdFLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEIsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVoQixJQUFJLElBQUksS0FBSyxDQUFDO1NBQ2pCO1FBRUQsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQ3ZDLENBQUM7Q0FDSjtBQWpJRCx3QkFpSUMiLCJmaWxlIjoidXRpbC9pbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4vLyBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbi8vIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4vLyByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4vLyB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4vLyBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Vcbi8vIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbi8vIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4vLyBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuLy8gS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4vLyBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4vLyB1bmRlciB0aGUgTGljZW5zZS5cblxuY29uc3QgY2FycnlCaXQxNiA9IDEgPDwgMTY7XG5cbmZ1bmN0aW9uIGludEFzSGV4KHZhbHVlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh2YWx1ZSA8IDApIHtcbiAgICAgICAgdmFsdWUgPSAweEZGRkZGRkZGICsgdmFsdWUgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gYDB4JHt2YWx1ZS50b1N0cmluZygxNil9YDtcbn1cblxuY29uc3Qga0ludDMyRGVjaW1hbERpZ2l0cyA9IDg7XG5jb25zdCBrUG93ZXJzT2ZUZW4gPSBbMSxcbiAgICAgICAgICAgICAgICAgICAgICAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgMTAwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMDAwMDBdO1xuXG5leHBvcnQgY2xhc3MgQmFzZUludDY0IHtcbiAgICBjb25zdHJ1Y3RvciAocHJvdGVjdGVkIGJ1ZmZlcjogVWludDMyQXJyYXkpIHt9XG5cbiAgICBoaWdoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmJ1ZmZlclsxXTsgfVxuICAgIGxvdyAoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuYnVmZmVyWzBdOyB9XG5cbiAgICBwcm90ZWN0ZWQgX3RpbWVzKG90aGVyOiBCYXNlSW50NjQpIHtcbiAgICAgICAgLy8gQnJlYWsgdGhlIGxlZnQgYW5kIHJpZ2h0IG51bWJlcnMgaW50byAxNiBiaXQgY2h1bmtzXG4gICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIG11bHRpcGx5IHRoZW0gd2l0aG91dCBvdmVyZmxvdy5cbiAgICAgICAgY29uc3QgTCA9IG5ldyBVaW50MzJBcnJheShbXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlclsxXSA+Pj4gMTYsXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlclsxXSAmIDB4RkZGRixcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyWzBdID4+PiAxNixcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyWzBdICYgMHhGRkZGXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGNvbnN0IFIgPSBuZXcgVWludDMyQXJyYXkoW1xuICAgICAgICAgICAgb3RoZXIuYnVmZmVyWzFdID4+PiAxNixcbiAgICAgICAgICAgIG90aGVyLmJ1ZmZlclsxXSAmIDB4RkZGRixcbiAgICAgICAgICAgIG90aGVyLmJ1ZmZlclswXSA+Pj4gMTYsXG4gICAgICAgICAgICBvdGhlci5idWZmZXJbMF0gJiAweEZGRkZcbiAgICAgICAgXSk7XG5cbiAgICAgICAgbGV0IHByb2R1Y3QgPSBMWzNdICogUlszXTtcbiAgICAgICAgdGhpcy5idWZmZXJbMF0gPSBwcm9kdWN0ICYgMHhGRkZGO1xuXG4gICAgICAgIGxldCBzdW0gPSBwcm9kdWN0ID4+PiAxNjtcblxuICAgICAgICBwcm9kdWN0ID0gTFsyXSAqIFJbM107XG4gICAgICAgIHN1bSArPSBwcm9kdWN0O1xuXG4gICAgICAgIHByb2R1Y3QgPSAoTFszXSAqIFJbMl0pID4+PiAwO1xuICAgICAgICBzdW0gKz0gcHJvZHVjdDtcblxuICAgICAgICB0aGlzLmJ1ZmZlclswXSArPSBzdW0gPDwgMTY7XG5cbiAgICAgICAgdGhpcy5idWZmZXJbMV0gPSAoc3VtID4+PiAwIDwgcHJvZHVjdCA/IGNhcnJ5Qml0MTYgOiAwKTtcblxuICAgICAgICB0aGlzLmJ1ZmZlclsxXSArPSBzdW0gPj4+IDE2O1xuICAgICAgICB0aGlzLmJ1ZmZlclsxXSArPSBMWzFdICogUlszXSArIExbMl0gKiBSWzJdICsgTFszXSAqIFJbMV07XG4gICAgICAgIHRoaXMuYnVmZmVyWzFdICs9IChMWzBdICogUlszXSArIExbMV0gKiBSWzJdICsgTFsyXSAqIFJbMV0gKyBMWzNdICogUlswXSkgPDwgMTY7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICBwcm90ZWN0ZWQgX3BsdXMob3RoZXI6IEJhc2VJbnQ2NCkge1xuICAgICAgICBjb25zdCBzdW0gPSAodGhpcy5idWZmZXJbMF0gKyBvdGhlci5idWZmZXJbMF0pID4+PiAwO1xuICAgICAgICB0aGlzLmJ1ZmZlclsxXSArPSBvdGhlci5idWZmZXJbMV07XG4gICAgICAgIGlmIChzdW0gPCAodGhpcy5idWZmZXJbMF0gPj4+IDApKSB7XG4gICAgICAgICAgKyt0aGlzLmJ1ZmZlclsxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1ZmZlclswXSA9IHN1bTtcbiAgICB9XG5cbiAgICBsZXNzVGhhbihvdGhlcjogQmFzZUludDY0KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlclsxXSA8IG90aGVyLmJ1ZmZlclsxXSB8fFxuICAgICAgICAgICAgKHRoaXMuYnVmZmVyWzFdID09PSBvdGhlci5idWZmZXJbMV0gJiYgdGhpcy5idWZmZXJbMF0gPCBvdGhlci5idWZmZXJbMF0pO1xuICAgIH1cblxuICAgIGVxdWFscyhvdGhlcjogQmFzZUludDY0KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlclsxXSA9PT0gb3RoZXIuYnVmZmVyWzFdICYmIHRoaXMuYnVmZmVyWzBdID09IG90aGVyLmJ1ZmZlclswXTtcbiAgICB9XG5cbiAgICBncmVhdGVyVGhhbihvdGhlcjogQmFzZUludDY0KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBvdGhlci5sZXNzVGhhbih0aGlzKTtcbiAgICB9XG5cbiAgICBoZXgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke2ludEFzSGV4KHRoaXMuYnVmZmVyWzFdKX0gJHtpbnRBc0hleCh0aGlzLmJ1ZmZlclswXSl9YDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVaW50NjQgZXh0ZW5kcyBCYXNlSW50NjQge1xuICAgIHRpbWVzKG90aGVyOiBVaW50NjQpOiBVaW50NjQge1xuICAgICAgICB0aGlzLl90aW1lcyhvdGhlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHBsdXMob3RoZXI6IFVpbnQ2NCk6IFVpbnQ2NCB7XG4gICAgICAgIHRoaXMuX3BsdXMob3RoZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzdGF0aWMgbXVsdGlwbHkobGVmdDogVWludDY0LCByaWdodDogVWludDY0KTogVWludDY0IHtcbiAgICAgICAgbGV0IHJ0cm4gPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShsZWZ0LmJ1ZmZlcikpO1xuICAgICAgICByZXR1cm4gcnRybi50aW1lcyhyaWdodCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZChsZWZ0OiBVaW50NjQsIHJpZ2h0OiBVaW50NjQpOiBVaW50NjQge1xuICAgICAgICBsZXQgcnRybiA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KGxlZnQuYnVmZmVyKSk7XG4gICAgICAgIHJldHVybiBydHJuLnBsdXMocmlnaHQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludDY0IGV4dGVuZHMgQmFzZUludDY0IHtcbiAgICBuZWdhdGUoKTogSW50NjQge1xuICAgICAgICB0aGlzLmJ1ZmZlclswXSA9IH50aGlzLmJ1ZmZlclswXSArIDE7XG4gICAgICAgIHRoaXMuYnVmZmVyWzFdID0gfnRoaXMuYnVmZmVyWzFdO1xuXG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlclswXSA9PSAwKSB7ICsrdGhpcy5idWZmZXJbMV07IH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGltZXMob3RoZXI6IEludDY0KTogSW50NjQge1xuICAgICAgICB0aGlzLl90aW1lcyhvdGhlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHBsdXMob3RoZXI6IEludDY0KTogSW50NjQge1xuICAgICAgICB0aGlzLl9wbHVzKG90aGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGVzc1RoYW4ob3RoZXI6IEludDY0KTogYm9vbGVhbiB7XG4gICAgICAgIC8vIGZvcmNlIGhpZ2ggYnl0ZXMgdG8gYmUgc2lnbmVkXG4gICAgICAgIGNvbnN0IHRoaXNfaGlnaCA9IHRoaXMuYnVmZmVyWzFdIDw8IDA7XG4gICAgICAgIGNvbnN0IG90aGVyX2hpZ2ggPSBvdGhlci5idWZmZXJbMV0gPDwgMDtcbiAgICAgICAgcmV0dXJuIHRoaXNfaGlnaCA8IG90aGVyX2hpZ2ggfHxcbiAgICAgICAgICAgICh0aGlzX2hpZ2ggPT09IG90aGVyX2hpZ2ggJiYgdGhpcy5idWZmZXJbMF0gPCBvdGhlci5idWZmZXJbMF0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tU3RyaW5nKHN0cjogc3RyaW5nLCBvdXRfYnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KDIpKTogSW50NjQge1xuICAgICAgICAvLyBUT0RPOiBBc3NlcnQgdGhhdCBvdXRfYnVmZmVyIGlzIDAgYW5kIGxlbmd0aCA9IDJcbiAgICAgICAgY29uc3QgbmVnYXRlID0gc3RyLnN0YXJ0c1dpdGgoJy0nKTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gc3RyLmxlbmd0aDtcblxuICAgICAgICBsZXQgb3V0ID0gbmV3IEludDY0KG91dF9idWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBwb3NuID0gbmVnYXRlID8gMSA6IDA7IHBvc24gPCBsZW5ndGg7KSB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IGtJbnQzMkRlY2ltYWxEaWdpdHMgPCBsZW5ndGggLSBwb3NuID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAga0ludDMyRGVjaW1hbERpZ2l0cyA6IGxlbmd0aCAtIHBvc247XG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkoW3BhcnNlSW50KHN0ci5zdWJzdHIocG9zbiwgZ3JvdXApLCAxMCksIDBdKSk7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZSA9IG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkoW2tQb3dlcnNPZlRlbltncm91cF0sIDBdKSk7XG5cbiAgICAgICAgICAgIG91dC50aW1lcyhtdWx0aXBsZSk7XG4gICAgICAgICAgICBvdXQucGx1cyhjaHVuayk7XG5cbiAgICAgICAgICAgIHBvc24gKz0gZ3JvdXA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmVnYXRlID8gb3V0Lm5lZ2F0ZSgpIDogb3V0O1xuICAgIH1cblxuICAgIHN0YXRpYyBtdWx0aXBseShsZWZ0OiBJbnQ2NCwgcmlnaHQ6IEludDY0KTogSW50NjQge1xuICAgICAgICBsZXQgcnRybiA9IG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkobGVmdC5idWZmZXIpKTtcbiAgICAgICAgcmV0dXJuIHJ0cm4udGltZXMocmlnaHQpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhZGQobGVmdDogSW50NjQsIHJpZ2h0OiBJbnQ2NCk6IEludDY0IHtcbiAgICAgICAgbGV0IHJ0cm4gPSBuZXcgSW50NjQobmV3IFVpbnQzMkFycmF5KGxlZnQuYnVmZmVyKSk7XG4gICAgICAgIHJldHVybiBydHJuLnBsdXMocmlnaHQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludDEyOCB7XG4gICAgY29uc3RydWN0b3IgKHByaXZhdGUgYnVmZmVyOiBVaW50MzJBcnJheSkge1xuICAgICAgICAvLyBidWZmZXJbM10gTVNCIChoaWdoKVxuICAgICAgICAvLyBidWZmZXJbMl1cbiAgICAgICAgLy8gYnVmZmVyWzFdXG4gICAgICAgIC8vIGJ1ZmZlclswXSBMU0IgKGxvdylcbiAgICB9XG5cbiAgICBoaWdoKCk6IEludDY0IHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkodGhpcy5idWZmZXIuYnVmZmVyLCB0aGlzLmJ1ZmZlci5ieXRlT2Zmc2V0ICsgOCwgMikpO1xuICAgIH1cblxuICAgIGxvdygpOiBJbnQ2NCB7XG4gICAgICAgIHJldHVybiBuZXcgSW50NjQobmV3IFVpbnQzMkFycmF5KHRoaXMuYnVmZmVyLmJ1ZmZlciwgdGhpcy5idWZmZXIuYnl0ZU9mZnNldCwgMikpO1xuICAgIH1cblxuICAgIG5lZ2F0ZSgpOiBJbnQxMjgge1xuICAgICAgICB0aGlzLmJ1ZmZlclswXSA9IH50aGlzLmJ1ZmZlclswXSArIDE7XG4gICAgICAgIHRoaXMuYnVmZmVyWzFdID0gfnRoaXMuYnVmZmVyWzFdO1xuICAgICAgICB0aGlzLmJ1ZmZlclsyXSA9IH50aGlzLmJ1ZmZlclsyXTtcbiAgICAgICAgdGhpcy5idWZmZXJbM10gPSB+dGhpcy5idWZmZXJbM107XG5cbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyWzBdID09IDApIHsgKyt0aGlzLmJ1ZmZlclsxXTsgfVxuICAgICAgICBpZiAodGhpcy5idWZmZXJbMV0gPT0gMCkgeyArK3RoaXMuYnVmZmVyWzJdOyB9XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlclsyXSA9PSAwKSB7ICsrdGhpcy5idWZmZXJbM107IH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGltZXMob3RoZXI6IEludDEyOCk6IEludDEyOCB7XG4gICAgICAgIC8vIEJyZWFrIHRoZSBsZWZ0IGFuZCByaWdodCBudW1iZXJzIGludG8gMzIgYml0IGNodW5rc1xuICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBtdWx0aXBseSB0aGVtIHdpdGhvdXQgb3ZlcmZsb3cuXG4gICAgICAgIGNvbnN0IEwwID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkoW3RoaXMuYnVmZmVyWzNdLCAgMF0pKTtcbiAgICAgICAgY29uc3QgTDEgPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShbdGhpcy5idWZmZXJbMl0sICAwXSkpO1xuICAgICAgICBjb25zdCBMMiA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KFt0aGlzLmJ1ZmZlclsxXSwgIDBdKSk7XG4gICAgICAgIGNvbnN0IEwzID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkoW3RoaXMuYnVmZmVyWzBdLCAgMF0pKTtcblxuICAgICAgICBjb25zdCBSMCA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KFtvdGhlci5idWZmZXJbM10sIDBdKSk7XG4gICAgICAgIGNvbnN0IFIxID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkoW290aGVyLmJ1ZmZlclsyXSwgMF0pKTtcbiAgICAgICAgY29uc3QgUjIgPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShbb3RoZXIuYnVmZmVyWzFdLCAwXSkpO1xuICAgICAgICBjb25zdCBSMyA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KFtvdGhlci5idWZmZXJbMF0sIDBdKSk7XG5cbiAgICAgICAgbGV0IHByb2R1Y3QgPSBVaW50NjQubXVsdGlwbHkoTDMsIFIzKTtcbiAgICAgICAgdGhpcy5idWZmZXJbMF0gPSBwcm9kdWN0LmxvdygpO1xuXG4gICAgICAgIGxldCBzdW0gPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShbcHJvZHVjdC5oaWdoKCksIDBdKSk7XG5cbiAgICAgICAgcHJvZHVjdCA9IFVpbnQ2NC5tdWx0aXBseShMMiwgUjMpO1xuICAgICAgICBzdW0ucGx1cyhwcm9kdWN0KTtcblxuICAgICAgICBwcm9kdWN0ID0gVWludDY0Lm11bHRpcGx5KEwzLCBSMik7XG4gICAgICAgIHN1bS5wbHVzKHByb2R1Y3QpO1xuXG4gICAgICAgIHRoaXMuYnVmZmVyWzFdID0gc3VtLmxvdygpO1xuXG4gICAgICAgIHRoaXMuYnVmZmVyWzNdID0gKHN1bS5sZXNzVGhhbihwcm9kdWN0KSA/IDEgOiAwKTtcblxuICAgICAgICB0aGlzLmJ1ZmZlclsyXSA9IHN1bS5oaWdoKCk7XG4gICAgICAgIGxldCBoaWdoID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkodGhpcy5idWZmZXIuYnVmZmVyLCB0aGlzLmJ1ZmZlci5ieXRlT2Zmc2V0ICsgOCwgMikpO1xuXG4gICAgICAgIGhpZ2gucGx1cyhVaW50NjQubXVsdGlwbHkoTDEsIFIzKSlcbiAgICAgICAgICAgIC5wbHVzKFVpbnQ2NC5tdWx0aXBseShMMiwgUjIpKVxuICAgICAgICAgICAgLnBsdXMoVWludDY0Lm11bHRpcGx5KEwzLCBSMSkpO1xuICAgICAgICB0aGlzLmJ1ZmZlclszXSArPSBVaW50NjQubXVsdGlwbHkoTDAsIFIzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBsdXMoVWludDY0Lm11bHRpcGx5KEwxLCBSMikpXG4gICAgICAgICAgICAgICAgICAgICAgICAucGx1cyhVaW50NjQubXVsdGlwbHkoTDIsIFIxKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wbHVzKFVpbnQ2NC5tdWx0aXBseShMMywgUjApKS5sb3coKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwbHVzKG90aGVyOiBJbnQxMjgpOiBJbnQxMjgge1xuICAgICAgICBsZXQgc3VtcyA9IG5ldyBVaW50MzJBcnJheSg0KTtcbiAgICAgICAgc3Vtc1szXSA9ICh0aGlzLmJ1ZmZlclszXSArIG90aGVyLmJ1ZmZlclszXSkgPj4+IDA7XG4gICAgICAgIHN1bXNbMl0gPSAodGhpcy5idWZmZXJbMl0gKyBvdGhlci5idWZmZXJbMl0pID4+PiAwO1xuICAgICAgICBzdW1zWzFdID0gKHRoaXMuYnVmZmVyWzFdICsgb3RoZXIuYnVmZmVyWzFdKSA+Pj4gMDtcbiAgICAgICAgc3Vtc1swXSA9ICh0aGlzLmJ1ZmZlclswXSArIG90aGVyLmJ1ZmZlclswXSkgPj4+IDA7XG5cbiAgICAgICAgaWYgKHN1bXNbMF0gPCAodGhpcy5idWZmZXJbMF0gPj4+IDApKSB7XG4gICAgICAgICAgICArK3N1bXNbMV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1bXNbMV0gPCAodGhpcy5idWZmZXJbMV0gPj4+IDApKSB7XG4gICAgICAgICAgICArK3N1bXNbMl07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1bXNbMl0gPCAodGhpcy5idWZmZXJbMl0gPj4+IDApKSB7XG4gICAgICAgICAgICArK3N1bXNbM107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJ1ZmZlclszXSA9IHN1bXNbM107XG4gICAgICAgIHRoaXMuYnVmZmVyWzJdID0gc3Vtc1syXTtcbiAgICAgICAgdGhpcy5idWZmZXJbMV0gPSBzdW1zWzFdO1xuICAgICAgICB0aGlzLmJ1ZmZlclswXSA9IHN1bXNbMF07XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaGV4KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHtpbnRBc0hleCh0aGlzLmJ1ZmZlclszXSl9ICR7aW50QXNIZXgodGhpcy5idWZmZXJbMl0pfSAke2ludEFzSGV4KHRoaXMuYnVmZmVyWzFdKX0gJHtpbnRBc0hleCh0aGlzLmJ1ZmZlclswXSl9YDtcbiAgICB9XG5cbiAgICBzdGF0aWMgbXVsdGlwbHkobGVmdDogSW50MTI4LCByaWdodDogSW50MTI4KTogSW50MTI4IHtcbiAgICAgICAgbGV0IHJ0cm4gPSBuZXcgSW50MTI4KG5ldyBVaW50MzJBcnJheShsZWZ0LmJ1ZmZlcikpO1xuICAgICAgICByZXR1cm4gcnRybi50aW1lcyhyaWdodCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZChsZWZ0OiBJbnQxMjgsIHJpZ2h0OiBJbnQxMjgpOiBJbnQxMjgge1xuICAgICAgICBsZXQgcnRybiA9IG5ldyBJbnQxMjgobmV3IFVpbnQzMkFycmF5KGxlZnQuYnVmZmVyKSk7XG4gICAgICAgIHJldHVybiBydHJuLnBsdXMocmlnaHQpO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tU3RyaW5nKHN0cjogc3RyaW5nLCBvdXRfYnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KDQpKTogSW50MTI4IHtcbiAgICAgICAgLy8gVE9ETzogQXNzZXJ0IHRoYXQgb3V0X2J1ZmZlciBpcyAwIGFuZCBsZW5ndGggPSA0XG4gICAgICAgIGNvbnN0IG5lZ2F0ZSA9IHN0ci5zdGFydHNXaXRoKCctJyk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHN0ci5sZW5ndGg7XG5cbiAgICAgICAgbGV0IG91dCA9IG5ldyBJbnQxMjgob3V0X2J1ZmZlcik7XG4gICAgICAgIGZvciAobGV0IHBvc24gPSBuZWdhdGUgPyAxIDogMDsgcG9zbiA8IGxlbmd0aDspIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0ga0ludDMyRGVjaW1hbERpZ2l0cyA8IGxlbmd0aCAtIHBvc24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICBrSW50MzJEZWNpbWFsRGlnaXRzIDogbGVuZ3RoIC0gcG9zbjtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gbmV3IEludDEyOChuZXcgVWludDMyQXJyYXkoW3BhcnNlSW50KHN0ci5zdWJzdHIocG9zbiwgZ3JvdXApLCAxMCksIDAsIDAsIDBdKSk7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZSA9IG5ldyBJbnQxMjgobmV3IFVpbnQzMkFycmF5KFtrUG93ZXJzT2ZUZW5bZ3JvdXBdLCAwLCAwLCAwXSkpO1xuXG4gICAgICAgICAgICBvdXQudGltZXMobXVsdGlwbGUpO1xuICAgICAgICAgICAgb3V0LnBsdXMoY2h1bmspO1xuXG4gICAgICAgICAgICBwb3NuICs9IGdyb3VwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5lZ2F0ZSA/IG91dC5uZWdhdGUoKSA6IG91dDtcbiAgICB9XG59XG4iXX0=
