"use strict";
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
/** @ignore */
const carryBit16 = 1 << 16;
/** @ignore */
function intAsHex(value) {
    if (value < 0) {
        value = 0xFFFFFFFF + value + 1;
    }
    return `0x${value.toString(16)}`;
}
/** @ignore */
const kInt32DecimalDigits = 8;
/** @ignore */
const kPowersOfTen = [1,
    10,
    100,
    1000,
    10000,
    100000,
    1000000,
    10000000,
    100000000];
class BaseInt64 {
    constructor(buffer) {
        this.buffer = buffer;
    }
    high() { return this.buffer[1]; }
    low() { return this.buffer[0]; }
    _times(other) {
        // Break the left and right numbers into 16 bit chunks
        // so that we can multiply them without overflow.
        const L = new Uint32Array([
            this.buffer[1] >>> 16,
            this.buffer[1] & 0xFFFF,
            this.buffer[0] >>> 16,
            this.buffer[0] & 0xFFFF
        ]);
        const R = new Uint32Array([
            other.buffer[1] >>> 16,
            other.buffer[1] & 0xFFFF,
            other.buffer[0] >>> 16,
            other.buffer[0] & 0xFFFF
        ]);
        let product = L[3] * R[3];
        this.buffer[0] = product & 0xFFFF;
        let sum = product >>> 16;
        product = L[2] * R[3];
        sum += product;
        product = (L[3] * R[2]) >>> 0;
        sum += product;
        this.buffer[0] += sum << 16;
        this.buffer[1] = (sum >>> 0 < product ? carryBit16 : 0);
        this.buffer[1] += sum >>> 16;
        this.buffer[1] += L[1] * R[3] + L[2] * R[2] + L[3] * R[1];
        this.buffer[1] += (L[0] * R[3] + L[1] * R[2] + L[2] * R[1] + L[3] * R[0]) << 16;
        return this;
    }
    _plus(other) {
        const sum = (this.buffer[0] + other.buffer[0]) >>> 0;
        this.buffer[1] += other.buffer[1];
        if (sum < (this.buffer[0] >>> 0)) {
            ++this.buffer[1];
        }
        this.buffer[0] = sum;
    }
    lessThan(other) {
        return this.buffer[1] < other.buffer[1] ||
            (this.buffer[1] === other.buffer[1] && this.buffer[0] < other.buffer[0]);
    }
    equals(other) {
        return this.buffer[1] === other.buffer[1] && this.buffer[0] == other.buffer[0];
    }
    greaterThan(other) {
        return other.lessThan(this);
    }
    hex() {
        return `${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;
    }
}
exports.BaseInt64 = BaseInt64;
class Uint64 extends BaseInt64 {
    times(other) {
        this._times(other);
        return this;
    }
    plus(other) {
        this._plus(other);
        return this;
    }
    /** @nocollapse */
    static from(val, out_buffer = new Uint32Array(2)) {
        return Uint64.fromString(typeof (val) === 'string' ? val : val.toString(), out_buffer);
    }
    /** @nocollapse */
    static fromNumber(num, out_buffer = new Uint32Array(2)) {
        // Always parse numbers as strings - pulling out high and low bits
        // directly seems to lose precision sometimes
        // For example:
        //     > -4613034156400212000 >>> 0
        //     721782784
        // The correct lower 32-bits are 721782752
        return Uint64.fromString(num.toString(), out_buffer);
    }
    /** @nocollapse */
    static fromString(str, out_buffer = new Uint32Array(2)) {
        const length = str.length;
        let out = new Uint64(out_buffer);
        for (let posn = 0; posn < length;) {
            const group = kInt32DecimalDigits < length - posn ?
                kInt32DecimalDigits : length - posn;
            const chunk = new Uint64(new Uint32Array([parseInt(str.substr(posn, group), 10), 0]));
            const multiple = new Uint64(new Uint32Array([kPowersOfTen[group], 0]));
            out.times(multiple);
            out.plus(chunk);
            posn += group;
        }
        return out;
    }
    /** @nocollapse */
    static convertArray(values) {
        const data = new Uint32Array(values.length * 2);
        for (let i = -1, n = values.length; ++i < n;) {
            Uint64.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 2 * i * 4, 2));
        }
        return data;
    }
    /** @nocollapse */
    static multiply(left, right) {
        let rtrn = new Uint64(new Uint32Array(left.buffer));
        return rtrn.times(right);
    }
    /** @nocollapse */
    static add(left, right) {
        let rtrn = new Uint64(new Uint32Array(left.buffer));
        return rtrn.plus(right);
    }
}
exports.Uint64 = Uint64;
class Int64 extends BaseInt64 {
    negate() {
        this.buffer[0] = ~this.buffer[0] + 1;
        this.buffer[1] = ~this.buffer[1];
        if (this.buffer[0] == 0) {
            ++this.buffer[1];
        }
        return this;
    }
    times(other) {
        this._times(other);
        return this;
    }
    plus(other) {
        this._plus(other);
        return this;
    }
    lessThan(other) {
        // force high bytes to be signed
        const this_high = this.buffer[1] << 0;
        const other_high = other.buffer[1] << 0;
        return this_high < other_high ||
            (this_high === other_high && this.buffer[0] < other.buffer[0]);
    }
    /** @nocollapse */
    static from(val, out_buffer = new Uint32Array(2)) {
        return Int64.fromString(typeof (val) === 'string' ? val : val.toString(), out_buffer);
    }
    /** @nocollapse */
    static fromNumber(num, out_buffer = new Uint32Array(2)) {
        // Always parse numbers as strings - pulling out high and low bits
        // directly seems to lose precision sometimes
        // For example:
        //     > -4613034156400212000 >>> 0
        //     721782784
        // The correct lower 32-bits are 721782752
        return Int64.fromString(num.toString(), out_buffer);
    }
    /** @nocollapse */
    static fromString(str, out_buffer = new Uint32Array(2)) {
        // TODO: Assert that out_buffer is 0 and length = 2
        const negate = str.startsWith('-');
        const length = str.length;
        let out = new Int64(out_buffer);
        for (let posn = negate ? 1 : 0; posn < length;) {
            const group = kInt32DecimalDigits < length - posn ?
                kInt32DecimalDigits : length - posn;
            const chunk = new Int64(new Uint32Array([parseInt(str.substr(posn, group), 10), 0]));
            const multiple = new Int64(new Uint32Array([kPowersOfTen[group], 0]));
            out.times(multiple);
            out.plus(chunk);
            posn += group;
        }
        return negate ? out.negate() : out;
    }
    /** @nocollapse */
    static convertArray(values) {
        const data = new Uint32Array(values.length * 2);
        for (let i = -1, n = values.length; ++i < n;) {
            Int64.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 2 * i * 4, 2));
        }
        return data;
    }
    /** @nocollapse */
    static multiply(left, right) {
        let rtrn = new Int64(new Uint32Array(left.buffer));
        return rtrn.times(right);
    }
    /** @nocollapse */
    static add(left, right) {
        let rtrn = new Int64(new Uint32Array(left.buffer));
        return rtrn.plus(right);
    }
}
exports.Int64 = Int64;
class Int128 {
    constructor(buffer) {
        this.buffer = buffer;
        // buffer[3] MSB (high)
        // buffer[2]
        // buffer[1]
        // buffer[0] LSB (low)
    }
    high() {
        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));
    }
    low() {
        return new Int64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset, 2));
    }
    negate() {
        this.buffer[0] = ~this.buffer[0] + 1;
        this.buffer[1] = ~this.buffer[1];
        this.buffer[2] = ~this.buffer[2];
        this.buffer[3] = ~this.buffer[3];
        if (this.buffer[0] == 0) {
            ++this.buffer[1];
        }
        if (this.buffer[1] == 0) {
            ++this.buffer[2];
        }
        if (this.buffer[2] == 0) {
            ++this.buffer[3];
        }
        return this;
    }
    times(other) {
        // Break the left and right numbers into 32 bit chunks
        // so that we can multiply them without overflow.
        const L0 = new Uint64(new Uint32Array([this.buffer[3], 0]));
        const L1 = new Uint64(new Uint32Array([this.buffer[2], 0]));
        const L2 = new Uint64(new Uint32Array([this.buffer[1], 0]));
        const L3 = new Uint64(new Uint32Array([this.buffer[0], 0]));
        const R0 = new Uint64(new Uint32Array([other.buffer[3], 0]));
        const R1 = new Uint64(new Uint32Array([other.buffer[2], 0]));
        const R2 = new Uint64(new Uint32Array([other.buffer[1], 0]));
        const R3 = new Uint64(new Uint32Array([other.buffer[0], 0]));
        let product = Uint64.multiply(L3, R3);
        this.buffer[0] = product.low();
        let sum = new Uint64(new Uint32Array([product.high(), 0]));
        product = Uint64.multiply(L2, R3);
        sum.plus(product);
        product = Uint64.multiply(L3, R2);
        sum.plus(product);
        this.buffer[1] = sum.low();
        this.buffer[3] = (sum.lessThan(product) ? 1 : 0);
        this.buffer[2] = sum.high();
        let high = new Uint64(new Uint32Array(this.buffer.buffer, this.buffer.byteOffset + 8, 2));
        high.plus(Uint64.multiply(L1, R3))
            .plus(Uint64.multiply(L2, R2))
            .plus(Uint64.multiply(L3, R1));
        this.buffer[3] += Uint64.multiply(L0, R3)
            .plus(Uint64.multiply(L1, R2))
            .plus(Uint64.multiply(L2, R1))
            .plus(Uint64.multiply(L3, R0)).low();
        return this;
    }
    plus(other) {
        let sums = new Uint32Array(4);
        sums[3] = (this.buffer[3] + other.buffer[3]) >>> 0;
        sums[2] = (this.buffer[2] + other.buffer[2]) >>> 0;
        sums[1] = (this.buffer[1] + other.buffer[1]) >>> 0;
        sums[0] = (this.buffer[0] + other.buffer[0]) >>> 0;
        if (sums[0] < (this.buffer[0] >>> 0)) {
            ++sums[1];
        }
        if (sums[1] < (this.buffer[1] >>> 0)) {
            ++sums[2];
        }
        if (sums[2] < (this.buffer[2] >>> 0)) {
            ++sums[3];
        }
        this.buffer[3] = sums[3];
        this.buffer[2] = sums[2];
        this.buffer[1] = sums[1];
        this.buffer[0] = sums[0];
        return this;
    }
    hex() {
        return `${intAsHex(this.buffer[3])} ${intAsHex(this.buffer[2])} ${intAsHex(this.buffer[1])} ${intAsHex(this.buffer[0])}`;
    }
    /** @nocollapse */
    static multiply(left, right) {
        let rtrn = new Int128(new Uint32Array(left.buffer));
        return rtrn.times(right);
    }
    /** @nocollapse */
    static add(left, right) {
        let rtrn = new Int128(new Uint32Array(left.buffer));
        return rtrn.plus(right);
    }
    /** @nocollapse */
    static from(val, out_buffer = new Uint32Array(4)) {
        return Int128.fromString(typeof (val) === 'string' ? val : val.toString(), out_buffer);
    }
    /** @nocollapse */
    static fromNumber(num, out_buffer = new Uint32Array(4)) {
        // Always parse numbers as strings - pulling out high and low bits
        // directly seems to lose precision sometimes
        // For example:
        //     > -4613034156400212000 >>> 0
        //     721782784
        // The correct lower 32-bits are 721782752
        return Int128.fromString(num.toString(), out_buffer);
    }
    /** @nocollapse */
    static fromString(str, out_buffer = new Uint32Array(4)) {
        // TODO: Assert that out_buffer is 0 and length = 4
        const negate = str.startsWith('-');
        const length = str.length;
        let out = new Int128(out_buffer);
        for (let posn = negate ? 1 : 0; posn < length;) {
            const group = kInt32DecimalDigits < length - posn ?
                kInt32DecimalDigits : length - posn;
            const chunk = new Int128(new Uint32Array([parseInt(str.substr(posn, group), 10), 0, 0, 0]));
            const multiple = new Int128(new Uint32Array([kPowersOfTen[group], 0, 0, 0]));
            out.times(multiple);
            out.plus(chunk);
            posn += group;
        }
        return negate ? out.negate() : out;
    }
    /** @nocollapse */
    static convertArray(values) {
        // TODO: Distinguish between string and number at compile-time
        const data = new Uint32Array(values.length * 4);
        for (let i = -1, n = values.length; ++i < n;) {
            Int128.from(values[i], new Uint32Array(data.buffer, data.byteOffset + 4 * 4 * i, 4));
        }
        return data;
    }
}
exports.Int128 = Int128;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFDLElBQUksR0FBRyxJQUFJLEVBQUUsQ0FBQztRQUU1QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEtBQUssRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFaEYsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRU8sS0FBSyxDQUFDLEtBQWdCO1FBQzVCLE1BQU0sR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDaEMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2xCO1FBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDekIsQ0FBQztJQUVNLFFBQVEsQ0FBQyxLQUFnQjtRQUM1QixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbkMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakYsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFnQjtRQUMxQixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUVNLFdBQVcsQ0FBQyxLQUFnQjtRQUMvQixPQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVNLEdBQUc7UUFDTixPQUFPLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDckUsQ0FBQztDQUNKO0FBdEVELDhCQXNFQztBQUVELE1BQWEsTUFBTyxTQUFRLFNBQVM7SUFDMUIsS0FBSyxDQUFDLEtBQWE7UUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRU0sSUFBSSxDQUFDLEtBQWE7UUFDckIsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsa0JBQWtCO0lBQ1gsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFRLEVBQUUsVUFBVSxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztRQUN4RCxPQUFPLE1BQU0sQ0FBQyxVQUFVLENBQ3BCLE9BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUMvQyxVQUFVLENBQ2IsQ0FBQztJQUNOLENBQUM7SUFFRCxrQkFBa0I7SUFDWCxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQVcsRUFBRSxVQUFVLEdBQUcsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLGtFQUFrRTtRQUNsRSw2Q0FBNkM7UUFDN0MsZUFBZTtRQUNmLG1DQUFtQztRQUNuQyxnQkFBZ0I7UUFDaEIsMENBQTBDO1FBQzFDLE9BQU8sTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELGtCQUFrQjtJQUNYLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBVyxFQUFFLFVBQVUsR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDakUsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztRQUUxQixJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqQyxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsTUFBTSxHQUFHO1lBQy9CLE1BQU0sS0FBSyxHQUFHLG1CQUFtQixHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsQ0FBQztnQkFDckMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDbEQsTUFBTSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RGLE1BQU0sUUFBUSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV2RSxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BCLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFaEIsSUFBSSxJQUFJLEtBQUssQ0FBQztTQUNqQjtRQUVELE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztJQUVELGtCQUFrQjtJQUNYLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBeUI7UUFDaEQsTUFBTSxJQUFJLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNoRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRztZQUMxQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN4RjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxrQkFBa0I7SUFDWCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQVksRUFBRSxLQUFhO1FBQzlDLElBQUksSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRUQsa0JBQWtCO0lBQ1gsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUN6QyxJQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNwRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsQ0FBQztDQUNKO0FBdEVELHdCQXNFQztBQUVELE1BQWEsS0FBTSxTQUFRLFNBQVM7SUFDekIsTUFBTTtRQUNULElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVqQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDOUMsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVNLEtBQUssQ0FBQyxLQUFZO1FBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVNLElBQUksQ0FBQyxLQUFZO1FBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVNLFFBQVEsQ0FBQyxLQUFZO1FBQ3hCLGdDQUFnQztRQUNoQyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QyxPQUFPLFNBQVMsR0FBRyxVQUFVO1lBQ3pCLENBQUMsU0FBUyxLQUFLLFVBQVUsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQsa0JBQWtCO0lBQ1gsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFRLEVBQUUsVUFBVSxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztRQUN4RCxPQUFPLEtBQUssQ0FBQyxVQUFVLENBQ25CLE9BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUMvQyxVQUFVLENBQ2IsQ0FBQztJQUNOLENBQUM7SUFFRCxrQkFBa0I7SUFDWCxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQVcsRUFBRSxVQUFVLEdBQUcsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLGtFQUFrRTtRQUNsRSw2Q0FBNkM7UUFDN0MsZUFBZTtRQUNmLG1DQUFtQztRQUNuQyxnQkFBZ0I7UUFDaEIsMENBQTBDO1FBQzFDLE9BQU8sS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUVELGtCQUFrQjtJQUNYLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBVyxFQUFFLFVBQVUsR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDakUsbURBQW1EO1FBQ25ELE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbkMsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztRQUUxQixJQUFJLEdBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNoQyxLQUFLLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxHQUFHLE1BQU0sR0FBRztZQUM1QyxNQUFNLEtBQUssR0FBRyxtQkFBbUIsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUM7Z0JBQ3JDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ2xELE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRixNQUFNLFFBQVEsR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFdEUsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNwQixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRWhCLElBQUksSUFBSSxLQUFLLENBQUM7U0FDakI7UUFDRCxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFDdkMsQ0FBQztJQUVELGtCQUFrQjtJQUNYLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBeUI7UUFDaEQsTUFBTSxJQUFJLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNoRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRztZQUMxQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN2RjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxrQkFBa0I7SUFDWCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQVcsRUFBRSxLQUFZO1FBQzVDLElBQUksSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ25ELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRUQsa0JBQWtCO0lBQ1gsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFXLEVBQUUsS0FBWTtRQUN2QyxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNuRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsQ0FBQztDQUNKO0FBdkZELHNCQXVGQztBQUVELE1BQWEsTUFBTTtJQUNmLFlBQXFCLE1BQW1CO1FBQW5CLFdBQU0sR0FBTixNQUFNLENBQWE7UUFDcEMsdUJBQXVCO1FBQ3ZCLFlBQVk7UUFDWixZQUFZO1FBQ1osc0JBQXNCO0lBQzFCLENBQUM7SUFFTSxJQUFJO1FBQ1AsT0FBTyxJQUFJLEtBQUssQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6RixDQUFDO0lBRU0sR0FBRztRQUNOLE9BQU8sSUFBSSxLQUFLLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRixDQUFDO0lBRU0sTUFBTTtRQUNULElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVqQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDOUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUFFO1FBQzlDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUM5QyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRU0sS0FBSyxDQUFDLEtBQWE7UUFDdEIsc0RBQXNEO1FBQ3RELGlEQUFpRDtRQUNqRCxNQUFNLEVBQUUsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sRUFBRSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0QsTUFBTSxFQUFFLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RCxNQUFNLEVBQUUsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTdELE1BQU0sRUFBRSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0QsTUFBTSxFQUFFLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RCxNQUFNLEVBQUUsR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sRUFBRSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFN0QsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFL0IsSUFBSSxHQUFHLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNELE9BQU8sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNsQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRWxCLE9BQU8sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNsQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRWxCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRTNCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpELElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzVCLElBQUksSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTFGLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO2FBQ3hCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFFckQsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVNLElBQUksQ0FBQyxLQUFhO1FBQ3JCLElBQUksSUFBSSxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVuRCxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDbEMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDYjtRQUNELElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUNsQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNiO1FBQ0QsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ2xDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2I7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV6QixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRU0sR0FBRztRQUNOLE9BQU8sR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDN0gsQ0FBQztJQUVELGtCQUFrQjtJQUNYLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBWSxFQUFFLEtBQWE7UUFDOUMsSUFBSSxJQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDcEQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxrQkFBa0I7SUFDWCxNQUFNLENBQUMsR0FBRyxDQUFDLElBQVksRUFBRSxLQUFhO1FBQ3pDLElBQUksSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRUQsa0JBQWtCO0lBQ1gsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFRLEVBQUUsVUFBVSxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztRQUN4RCxPQUFPLE1BQU0sQ0FBQyxVQUFVLENBQ3BCLE9BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUMvQyxVQUFVLENBQ2IsQ0FBQztJQUNOLENBQUM7SUFFRCxrQkFBa0I7SUFDWCxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQVcsRUFBRSxVQUFVLEdBQUcsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLGtFQUFrRTtRQUNsRSw2Q0FBNkM7UUFDN0MsZUFBZTtRQUNmLG1DQUFtQztRQUNuQyxnQkFBZ0I7UUFDaEIsMENBQTBDO1FBQzFDLE9BQU8sTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELGtCQUFrQjtJQUNYLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBVyxFQUFFLFVBQVUsR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDakUsbURBQW1EO1FBQ25ELE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbkMsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztRQUUxQixJQUFJLEdBQUcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqQyxLQUFLLElBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxHQUFHLE1BQU0sR0FBRztZQUM1QyxNQUFNLEtBQUssR0FBRyxtQkFBbUIsR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUM7Z0JBQ3JDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ2xELE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVGLE1BQU0sUUFBUSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTdFLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEIsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVoQixJQUFJLElBQUksS0FBSyxDQUFDO1NBQ2pCO1FBRUQsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCxrQkFBa0I7SUFDWCxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQXlCO1FBQ2hELDhEQUE4RDtRQUM5RCxNQUFNLElBQUksR0FBRyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2hELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHO1lBQzFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3hGO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztDQUNKO0FBaktELHdCQWlLQyIsImZpbGUiOiJ1dGlsL2ludC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbi8vIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuLy8gZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbi8vIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbi8vIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbi8vIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuLy8gd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuLy8gc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbi8vIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4vLyBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbi8vIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbi8vIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vKiogQGlnbm9yZSAqL1xuY29uc3QgY2FycnlCaXQxNiA9IDEgPDwgMTY7XG5cbi8qKiBAaWdub3JlICovXG5mdW5jdGlvbiBpbnRBc0hleCh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodmFsdWUgPCAwKSB7XG4gICAgICAgIHZhbHVlID0gMHhGRkZGRkZGRiArIHZhbHVlICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIGAweCR7dmFsdWUudG9TdHJpbmcoMTYpfWA7XG59XG5cbi8qKiBAaWdub3JlICovXG5jb25zdCBrSW50MzJEZWNpbWFsRGlnaXRzID0gODtcbi8qKiBAaWdub3JlICovXG5jb25zdCBrUG93ZXJzT2ZUZW4gPSBbMSxcbiAgICAgICAgICAgICAgICAgICAgICAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgMTAwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAxMDAwMDAwMDBdO1xuXG5leHBvcnQgY2xhc3MgQmFzZUludDY0IHtcbiAgICBjb25zdHJ1Y3RvciAocHJvdGVjdGVkIGJ1ZmZlcjogVWludDMyQXJyYXkpIHt9XG5cbiAgICBwdWJsaWMgaGlnaCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5idWZmZXJbMV07IH1cbiAgICBwdWJsaWMgbG93ICgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5idWZmZXJbMF07IH1cblxuICAgIHByb3RlY3RlZCBfdGltZXMob3RoZXI6IEJhc2VJbnQ2NCkge1xuICAgICAgICAvLyBCcmVhayB0aGUgbGVmdCBhbmQgcmlnaHQgbnVtYmVycyBpbnRvIDE2IGJpdCBjaHVua3NcbiAgICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gbXVsdGlwbHkgdGhlbSB3aXRob3V0IG92ZXJmbG93LlxuICAgICAgICBjb25zdCBMID0gbmV3IFVpbnQzMkFycmF5KFtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyWzFdID4+PiAxNixcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyWzFdICYgMHhGRkZGLFxuICAgICAgICAgICAgdGhpcy5idWZmZXJbMF0gPj4+IDE2LFxuICAgICAgICAgICAgdGhpcy5idWZmZXJbMF0gJiAweEZGRkZcbiAgICAgICAgXSk7XG5cbiAgICAgICAgY29uc3QgUiA9IG5ldyBVaW50MzJBcnJheShbXG4gICAgICAgICAgICBvdGhlci5idWZmZXJbMV0gPj4+IDE2LFxuICAgICAgICAgICAgb3RoZXIuYnVmZmVyWzFdICYgMHhGRkZGLFxuICAgICAgICAgICAgb3RoZXIuYnVmZmVyWzBdID4+PiAxNixcbiAgICAgICAgICAgIG90aGVyLmJ1ZmZlclswXSAmIDB4RkZGRlxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgcHJvZHVjdCA9IExbM10gKiBSWzNdO1xuICAgICAgICB0aGlzLmJ1ZmZlclswXSA9IHByb2R1Y3QgJiAweEZGRkY7XG5cbiAgICAgICAgbGV0IHN1bSA9IHByb2R1Y3QgPj4+IDE2O1xuXG4gICAgICAgIHByb2R1Y3QgPSBMWzJdICogUlszXTtcbiAgICAgICAgc3VtICs9IHByb2R1Y3Q7XG5cbiAgICAgICAgcHJvZHVjdCA9IChMWzNdICogUlsyXSkgPj4+IDA7XG4gICAgICAgIHN1bSArPSBwcm9kdWN0O1xuXG4gICAgICAgIHRoaXMuYnVmZmVyWzBdICs9IHN1bSA8PCAxNjtcblxuICAgICAgICB0aGlzLmJ1ZmZlclsxXSA9IChzdW0gPj4+IDAgPCBwcm9kdWN0ID8gY2FycnlCaXQxNiA6IDApO1xuXG4gICAgICAgIHRoaXMuYnVmZmVyWzFdICs9IHN1bSA+Pj4gMTY7XG4gICAgICAgIHRoaXMuYnVmZmVyWzFdICs9IExbMV0gKiBSWzNdICsgTFsyXSAqIFJbMl0gKyBMWzNdICogUlsxXTtcbiAgICAgICAgdGhpcy5idWZmZXJbMV0gKz0gKExbMF0gKiBSWzNdICsgTFsxXSAqIFJbMl0gKyBMWzJdICogUlsxXSArIExbM10gKiBSWzBdKSA8PCAxNjtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgIHByb3RlY3RlZCBfcGx1cyhvdGhlcjogQmFzZUludDY0KSB7XG4gICAgICAgIGNvbnN0IHN1bSA9ICh0aGlzLmJ1ZmZlclswXSArIG90aGVyLmJ1ZmZlclswXSkgPj4+IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyWzFdICs9IG90aGVyLmJ1ZmZlclsxXTtcbiAgICAgICAgaWYgKHN1bSA8ICh0aGlzLmJ1ZmZlclswXSA+Pj4gMCkpIHtcbiAgICAgICAgICArK3RoaXMuYnVmZmVyWzFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVmZmVyWzBdID0gc3VtO1xuICAgIH1cblxuICAgIHB1YmxpYyBsZXNzVGhhbihvdGhlcjogQmFzZUludDY0KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlclsxXSA8IG90aGVyLmJ1ZmZlclsxXSB8fFxuICAgICAgICAgICAgKHRoaXMuYnVmZmVyWzFdID09PSBvdGhlci5idWZmZXJbMV0gJiYgdGhpcy5idWZmZXJbMF0gPCBvdGhlci5idWZmZXJbMF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBlcXVhbHMob3RoZXI6IEJhc2VJbnQ2NCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJbMV0gPT09IG90aGVyLmJ1ZmZlclsxXSAmJiB0aGlzLmJ1ZmZlclswXSA9PSBvdGhlci5idWZmZXJbMF07XG4gICAgfVxuXG4gICAgcHVibGljIGdyZWF0ZXJUaGFuKG90aGVyOiBCYXNlSW50NjQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIG90aGVyLmxlc3NUaGFuKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBoZXgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke2ludEFzSGV4KHRoaXMuYnVmZmVyWzFdKX0gJHtpbnRBc0hleCh0aGlzLmJ1ZmZlclswXSl9YDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBVaW50NjQgZXh0ZW5kcyBCYXNlSW50NjQge1xuICAgIHB1YmxpYyB0aW1lcyhvdGhlcjogVWludDY0KTogVWludDY0IHtcbiAgICAgICAgdGhpcy5fdGltZXMob3RoZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgcGx1cyhvdGhlcjogVWludDY0KTogVWludDY0IHtcbiAgICAgICAgdGhpcy5fcGx1cyhvdGhlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbSh2YWw6IGFueSwgb3V0X2J1ZmZlciA9IG5ldyBVaW50MzJBcnJheSgyKSk6IFVpbnQ2NCB7XG4gICAgICAgIHJldHVybiBVaW50NjQuZnJvbVN0cmluZyhcbiAgICAgICAgICAgIHR5cGVvZih2YWwpID09PSAnc3RyaW5nJyA/IHZhbCA6IHZhbC50b1N0cmluZygpLFxuICAgICAgICAgICAgb3V0X2J1ZmZlclxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbU51bWJlcihudW06IG51bWJlciwgb3V0X2J1ZmZlciA9IG5ldyBVaW50MzJBcnJheSgyKSk6IFVpbnQ2NCB7XG4gICAgICAgIC8vIEFsd2F5cyBwYXJzZSBudW1iZXJzIGFzIHN0cmluZ3MgLSBwdWxsaW5nIG91dCBoaWdoIGFuZCBsb3cgYml0c1xuICAgICAgICAvLyBkaXJlY3RseSBzZWVtcyB0byBsb3NlIHByZWNpc2lvbiBzb21ldGltZXNcbiAgICAgICAgLy8gRm9yIGV4YW1wbGU6XG4gICAgICAgIC8vICAgICA+IC00NjEzMDM0MTU2NDAwMjEyMDAwID4+PiAwXG4gICAgICAgIC8vICAgICA3MjE3ODI3ODRcbiAgICAgICAgLy8gVGhlIGNvcnJlY3QgbG93ZXIgMzItYml0cyBhcmUgNzIxNzgyNzUyXG4gICAgICAgIHJldHVybiBVaW50NjQuZnJvbVN0cmluZyhudW0udG9TdHJpbmcoKSwgb3V0X2J1ZmZlcik7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgcHVibGljIHN0YXRpYyBmcm9tU3RyaW5nKHN0cjogc3RyaW5nLCBvdXRfYnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KDIpKTogVWludDY0IHtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gc3RyLmxlbmd0aDtcblxuICAgICAgICBsZXQgb3V0ID0gbmV3IFVpbnQ2NChvdXRfYnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgcG9zbiA9IDA7IHBvc24gPCBsZW5ndGg7KSB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IGtJbnQzMkRlY2ltYWxEaWdpdHMgPCBsZW5ndGggLSBwb3NuID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAga0ludDMyRGVjaW1hbERpZ2l0cyA6IGxlbmd0aCAtIHBvc247XG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KFtwYXJzZUludChzdHIuc3Vic3RyKHBvc24sIGdyb3VwKSwgMTApLCAwXSkpO1xuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGUgPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShba1Bvd2Vyc09mVGVuW2dyb3VwXSwgMF0pKTtcblxuICAgICAgICAgICAgb3V0LnRpbWVzKG11bHRpcGxlKTtcbiAgICAgICAgICAgIG91dC5wbHVzKGNodW5rKTtcblxuICAgICAgICAgICAgcG9zbiArPSBncm91cDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgcHVibGljIHN0YXRpYyBjb252ZXJ0QXJyYXkodmFsdWVzOiAoc3RyaW5nfG51bWJlcilbXSk6IFVpbnQzMkFycmF5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheSh2YWx1ZXMubGVuZ3RoICogMik7XG4gICAgICAgIGZvciAobGV0IGkgPSAtMSwgbiA9IHZhbHVlcy5sZW5ndGg7ICsraSA8IG47KSB7XG4gICAgICAgICAgICBVaW50NjQuZnJvbSh2YWx1ZXNbaV0sIG5ldyBVaW50MzJBcnJheShkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0ICsgMiAqIGkgKiA0LCAyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgcHVibGljIHN0YXRpYyBtdWx0aXBseShsZWZ0OiBVaW50NjQsIHJpZ2h0OiBVaW50NjQpOiBVaW50NjQge1xuICAgICAgICBsZXQgcnRybiA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KGxlZnQuYnVmZmVyKSk7XG4gICAgICAgIHJldHVybiBydHJuLnRpbWVzKHJpZ2h0KTtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBwdWJsaWMgc3RhdGljIGFkZChsZWZ0OiBVaW50NjQsIHJpZ2h0OiBVaW50NjQpOiBVaW50NjQge1xuICAgICAgICBsZXQgcnRybiA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KGxlZnQuYnVmZmVyKSk7XG4gICAgICAgIHJldHVybiBydHJuLnBsdXMocmlnaHQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludDY0IGV4dGVuZHMgQmFzZUludDY0IHtcbiAgICBwdWJsaWMgbmVnYXRlKCk6IEludDY0IHtcbiAgICAgICAgdGhpcy5idWZmZXJbMF0gPSB+dGhpcy5idWZmZXJbMF0gKyAxO1xuICAgICAgICB0aGlzLmJ1ZmZlclsxXSA9IH50aGlzLmJ1ZmZlclsxXTtcblxuICAgICAgICBpZiAodGhpcy5idWZmZXJbMF0gPT0gMCkgeyArK3RoaXMuYnVmZmVyWzFdOyB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyB0aW1lcyhvdGhlcjogSW50NjQpOiBJbnQ2NCB7XG4gICAgICAgIHRoaXMuX3RpbWVzKG90aGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIHBsdXMob3RoZXI6IEludDY0KTogSW50NjQge1xuICAgICAgICB0aGlzLl9wbHVzKG90aGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIGxlc3NUaGFuKG90aGVyOiBJbnQ2NCk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBmb3JjZSBoaWdoIGJ5dGVzIHRvIGJlIHNpZ25lZFxuICAgICAgICBjb25zdCB0aGlzX2hpZ2ggPSB0aGlzLmJ1ZmZlclsxXSA8PCAwO1xuICAgICAgICBjb25zdCBvdGhlcl9oaWdoID0gb3RoZXIuYnVmZmVyWzFdIDw8IDA7XG4gICAgICAgIHJldHVybiB0aGlzX2hpZ2ggPCBvdGhlcl9oaWdoIHx8XG4gICAgICAgICAgICAodGhpc19oaWdoID09PSBvdGhlcl9oaWdoICYmIHRoaXMuYnVmZmVyWzBdIDwgb3RoZXIuYnVmZmVyWzBdKTtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBwdWJsaWMgc3RhdGljIGZyb20odmFsOiBhbnksIG91dF9idWZmZXIgPSBuZXcgVWludDMyQXJyYXkoMikpOiBJbnQ2NCB7XG4gICAgICAgIHJldHVybiBJbnQ2NC5mcm9tU3RyaW5nKFxuICAgICAgICAgICAgdHlwZW9mKHZhbCkgPT09ICdzdHJpbmcnID8gdmFsIDogdmFsLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBvdXRfYnVmZmVyXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgcHVibGljIHN0YXRpYyBmcm9tTnVtYmVyKG51bTogbnVtYmVyLCBvdXRfYnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KDIpKTogSW50NjQge1xuICAgICAgICAvLyBBbHdheXMgcGFyc2UgbnVtYmVycyBhcyBzdHJpbmdzIC0gcHVsbGluZyBvdXQgaGlnaCBhbmQgbG93IGJpdHNcbiAgICAgICAgLy8gZGlyZWN0bHkgc2VlbXMgdG8gbG9zZSBwcmVjaXNpb24gc29tZXRpbWVzXG4gICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAvLyAgICAgPiAtNDYxMzAzNDE1NjQwMDIxMjAwMCA+Pj4gMFxuICAgICAgICAvLyAgICAgNzIxNzgyNzg0XG4gICAgICAgIC8vIFRoZSBjb3JyZWN0IGxvd2VyIDMyLWJpdHMgYXJlIDcyMTc4Mjc1MlxuICAgICAgICByZXR1cm4gSW50NjQuZnJvbVN0cmluZyhudW0udG9TdHJpbmcoKSwgb3V0X2J1ZmZlcik7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgcHVibGljIHN0YXRpYyBmcm9tU3RyaW5nKHN0cjogc3RyaW5nLCBvdXRfYnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KDIpKTogSW50NjQge1xuICAgICAgICAvLyBUT0RPOiBBc3NlcnQgdGhhdCBvdXRfYnVmZmVyIGlzIDAgYW5kIGxlbmd0aCA9IDJcbiAgICAgICAgY29uc3QgbmVnYXRlID0gc3RyLnN0YXJ0c1dpdGgoJy0nKTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gc3RyLmxlbmd0aDtcblxuICAgICAgICBsZXQgb3V0ID0gbmV3IEludDY0KG91dF9idWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBwb3NuID0gbmVnYXRlID8gMSA6IDA7IHBvc24gPCBsZW5ndGg7KSB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IGtJbnQzMkRlY2ltYWxEaWdpdHMgPCBsZW5ndGggLSBwb3NuID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAga0ludDMyRGVjaW1hbERpZ2l0cyA6IGxlbmd0aCAtIHBvc247XG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkoW3BhcnNlSW50KHN0ci5zdWJzdHIocG9zbiwgZ3JvdXApLCAxMCksIDBdKSk7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZSA9IG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkoW2tQb3dlcnNPZlRlbltncm91cF0sIDBdKSk7XG5cbiAgICAgICAgICAgIG91dC50aW1lcyhtdWx0aXBsZSk7XG4gICAgICAgICAgICBvdXQucGx1cyhjaHVuayk7XG5cbiAgICAgICAgICAgIHBvc24gKz0gZ3JvdXA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5lZ2F0ZSA/IG91dC5uZWdhdGUoKSA6IG91dDtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnRBcnJheSh2YWx1ZXM6IChzdHJpbmd8bnVtYmVyKVtdKTogVWludDMyQXJyYXkge1xuICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQzMkFycmF5KHZhbHVlcy5sZW5ndGggKiAyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IC0xLCBuID0gdmFsdWVzLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgICAgICAgIEludDY0LmZyb20odmFsdWVzW2ldLCBuZXcgVWludDMyQXJyYXkoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCArIDIgKiBpICogNCwgMikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHB1YmxpYyBzdGF0aWMgbXVsdGlwbHkobGVmdDogSW50NjQsIHJpZ2h0OiBJbnQ2NCk6IEludDY0IHtcbiAgICAgICAgbGV0IHJ0cm4gPSBuZXcgSW50NjQobmV3IFVpbnQzMkFycmF5KGxlZnQuYnVmZmVyKSk7XG4gICAgICAgIHJldHVybiBydHJuLnRpbWVzKHJpZ2h0KTtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBwdWJsaWMgc3RhdGljIGFkZChsZWZ0OiBJbnQ2NCwgcmlnaHQ6IEludDY0KTogSW50NjQge1xuICAgICAgICBsZXQgcnRybiA9IG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkobGVmdC5idWZmZXIpKTtcbiAgICAgICAgcmV0dXJuIHJ0cm4ucGx1cyhyaWdodCk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW50MTI4IHtcbiAgICBjb25zdHJ1Y3RvciAocHJpdmF0ZSBidWZmZXI6IFVpbnQzMkFycmF5KSB7XG4gICAgICAgIC8vIGJ1ZmZlclszXSBNU0IgKGhpZ2gpXG4gICAgICAgIC8vIGJ1ZmZlclsyXVxuICAgICAgICAvLyBidWZmZXJbMV1cbiAgICAgICAgLy8gYnVmZmVyWzBdIExTQiAobG93KVxuICAgIH1cblxuICAgIHB1YmxpYyBoaWdoKCk6IEludDY0IHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnQ2NChuZXcgVWludDMyQXJyYXkodGhpcy5idWZmZXIuYnVmZmVyLCB0aGlzLmJ1ZmZlci5ieXRlT2Zmc2V0ICsgOCwgMikpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb3coKTogSW50NjQge1xuICAgICAgICByZXR1cm4gbmV3IEludDY0KG5ldyBVaW50MzJBcnJheSh0aGlzLmJ1ZmZlci5idWZmZXIsIHRoaXMuYnVmZmVyLmJ5dGVPZmZzZXQsIDIpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbmVnYXRlKCk6IEludDEyOCB7XG4gICAgICAgIHRoaXMuYnVmZmVyWzBdID0gfnRoaXMuYnVmZmVyWzBdICsgMTtcbiAgICAgICAgdGhpcy5idWZmZXJbMV0gPSB+dGhpcy5idWZmZXJbMV07XG4gICAgICAgIHRoaXMuYnVmZmVyWzJdID0gfnRoaXMuYnVmZmVyWzJdO1xuICAgICAgICB0aGlzLmJ1ZmZlclszXSA9IH50aGlzLmJ1ZmZlclszXTtcblxuICAgICAgICBpZiAodGhpcy5idWZmZXJbMF0gPT0gMCkgeyArK3RoaXMuYnVmZmVyWzFdOyB9XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlclsxXSA9PSAwKSB7ICsrdGhpcy5idWZmZXJbMl07IH1cbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyWzJdID09IDApIHsgKyt0aGlzLmJ1ZmZlclszXTsgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgdGltZXMob3RoZXI6IEludDEyOCk6IEludDEyOCB7XG4gICAgICAgIC8vIEJyZWFrIHRoZSBsZWZ0IGFuZCByaWdodCBudW1iZXJzIGludG8gMzIgYml0IGNodW5rc1xuICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBtdWx0aXBseSB0aGVtIHdpdGhvdXQgb3ZlcmZsb3cuXG4gICAgICAgIGNvbnN0IEwwID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkoW3RoaXMuYnVmZmVyWzNdLCAgMF0pKTtcbiAgICAgICAgY29uc3QgTDEgPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShbdGhpcy5idWZmZXJbMl0sICAwXSkpO1xuICAgICAgICBjb25zdCBMMiA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KFt0aGlzLmJ1ZmZlclsxXSwgIDBdKSk7XG4gICAgICAgIGNvbnN0IEwzID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkoW3RoaXMuYnVmZmVyWzBdLCAgMF0pKTtcblxuICAgICAgICBjb25zdCBSMCA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KFtvdGhlci5idWZmZXJbM10sIDBdKSk7XG4gICAgICAgIGNvbnN0IFIxID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkoW290aGVyLmJ1ZmZlclsyXSwgMF0pKTtcbiAgICAgICAgY29uc3QgUjIgPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShbb3RoZXIuYnVmZmVyWzFdLCAwXSkpO1xuICAgICAgICBjb25zdCBSMyA9IG5ldyBVaW50NjQobmV3IFVpbnQzMkFycmF5KFtvdGhlci5idWZmZXJbMF0sIDBdKSk7XG5cbiAgICAgICAgbGV0IHByb2R1Y3QgPSBVaW50NjQubXVsdGlwbHkoTDMsIFIzKTtcbiAgICAgICAgdGhpcy5idWZmZXJbMF0gPSBwcm9kdWN0LmxvdygpO1xuXG4gICAgICAgIGxldCBzdW0gPSBuZXcgVWludDY0KG5ldyBVaW50MzJBcnJheShbcHJvZHVjdC5oaWdoKCksIDBdKSk7XG5cbiAgICAgICAgcHJvZHVjdCA9IFVpbnQ2NC5tdWx0aXBseShMMiwgUjMpO1xuICAgICAgICBzdW0ucGx1cyhwcm9kdWN0KTtcblxuICAgICAgICBwcm9kdWN0ID0gVWludDY0Lm11bHRpcGx5KEwzLCBSMik7XG4gICAgICAgIHN1bS5wbHVzKHByb2R1Y3QpO1xuXG4gICAgICAgIHRoaXMuYnVmZmVyWzFdID0gc3VtLmxvdygpO1xuXG4gICAgICAgIHRoaXMuYnVmZmVyWzNdID0gKHN1bS5sZXNzVGhhbihwcm9kdWN0KSA/IDEgOiAwKTtcblxuICAgICAgICB0aGlzLmJ1ZmZlclsyXSA9IHN1bS5oaWdoKCk7XG4gICAgICAgIGxldCBoaWdoID0gbmV3IFVpbnQ2NChuZXcgVWludDMyQXJyYXkodGhpcy5idWZmZXIuYnVmZmVyLCB0aGlzLmJ1ZmZlci5ieXRlT2Zmc2V0ICsgOCwgMikpO1xuXG4gICAgICAgIGhpZ2gucGx1cyhVaW50NjQubXVsdGlwbHkoTDEsIFIzKSlcbiAgICAgICAgICAgIC5wbHVzKFVpbnQ2NC5tdWx0aXBseShMMiwgUjIpKVxuICAgICAgICAgICAgLnBsdXMoVWludDY0Lm11bHRpcGx5KEwzLCBSMSkpO1xuICAgICAgICB0aGlzLmJ1ZmZlclszXSArPSBVaW50NjQubXVsdGlwbHkoTDAsIFIzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBsdXMoVWludDY0Lm11bHRpcGx5KEwxLCBSMikpXG4gICAgICAgICAgICAgICAgICAgICAgICAucGx1cyhVaW50NjQubXVsdGlwbHkoTDIsIFIxKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wbHVzKFVpbnQ2NC5tdWx0aXBseShMMywgUjApKS5sb3coKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgcGx1cyhvdGhlcjogSW50MTI4KTogSW50MTI4IHtcbiAgICAgICAgbGV0IHN1bXMgPSBuZXcgVWludDMyQXJyYXkoNCk7XG4gICAgICAgIHN1bXNbM10gPSAodGhpcy5idWZmZXJbM10gKyBvdGhlci5idWZmZXJbM10pID4+PiAwO1xuICAgICAgICBzdW1zWzJdID0gKHRoaXMuYnVmZmVyWzJdICsgb3RoZXIuYnVmZmVyWzJdKSA+Pj4gMDtcbiAgICAgICAgc3Vtc1sxXSA9ICh0aGlzLmJ1ZmZlclsxXSArIG90aGVyLmJ1ZmZlclsxXSkgPj4+IDA7XG4gICAgICAgIHN1bXNbMF0gPSAodGhpcy5idWZmZXJbMF0gKyBvdGhlci5idWZmZXJbMF0pID4+PiAwO1xuXG4gICAgICAgIGlmIChzdW1zWzBdIDwgKHRoaXMuYnVmZmVyWzBdID4+PiAwKSkge1xuICAgICAgICAgICAgKytzdW1zWzFdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdW1zWzFdIDwgKHRoaXMuYnVmZmVyWzFdID4+PiAwKSkge1xuICAgICAgICAgICAgKytzdW1zWzJdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdW1zWzJdIDwgKHRoaXMuYnVmZmVyWzJdID4+PiAwKSkge1xuICAgICAgICAgICAgKytzdW1zWzNdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5idWZmZXJbM10gPSBzdW1zWzNdO1xuICAgICAgICB0aGlzLmJ1ZmZlclsyXSA9IHN1bXNbMl07XG4gICAgICAgIHRoaXMuYnVmZmVyWzFdID0gc3Vtc1sxXTtcbiAgICAgICAgdGhpcy5idWZmZXJbMF0gPSBzdW1zWzBdO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBoZXgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke2ludEFzSGV4KHRoaXMuYnVmZmVyWzNdKX0gJHtpbnRBc0hleCh0aGlzLmJ1ZmZlclsyXSl9ICR7aW50QXNIZXgodGhpcy5idWZmZXJbMV0pfSAke2ludEFzSGV4KHRoaXMuYnVmZmVyWzBdKX1gO1xuICAgIH1cblxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHB1YmxpYyBzdGF0aWMgbXVsdGlwbHkobGVmdDogSW50MTI4LCByaWdodDogSW50MTI4KTogSW50MTI4IHtcbiAgICAgICAgbGV0IHJ0cm4gPSBuZXcgSW50MTI4KG5ldyBVaW50MzJBcnJheShsZWZ0LmJ1ZmZlcikpO1xuICAgICAgICByZXR1cm4gcnRybi50aW1lcyhyaWdodCk7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgcHVibGljIHN0YXRpYyBhZGQobGVmdDogSW50MTI4LCByaWdodDogSW50MTI4KTogSW50MTI4IHtcbiAgICAgICAgbGV0IHJ0cm4gPSBuZXcgSW50MTI4KG5ldyBVaW50MzJBcnJheShsZWZ0LmJ1ZmZlcikpO1xuICAgICAgICByZXR1cm4gcnRybi5wbHVzKHJpZ2h0KTtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBwdWJsaWMgc3RhdGljIGZyb20odmFsOiBhbnksIG91dF9idWZmZXIgPSBuZXcgVWludDMyQXJyYXkoNCkpOiBJbnQxMjgge1xuICAgICAgICByZXR1cm4gSW50MTI4LmZyb21TdHJpbmcoXG4gICAgICAgICAgICB0eXBlb2YodmFsKSA9PT0gJ3N0cmluZycgPyB2YWwgOiB2YWwudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG91dF9idWZmZXJcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBwdWJsaWMgc3RhdGljIGZyb21OdW1iZXIobnVtOiBudW1iZXIsIG91dF9idWZmZXIgPSBuZXcgVWludDMyQXJyYXkoNCkpOiBJbnQxMjgge1xuICAgICAgICAvLyBBbHdheXMgcGFyc2UgbnVtYmVycyBhcyBzdHJpbmdzIC0gcHVsbGluZyBvdXQgaGlnaCBhbmQgbG93IGJpdHNcbiAgICAgICAgLy8gZGlyZWN0bHkgc2VlbXMgdG8gbG9zZSBwcmVjaXNpb24gc29tZXRpbWVzXG4gICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAvLyAgICAgPiAtNDYxMzAzNDE1NjQwMDIxMjAwMCA+Pj4gMFxuICAgICAgICAvLyAgICAgNzIxNzgyNzg0XG4gICAgICAgIC8vIFRoZSBjb3JyZWN0IGxvd2VyIDMyLWJpdHMgYXJlIDcyMTc4Mjc1MlxuICAgICAgICByZXR1cm4gSW50MTI4LmZyb21TdHJpbmcobnVtLnRvU3RyaW5nKCksIG91dF9idWZmZXIpO1xuICAgIH1cblxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbVN0cmluZyhzdHI6IHN0cmluZywgb3V0X2J1ZmZlciA9IG5ldyBVaW50MzJBcnJheSg0KSk6IEludDEyOCB7XG4gICAgICAgIC8vIFRPRE86IEFzc2VydCB0aGF0IG91dF9idWZmZXIgaXMgMCBhbmQgbGVuZ3RoID0gNFxuICAgICAgICBjb25zdCBuZWdhdGUgPSBzdHIuc3RhcnRzV2l0aCgnLScpO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBzdHIubGVuZ3RoO1xuXG4gICAgICAgIGxldCBvdXQgPSBuZXcgSW50MTI4KG91dF9idWZmZXIpO1xuICAgICAgICBmb3IgKGxldCBwb3NuID0gbmVnYXRlID8gMSA6IDA7IHBvc24gPCBsZW5ndGg7KSB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IGtJbnQzMkRlY2ltYWxEaWdpdHMgPCBsZW5ndGggLSBwb3NuID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAga0ludDMyRGVjaW1hbERpZ2l0cyA6IGxlbmd0aCAtIHBvc247XG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IG5ldyBJbnQxMjgobmV3IFVpbnQzMkFycmF5KFtwYXJzZUludChzdHIuc3Vic3RyKHBvc24sIGdyb3VwKSwgMTApLCAwLCAwLCAwXSkpO1xuICAgICAgICAgICAgY29uc3QgbXVsdGlwbGUgPSBuZXcgSW50MTI4KG5ldyBVaW50MzJBcnJheShba1Bvd2Vyc09mVGVuW2dyb3VwXSwgMCwgMCwgMF0pKTtcblxuICAgICAgICAgICAgb3V0LnRpbWVzKG11bHRpcGxlKTtcbiAgICAgICAgICAgIG91dC5wbHVzKGNodW5rKTtcblxuICAgICAgICAgICAgcG9zbiArPSBncm91cDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZWdhdGUgPyBvdXQubmVnYXRlKCkgOiBvdXQ7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgcHVibGljIHN0YXRpYyBjb252ZXJ0QXJyYXkodmFsdWVzOiAoc3RyaW5nfG51bWJlcilbXSk6IFVpbnQzMkFycmF5IHtcbiAgICAgICAgLy8gVE9ETzogRGlzdGluZ3Vpc2ggYmV0d2VlbiBzdHJpbmcgYW5kIG51bWJlciBhdCBjb21waWxlLXRpbWVcbiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheSh2YWx1ZXMubGVuZ3RoICogNCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAtMSwgbiA9IHZhbHVlcy5sZW5ndGg7ICsraSA8IG47KSB7XG4gICAgICAgICAgICBJbnQxMjguZnJvbSh2YWx1ZXNbaV0sIG5ldyBVaW50MzJBcnJheShkYXRhLmJ1ZmZlciwgZGF0YS5ieXRlT2Zmc2V0ICsgNCAqIDQgKiBpLCA0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxufVxuIl19
