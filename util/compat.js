"use strict";
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
const interfaces_1 = require("../io/interfaces");
/** @ignore */
const [BigIntCtor, BigIntAvailable] = (() => {
    const BigIntUnavailableError = () => { throw new Error('BigInt is not available in this environment'); };
    function BigIntUnavailable() { throw BigIntUnavailableError(); }
    BigIntUnavailable.asIntN = () => { throw BigIntUnavailableError(); };
    BigIntUnavailable.asUintN = () => { throw BigIntUnavailableError(); };
    return typeof BigInt !== 'undefined' ? [BigInt, true] : [BigIntUnavailable, false];
})();
exports.BigInt = BigIntCtor;
exports.BigIntAvailable = BigIntAvailable;
/** @ignore */
const [BigInt64ArrayCtor, BigInt64ArrayAvailable] = (() => {
    const BigInt64ArrayUnavailableError = () => { throw new Error('BigInt64Array is not available in this environment'); };
    class BigInt64ArrayUnavailable {
        static get BYTES_PER_ELEMENT() { return 8; }
        static of() { throw BigInt64ArrayUnavailableError(); }
        static from() { throw BigInt64ArrayUnavailableError(); }
        constructor() { throw BigInt64ArrayUnavailableError(); }
    }
    return typeof BigInt64Array !== 'undefined' ? [BigInt64Array, true] : [BigInt64ArrayUnavailable, false];
})();
exports.BigInt64Array = BigInt64ArrayCtor;
exports.BigInt64ArrayAvailable = BigInt64ArrayAvailable;
/** @ignore */
const [BigUint64ArrayCtor, BigUint64ArrayAvailable] = (() => {
    const BigUint64ArrayUnavailableError = () => { throw new Error('BigUint64Array is not available in this environment'); };
    class BigUint64ArrayUnavailable {
        static get BYTES_PER_ELEMENT() { return 8; }
        static of() { throw BigUint64ArrayUnavailableError(); }
        static from() { throw BigUint64ArrayUnavailableError(); }
        constructor() { throw BigUint64ArrayUnavailableError(); }
    }
    return typeof BigUint64Array !== 'undefined' ? [BigUint64Array, true] : [BigUint64ArrayUnavailable, false];
})();
exports.BigUint64Array = BigUint64ArrayCtor;
exports.BigUint64ArrayAvailable = BigUint64ArrayAvailable;
/** @ignore */ const isNumber = (x) => typeof x === 'number';
/** @ignore */ const isBoolean = (x) => typeof x === 'boolean';
/** @ignore */ const isFunction = (x) => typeof x === 'function';
/** @ignore */
exports.isObject = (x) => x != null && Object(x) === x;
/** @ignore */
exports.isPromise = (x) => {
    return exports.isObject(x) && isFunction(x.then);
};
/** @ignore */
exports.isObservable = (x) => {
    return exports.isObject(x) && isFunction(x.subscribe);
};
/** @ignore */
exports.isIterable = (x) => {
    return exports.isObject(x) && isFunction(x[Symbol.iterator]);
};
/** @ignore */
exports.isAsyncIterable = (x) => {
    return exports.isObject(x) && isFunction(x[Symbol.asyncIterator]);
};
/** @ignore */
exports.isArrowJSON = (x) => {
    return exports.isObject(x) && exports.isObject(x['schema']);
};
/** @ignore */
exports.isArrayLike = (x) => {
    return exports.isObject(x) && isNumber(x['length']);
};
/** @ignore */
exports.isIteratorResult = (x) => {
    return exports.isObject(x) && ('done' in x) && ('value' in x);
};
/** @ignore */
exports.isUnderlyingSink = (x) => {
    return exports.isObject(x) &&
        isFunction(x['abort']) &&
        isFunction(x['close']) &&
        isFunction(x['start']) &&
        isFunction(x['write']);
};
/** @ignore */
exports.isFileHandle = (x) => {
    return exports.isObject(x) && isFunction(x['stat']) && isNumber(x['fd']);
};
/** @ignore */
exports.isFSReadStream = (x) => {
    return exports.isReadableNodeStream(x) && isNumber(x['bytesRead']);
};
/** @ignore */
exports.isFetchResponse = (x) => {
    return exports.isObject(x) && exports.isReadableDOMStream(x['body']);
};
/** @ignore */
exports.isWritableDOMStream = (x) => {
    return exports.isObject(x) &&
        isFunction(x['abort']) &&
        isFunction(x['getWriter']) &&
        !(x instanceof interfaces_1.ReadableInterop);
};
/** @ignore */
exports.isReadableDOMStream = (x) => {
    return exports.isObject(x) &&
        isFunction(x['tee']) &&
        isFunction(x['cancel']) &&
        isFunction(x['pipeTo']) &&
        isFunction(x['getReader']) &&
        !(x instanceof interfaces_1.ReadableInterop);
};
/** @ignore */
exports.isWritableNodeStream = (x) => {
    return exports.isObject(x) &&
        isFunction(x['end']) &&
        isFunction(x['write']) &&
        isBoolean(x['writable']) &&
        !(x instanceof interfaces_1.ReadableInterop);
};
/** @ignore */
exports.isReadableNodeStream = (x) => {
    return exports.isObject(x) &&
        isFunction(x['read']) &&
        isFunction(x['pipe']) &&
        isBoolean(x['readable']) &&
        !(x instanceof interfaces_1.ReadableInterop);
};

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN2QixVQUFVLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzFCLENBQUMsQ0FBQyxDQUFDLFlBQVksNEJBQWUsQ0FBQyxDQUFDO0FBQ3hDLENBQUMsQ0FBQztBQUVGLGNBQWM7QUFDRCxRQUFBLG9CQUFvQixHQUFHLENBQUMsQ0FBTSxFQUE4QixFQUFFO0lBQ3ZFLE9BQU8sZ0JBQVEsQ0FBQyxDQUFDLENBQUM7UUFDZCxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BCLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEIsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN4QixDQUFDLENBQUMsQ0FBQyxZQUFZLDRCQUFlLENBQUMsQ0FBQztBQUN4QyxDQUFDLENBQUM7QUFFRixjQUFjO0FBQ0QsUUFBQSxvQkFBb0IsR0FBRyxDQUFDLENBQU0sRUFBOEIsRUFBRTtJQUN2RSxPQUFPLGdCQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2QsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyQixVQUFVLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JCLFNBQVMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDeEIsQ0FBQyxDQUFDLENBQUMsWUFBWSw0QkFBZSxDQUFDLENBQUM7QUFDeEMsQ0FBQyxDQUFDIiwiZmlsZSI6InV0aWwvY29tcGF0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuLy8gb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4vLyBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuLy8gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuLy8gdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuLy8gXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4vLyB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4vLyBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuLy8gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbi8vIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuLy8gc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuLy8gdW5kZXIgdGhlIExpY2Vuc2UuXG5cbmltcG9ydCB7IFJlYWRhYmxlSW50ZXJvcCwgQXJyb3dKU09OTGlrZSB9IGZyb20gJy4uL2lvL2ludGVyZmFjZXMnO1xuXG4vKiogQGlnbm9yZSAqL1xudHlwZSBGU1JlYWRTdHJlYW0gPSBpbXBvcnQoJ2ZzJykuUmVhZFN0cmVhbTtcbi8qKiBAaWdub3JlICovXG50eXBlIEZpbGVIYW5kbGUgPSBpbXBvcnQoJ2ZzJykucHJvbWlzZXMuRmlsZUhhbmRsZTtcblxuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uIHtcbiAgICB1bnN1YnNjcmliZTogKCkgPT4gdm9pZDtcbn1cblxuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBpbnRlcmZhY2UgT2JzZXJ2ZXI8VD4ge1xuICAgIGNsb3NlZD86IGJvb2xlYW47XG4gICAgbmV4dDogKHZhbHVlOiBUKSA9PiB2b2lkO1xuICAgIGVycm9yOiAoZXJyOiBhbnkpID0+IHZvaWQ7XG4gICAgY29tcGxldGU6ICgpID0+IHZvaWQ7XG59XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmFibGU8VD4ge1xuICAgIHN1YnNjcmliZTogKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4gU3Vic2NyaXB0aW9uO1xufVxuXG4vKiogQGlnbm9yZSAqL1xuY29uc3QgW0JpZ0ludEN0b3IsIEJpZ0ludEF2YWlsYWJsZV0gPSAoKCkgPT4ge1xuICAgIGNvbnN0IEJpZ0ludFVuYXZhaWxhYmxlRXJyb3IgPSAoKSA9PiB7IHRocm93IG5ldyBFcnJvcignQmlnSW50IGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpOyB9O1xuICAgIGZ1bmN0aW9uIEJpZ0ludFVuYXZhaWxhYmxlKCkgeyB0aHJvdyBCaWdJbnRVbmF2YWlsYWJsZUVycm9yKCk7IH1cbiAgICBCaWdJbnRVbmF2YWlsYWJsZS5hc0ludE4gPSAoKSA9PiB7IHRocm93IEJpZ0ludFVuYXZhaWxhYmxlRXJyb3IoKTsgfTtcbiAgICBCaWdJbnRVbmF2YWlsYWJsZS5hc1VpbnROID0gKCkgPT4geyB0aHJvdyBCaWdJbnRVbmF2YWlsYWJsZUVycm9yKCk7IH07XG4gICAgcmV0dXJuIHR5cGVvZiBCaWdJbnQgIT09ICd1bmRlZmluZWQnID8gW0JpZ0ludCwgdHJ1ZV0gOiBbPGFueT4gQmlnSW50VW5hdmFpbGFibGUsIGZhbHNlXTtcbn0pKCkgYXMgW0JpZ0ludENvbnN0cnVjdG9yLCBib29sZWFuXTtcblxuLyoqIEBpZ25vcmUgKi9cbmNvbnN0IFtCaWdJbnQ2NEFycmF5Q3RvciwgQmlnSW50NjRBcnJheUF2YWlsYWJsZV0gPSAoKCkgPT4ge1xuICAgIGNvbnN0IEJpZ0ludDY0QXJyYXlVbmF2YWlsYWJsZUVycm9yID0gKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoJ0JpZ0ludDY0QXJyYXkgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7IH07XG4gICAgY2xhc3MgQmlnSW50NjRBcnJheVVuYXZhaWxhYmxlIHtcbiAgICAgICAgc3RhdGljIGdldCBCWVRFU19QRVJfRUxFTUVOVCgpIHsgcmV0dXJuIDg7IH1cbiAgICAgICAgc3RhdGljIG9mKCkgeyB0aHJvdyBCaWdJbnQ2NEFycmF5VW5hdmFpbGFibGVFcnJvcigpOyB9XG4gICAgICAgIHN0YXRpYyBmcm9tKCkgeyB0aHJvdyBCaWdJbnQ2NEFycmF5VW5hdmFpbGFibGVFcnJvcigpOyB9XG4gICAgICAgIGNvbnN0cnVjdG9yKCkgeyB0aHJvdyBCaWdJbnQ2NEFycmF5VW5hdmFpbGFibGVFcnJvcigpOyB9XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2YgQmlnSW50NjRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBbQmlnSW50NjRBcnJheSwgdHJ1ZV0gOiBbPGFueT4gQmlnSW50NjRBcnJheVVuYXZhaWxhYmxlLCBmYWxzZV07XG59KSgpIGFzIFtCaWdJbnQ2NEFycmF5Q29uc3RydWN0b3IsIGJvb2xlYW5dO1xuXG4vKiogQGlnbm9yZSAqL1xuY29uc3QgW0JpZ1VpbnQ2NEFycmF5Q3RvciwgQmlnVWludDY0QXJyYXlBdmFpbGFibGVdID0gKCgpID0+IHtcbiAgICBjb25zdCBCaWdVaW50NjRBcnJheVVuYXZhaWxhYmxlRXJyb3IgPSAoKSA9PiB7IHRocm93IG5ldyBFcnJvcignQmlnVWludDY0QXJyYXkgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7IH07XG4gICAgY2xhc3MgQmlnVWludDY0QXJyYXlVbmF2YWlsYWJsZSB7XG4gICAgICAgIHN0YXRpYyBnZXQgQllURVNfUEVSX0VMRU1FTlQoKSB7IHJldHVybiA4OyB9XG4gICAgICAgIHN0YXRpYyBvZigpIHsgdGhyb3cgQmlnVWludDY0QXJyYXlVbmF2YWlsYWJsZUVycm9yKCk7IH1cbiAgICAgICAgc3RhdGljIGZyb20oKSB7IHRocm93IEJpZ1VpbnQ2NEFycmF5VW5hdmFpbGFibGVFcnJvcigpOyB9XG4gICAgICAgIGNvbnN0cnVjdG9yKCkgeyB0aHJvdyBCaWdVaW50NjRBcnJheVVuYXZhaWxhYmxlRXJyb3IoKTsgfVxuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIEJpZ1VpbnQ2NEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFtCaWdVaW50NjRBcnJheSwgdHJ1ZV0gOiBbPGFueT4gQmlnVWludDY0QXJyYXlVbmF2YWlsYWJsZSwgZmFsc2VdO1xufSkoKSBhcyBbQmlnVWludDY0QXJyYXlDb25zdHJ1Y3RvciwgYm9vbGVhbl07XG5cbmV4cG9ydCB7IEJpZ0ludEN0b3IgYXMgQmlnSW50LCBCaWdJbnRBdmFpbGFibGUgfTtcbmV4cG9ydCB7IEJpZ0ludDY0QXJyYXlDdG9yIGFzIEJpZ0ludDY0QXJyYXksIEJpZ0ludDY0QXJyYXlBdmFpbGFibGUgfTtcbmV4cG9ydCB7IEJpZ1VpbnQ2NEFycmF5Q3RvciBhcyBCaWdVaW50NjRBcnJheSwgQmlnVWludDY0QXJyYXlBdmFpbGFibGUgfTtcblxuLyoqIEBpZ25vcmUgKi8gY29uc3QgaXNOdW1iZXIgPSAoeDogYW55KSA9PiB0eXBlb2YgeCA9PT0gJ251bWJlcic7XG4vKiogQGlnbm9yZSAqLyBjb25zdCBpc0Jvb2xlYW4gPSAoeDogYW55KSA9PiB0eXBlb2YgeCA9PT0gJ2Jvb2xlYW4nO1xuLyoqIEBpZ25vcmUgKi8gY29uc3QgaXNGdW5jdGlvbiA9ICh4OiBhbnkpID0+IHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBjb25zdCBpc09iamVjdCA9ICh4OiBhbnkpOiB4IGlzIE9iamVjdCA9PiB4ICE9IG51bGwgJiYgT2JqZWN0KHgpID09PSB4O1xuXG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IGlzUHJvbWlzZSA9IDxUID0gYW55Pih4OiBhbnkpOiB4IGlzIFByb21pc2VMaWtlPFQ+ID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QoeCkgJiYgaXNGdW5jdGlvbih4LnRoZW4pO1xufTtcblxuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBjb25zdCBpc09ic2VydmFibGUgPSA8VCA9IGFueT4oeDogYW55KTogeCBpcyBPYnNlcnZhYmxlPFQ+ID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QoeCkgJiYgaXNGdW5jdGlvbih4LnN1YnNjcmliZSk7XG59O1xuXG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IGlzSXRlcmFibGUgPSA8VCA9IGFueT4oeDogYW55KTogeCBpcyBJdGVyYWJsZTxUPiA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHgpICYmIGlzRnVuY3Rpb24oeFtTeW1ib2wuaXRlcmF0b3JdKTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNBc3luY0l0ZXJhYmxlID0gPFQgPSBhbnk+KHg6IGFueSk6IHggaXMgQXN5bmNJdGVyYWJsZTxUPiA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHgpICYmIGlzRnVuY3Rpb24oeFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pO1xufTtcblxuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBjb25zdCBpc0Fycm93SlNPTiA9ICh4OiBhbnkpOiB4IGlzIEFycm93SlNPTkxpa2UgID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QoeCkgJiYgaXNPYmplY3QoeFsnc2NoZW1hJ10pO1xufTtcblxuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBjb25zdCBpc0FycmF5TGlrZSA9IDxUID0gYW55Pih4OiBhbnkpOiB4IGlzIEFycmF5TGlrZTxUPiA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHgpICYmIGlzTnVtYmVyKHhbJ2xlbmd0aCddKTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNJdGVyYXRvclJlc3VsdCA9IDxUID0gYW55Pih4OiBhbnkpOiB4IGlzIEl0ZXJhdG9yUmVzdWx0PFQ+ID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QoeCkgJiYgKCdkb25lJyBpbiB4KSAmJiAoJ3ZhbHVlJyBpbiB4KTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNVbmRlcmx5aW5nU2luayA9IDxUID0gYW55Pih4OiBhbnkpOiB4IGlzIFVuZGVybHlpbmdTaW5rPFQ+ID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QoeCkgJiZcbiAgICAgICAgaXNGdW5jdGlvbih4WydhYm9ydCddKSAmJlxuICAgICAgICBpc0Z1bmN0aW9uKHhbJ2Nsb3NlJ10pICYmXG4gICAgICAgIGlzRnVuY3Rpb24oeFsnc3RhcnQnXSkgJiZcbiAgICAgICAgaXNGdW5jdGlvbih4Wyd3cml0ZSddKTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNGaWxlSGFuZGxlID0gKHg6IGFueSk6IHggaXMgRmlsZUhhbmRsZSA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHgpICYmIGlzRnVuY3Rpb24oeFsnc3RhdCddKSAmJiBpc051bWJlcih4WydmZCddKTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNGU1JlYWRTdHJlYW0gPSAoeDogYW55KTogeCBpcyBGU1JlYWRTdHJlYW0gPT4ge1xuICAgIHJldHVybiBpc1JlYWRhYmxlTm9kZVN0cmVhbSh4KSAmJiBpc051bWJlcigoPGFueT4geClbJ2J5dGVzUmVhZCddKTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNGZXRjaFJlc3BvbnNlID0gKHg6IGFueSk6IHggaXMgUmVzcG9uc2UgPT4ge1xuICAgIHJldHVybiBpc09iamVjdCh4KSAmJiBpc1JlYWRhYmxlRE9NU3RyZWFtKHhbJ2JvZHknXSk7XG59O1xuXG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IGlzV3JpdGFibGVET01TdHJlYW0gPSA8VCA9IGFueT4oeDogYW55KTogeCBpcyBXcml0YWJsZVN0cmVhbTxUPiA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHgpICYmXG4gICAgICAgIGlzRnVuY3Rpb24oeFsnYWJvcnQnXSkgJiZcbiAgICAgICAgaXNGdW5jdGlvbih4WydnZXRXcml0ZXInXSkgJiZcbiAgICAgICAgISh4IGluc3RhbmNlb2YgUmVhZGFibGVJbnRlcm9wKTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNSZWFkYWJsZURPTVN0cmVhbSA9IDxUID0gYW55Pih4OiBhbnkpOiB4IGlzIFJlYWRhYmxlU3RyZWFtPFQ+ID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QoeCkgJiZcbiAgICAgICAgaXNGdW5jdGlvbih4Wyd0ZWUnXSkgJiZcbiAgICAgICAgaXNGdW5jdGlvbih4WydjYW5jZWwnXSkgJiZcbiAgICAgICAgaXNGdW5jdGlvbih4WydwaXBlVG8nXSkgJiZcbiAgICAgICAgaXNGdW5jdGlvbih4WydnZXRSZWFkZXInXSkgJiZcbiAgICAgICAgISh4IGluc3RhbmNlb2YgUmVhZGFibGVJbnRlcm9wKTtcbn07XG5cbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgaXNXcml0YWJsZU5vZGVTdHJlYW0gPSAoeDogYW55KTogeCBpcyBOb2RlSlMuV3JpdGFibGVTdHJlYW0gPT4ge1xuICAgIHJldHVybiBpc09iamVjdCh4KSAmJlxuICAgICAgICBpc0Z1bmN0aW9uKHhbJ2VuZCddKSAmJlxuICAgICAgICBpc0Z1bmN0aW9uKHhbJ3dyaXRlJ10pICYmXG4gICAgICAgIGlzQm9vbGVhbih4Wyd3cml0YWJsZSddKSAmJlxuICAgICAgICAhKHggaW5zdGFuY2VvZiBSZWFkYWJsZUludGVyb3ApO1xufTtcblxuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBjb25zdCBpc1JlYWRhYmxlTm9kZVN0cmVhbSA9ICh4OiBhbnkpOiB4IGlzIE5vZGVKUy5SZWFkYWJsZVN0cmVhbSA9PiB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KHgpICYmXG4gICAgICAgIGlzRnVuY3Rpb24oeFsncmVhZCddKSAmJlxuICAgICAgICBpc0Z1bmN0aW9uKHhbJ3BpcGUnXSkgJiZcbiAgICAgICAgaXNCb29sZWFuKHhbJ3JlYWRhYmxlJ10pICYmXG4gICAgICAgICEoeCBpbnN0YW5jZW9mIFJlYWRhYmxlSW50ZXJvcCk7XG59O1xuIl19
