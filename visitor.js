"use strict";
// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
Object.defineProperty(exports, "__esModule", { value: true });
const data_1 = require("./data");
const vector_1 = require("./vector");
const enum_1 = require("./enum");
const type_1 = require("./type");
class Visitor {
    visitMany(nodes, ...args) {
        return nodes.map((node, i) => this.visit(node, ...args.map((x) => x[i])));
    }
    visit(node, ...args) {
        return this.getVisitFn(node, false).call(this, node, ...args);
    }
    getVisitFn(node, throwIfNotFound = true) {
        return getVisitFn(this, node, throwIfNotFound);
    }
    visitNull(_node, ..._args) { return null; }
    visitBool(_node, ..._args) { return null; }
    visitInt(_node, ..._args) { return null; }
    visitFloat(_node, ..._args) { return null; }
    visitUtf8(_node, ..._args) { return null; }
    visitBinary(_node, ..._args) { return null; }
    visitFixedSizeBinary(_node, ..._args) { return null; }
    visitDate(_node, ..._args) { return null; }
    visitTimestamp(_node, ..._args) { return null; }
    visitTime(_node, ..._args) { return null; }
    visitDecimal(_node, ..._args) { return null; }
    visitList(_node, ..._args) { return null; }
    visitStruct(_node, ..._args) { return null; }
    visitUnion(_node, ..._args) { return null; }
    visitDictionary(_node, ..._args) { return null; }
    visitInterval(_node, ..._args) { return null; }
    visitFixedSizeList(_node, ..._args) { return null; }
    visitMap(_node, ..._args) { return null; }
}
exports.Visitor = Visitor;
/** @ignore */
function getVisitFn(visitor, node, throwIfNotFound = true) {
    let fn = null;
    let dtype = enum_1.Type.NONE;
    // tslint:disable
    if (node instanceof data_1.Data) {
        dtype = inferDType(node.type);
    }
    else if (node instanceof vector_1.Vector) {
        dtype = inferDType(node.type);
    }
    else if (node instanceof type_1.DataType) {
        dtype = inferDType(node);
    }
    else if (typeof (dtype = node) !== 'number') {
        dtype = enum_1.Type[node];
    }
    switch (dtype) {
        case enum_1.Type.Null:
            fn = visitor.visitNull;
            break;
        case enum_1.Type.Bool:
            fn = visitor.visitBool;
            break;
        case enum_1.Type.Int:
            fn = visitor.visitInt;
            break;
        case enum_1.Type.Int8:
            fn = visitor.visitInt8 || visitor.visitInt;
            break;
        case enum_1.Type.Int16:
            fn = visitor.visitInt16 || visitor.visitInt;
            break;
        case enum_1.Type.Int32:
            fn = visitor.visitInt32 || visitor.visitInt;
            break;
        case enum_1.Type.Int64:
            fn = visitor.visitInt64 || visitor.visitInt;
            break;
        case enum_1.Type.Uint8:
            fn = visitor.visitUint8 || visitor.visitInt;
            break;
        case enum_1.Type.Uint16:
            fn = visitor.visitUint16 || visitor.visitInt;
            break;
        case enum_1.Type.Uint32:
            fn = visitor.visitUint32 || visitor.visitInt;
            break;
        case enum_1.Type.Uint64:
            fn = visitor.visitUint64 || visitor.visitInt;
            break;
        case enum_1.Type.Float:
            fn = visitor.visitFloat;
            break;
        case enum_1.Type.Float16:
            fn = visitor.visitFloat16 || visitor.visitFloat;
            break;
        case enum_1.Type.Float32:
            fn = visitor.visitFloat32 || visitor.visitFloat;
            break;
        case enum_1.Type.Float64:
            fn = visitor.visitFloat64 || visitor.visitFloat;
            break;
        case enum_1.Type.Utf8:
            fn = visitor.visitUtf8;
            break;
        case enum_1.Type.Binary:
            fn = visitor.visitBinary;
            break;
        case enum_1.Type.FixedSizeBinary:
            fn = visitor.visitFixedSizeBinary;
            break;
        case enum_1.Type.Date:
            fn = visitor.visitDate;
            break;
        case enum_1.Type.DateDay:
            fn = visitor.visitDateDay || visitor.visitDate;
            break;
        case enum_1.Type.DateMillisecond:
            fn = visitor.visitDateMillisecond || visitor.visitDate;
            break;
        case enum_1.Type.Timestamp:
            fn = visitor.visitTimestamp;
            break;
        case enum_1.Type.TimestampSecond:
            fn = visitor.visitTimestampSecond || visitor.visitTimestamp;
            break;
        case enum_1.Type.TimestampMillisecond:
            fn = visitor.visitTimestampMillisecond || visitor.visitTimestamp;
            break;
        case enum_1.Type.TimestampMicrosecond:
            fn = visitor.visitTimestampMicrosecond || visitor.visitTimestamp;
            break;
        case enum_1.Type.TimestampNanosecond:
            fn = visitor.visitTimestampNanosecond || visitor.visitTimestamp;
            break;
        case enum_1.Type.Time:
            fn = visitor.visitTime;
            break;
        case enum_1.Type.TimeSecond:
            fn = visitor.visitTimeSecond || visitor.visitTime;
            break;
        case enum_1.Type.TimeMillisecond:
            fn = visitor.visitTimeMillisecond || visitor.visitTime;
            break;
        case enum_1.Type.TimeMicrosecond:
            fn = visitor.visitTimeMicrosecond || visitor.visitTime;
            break;
        case enum_1.Type.TimeNanosecond:
            fn = visitor.visitTimeNanosecond || visitor.visitTime;
            break;
        case enum_1.Type.Decimal:
            fn = visitor.visitDecimal;
            break;
        case enum_1.Type.List:
            fn = visitor.visitList;
            break;
        case enum_1.Type.Struct:
            fn = visitor.visitStruct;
            break;
        case enum_1.Type.Union:
            fn = visitor.visitUnion;
            break;
        case enum_1.Type.DenseUnion:
            fn = visitor.visitDenseUnion || visitor.visitUnion;
            break;
        case enum_1.Type.SparseUnion:
            fn = visitor.visitSparseUnion || visitor.visitUnion;
            break;
        case enum_1.Type.Dictionary:
            fn = visitor.visitDictionary;
            break;
        case enum_1.Type.Interval:
            fn = visitor.visitInterval;
            break;
        case enum_1.Type.IntervalDayTime:
            fn = visitor.visitIntervalDayTime || visitor.visitInterval;
            break;
        case enum_1.Type.IntervalYearMonth:
            fn = visitor.visitIntervalYearMonth || visitor.visitInterval;
            break;
        case enum_1.Type.FixedSizeList:
            fn = visitor.visitFixedSizeList;
            break;
        case enum_1.Type.Map:
            fn = visitor.visitMap;
            break;
    }
    if (typeof fn === 'function')
        return fn;
    if (!throwIfNotFound)
        return () => null;
    throw new Error(`Unrecognized type '${enum_1.Type[dtype]}'`);
}
/** @ignore */
function inferDType(type) {
    switch (type.typeId) {
        case enum_1.Type.Null: return enum_1.Type.Null;
        case enum_1.Type.Int:
            const { bitWidth, isSigned } = type;
            switch (bitWidth) {
                case 8: return isSigned ? enum_1.Type.Int8 : enum_1.Type.Uint8;
                case 16: return isSigned ? enum_1.Type.Int16 : enum_1.Type.Uint16;
                case 32: return isSigned ? enum_1.Type.Int32 : enum_1.Type.Uint32;
                case 64: return isSigned ? enum_1.Type.Int64 : enum_1.Type.Uint64;
            }
            return enum_1.Type.Int;
        case enum_1.Type.Float:
            switch (type.precision) {
                case enum_1.Precision.HALF: return enum_1.Type.Float16;
                case enum_1.Precision.SINGLE: return enum_1.Type.Float32;
                case enum_1.Precision.DOUBLE: return enum_1.Type.Float64;
            }
            return enum_1.Type.Float;
        case enum_1.Type.Binary: return enum_1.Type.Binary;
        case enum_1.Type.Utf8: return enum_1.Type.Utf8;
        case enum_1.Type.Bool: return enum_1.Type.Bool;
        case enum_1.Type.Decimal: return enum_1.Type.Decimal;
        case enum_1.Type.Time:
            switch (type.unit) {
                case enum_1.TimeUnit.SECOND: return enum_1.Type.TimeSecond;
                case enum_1.TimeUnit.MILLISECOND: return enum_1.Type.TimeMillisecond;
                case enum_1.TimeUnit.MICROSECOND: return enum_1.Type.TimeMicrosecond;
                case enum_1.TimeUnit.NANOSECOND: return enum_1.Type.TimeNanosecond;
            }
            return enum_1.Type.Time;
        case enum_1.Type.Timestamp:
            switch (type.unit) {
                case enum_1.TimeUnit.SECOND: return enum_1.Type.TimestampSecond;
                case enum_1.TimeUnit.MILLISECOND: return enum_1.Type.TimestampMillisecond;
                case enum_1.TimeUnit.MICROSECOND: return enum_1.Type.TimestampMicrosecond;
                case enum_1.TimeUnit.NANOSECOND: return enum_1.Type.TimestampNanosecond;
            }
            return enum_1.Type.Timestamp;
        case enum_1.Type.Date:
            switch (type.unit) {
                case enum_1.DateUnit.DAY: return enum_1.Type.DateDay;
                case enum_1.DateUnit.MILLISECOND: return enum_1.Type.DateMillisecond;
            }
            return enum_1.Type.Date;
        case enum_1.Type.Interval:
            switch (type.unit) {
                case enum_1.IntervalUnit.DAY_TIME: return enum_1.Type.IntervalDayTime;
                case enum_1.IntervalUnit.YEAR_MONTH: return enum_1.Type.IntervalYearMonth;
            }
            return enum_1.Type.Interval;
        case enum_1.Type.Map: return enum_1.Type.Map;
        case enum_1.Type.List: return enum_1.Type.List;
        case enum_1.Type.Struct: return enum_1.Type.Struct;
        case enum_1.Type.Union:
            switch (type.mode) {
                case enum_1.UnionMode.Dense: return enum_1.Type.DenseUnion;
                case enum_1.UnionMode.Sparse: return enum_1.Type.SparseUnion;
            }
            return enum_1.Type.Union;
        case enum_1.Type.FixedSizeBinary: return enum_1.Type.FixedSizeBinary;
        case enum_1.Type.FixedSizeList: return enum_1.Type.FixedSizeList;
        case enum_1.Type.Dictionary: return enum_1.Type.Dictionary;
    }
    throw new Error(`Unrecognized type '${enum_1.Type[type.typeId]}'`);
}
// Add these here so they're picked up by the externs creator
// in the build, and closure-compiler doesn't minify them away
Visitor.prototype.visitInt8 = null;
Visitor.prototype.visitInt16 = null;
Visitor.prototype.visitInt32 = null;
Visitor.prototype.visitInt64 = null;
Visitor.prototype.visitUint8 = null;
Visitor.prototype.visitUint16 = null;
Visitor.prototype.visitUint32 = null;
Visitor.prototype.visitUint64 = null;
Visitor.prototype.visitFloat16 = null;
Visitor.prototype.visitFloat32 = null;
Visitor.prototype.visitFloat64 = null;
Visitor.prototype.visitDateDay = null;
Visitor.prototype.visitDateMillisecond = null;
Visitor.prototype.visitTimestampSecond = null;
Visitor.prototype.visitTimestampMillisecond = null;
Visitor.prototype.visitTimestampMicrosecond = null;
Visitor.prototype.visitTimestampNanosecond = null;
Visitor.prototype.visitTimeSecond = null;
Visitor.prototype.visitTimeMillisecond = null;
Visitor.prototype.visitTimeMicrosecond = null;
Visitor.prototype.visitTimeNanosecond = null;
Visitor.prototype.visitDenseUnion = null;
Visitor.prototype.visitSparseUnion = null;
Visitor.prototype.visitIntervalDayTime = null;
Visitor.prototype.visitIntervalYearMonth = null;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpc2l0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDZEQUE2RDtBQUM3RCwrREFBK0Q7QUFDL0Qsd0RBQXdEO0FBQ3hELDZEQUE2RDtBQUM3RCxvREFBb0Q7QUFDcEQsNkRBQTZEO0FBQzdELDZEQUE2RDtBQUM3RCxFQUFFO0FBQ0YsK0NBQStDO0FBQy9DLEVBQUU7QUFDRiw2REFBNkQ7QUFDN0QsOERBQThEO0FBQzlELHlEQUF5RDtBQUN6RCw0REFBNEQ7QUFDNUQsMERBQTBEO0FBQzFELHFCQUFxQjs7QUFFckIsaUNBQThCO0FBQzlCLHFDQUFrQztBQUNsQyxpQ0FBc0Y7QUFDdEYsaUNBQXdGO0FBRXhGLE1BQXNCLE9BQU87SUFDbEIsU0FBUyxDQUFDLEtBQVksRUFBRSxHQUFHLElBQWE7UUFDM0MsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQUNNLEtBQUssQ0FBQyxJQUFTLEVBQUUsR0FBRyxJQUFXO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBQ00sVUFBVSxDQUFDLElBQVMsRUFBRSxlQUFlLEdBQUcsSUFBSTtRQUMvQyxPQUFPLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLGVBQWUsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFDTSxTQUFTLENBQWEsS0FBVSxFQUFFLEdBQUcsS0FBWSxJQUFTLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN4RSxTQUFTLENBQWEsS0FBVSxFQUFFLEdBQUcsS0FBWSxJQUFTLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN4RSxRQUFRLENBQWMsS0FBVSxFQUFFLEdBQUcsS0FBWSxJQUFTLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN4RSxVQUFVLENBQVksS0FBVSxFQUFFLEdBQUcsS0FBWSxJQUFTLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN4RSxTQUFTLENBQWEsS0FBVSxFQUFFLEdBQUcsS0FBWSxJQUFTLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN4RSxXQUFXLENBQVcsS0FBVSxFQUFFLEdBQUcsS0FBWSxJQUFTLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN4RSxvQkFBb0IsQ0FBRSxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFNBQVMsQ0FBYSxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLGNBQWMsQ0FBUSxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFNBQVMsQ0FBYSxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFlBQVksQ0FBVSxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFNBQVMsQ0FBYSxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFdBQVcsQ0FBVyxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLFVBQVUsQ0FBWSxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLGVBQWUsQ0FBTyxLQUFVLEVBQUUsR0FBRyxLQUFZLElBQVMsT0FBTyxJQUFJ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QzlDLE9BQU8sQ0FBQyxTQUFpQixDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDOUMsT0FBTyxDQUFDLFNBQWlCLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0FBQ3RELE9BQU8sQ0FBQyxTQUFpQixDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUN0RCxPQUFPLENBQUMsU0FBaUIsQ0FBQyx5QkFBeUIsR0FBRyxJQUFJLENBQUM7QUFDM0QsT0FBTyxDQUFDLFNBQWlCLENBQUMseUJBQXlCLEdBQUcsSUFBSSxDQUFDO0FBQzNELE9BQU8sQ0FBQyxTQUFpQixDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQztBQUMxRCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQ2pELE9BQU8sQ0FBQyxTQUFpQixDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUN0RCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUM7QUFDdEQsT0FBTyxDQUFDLFNBQWlCLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ3JELE9BQU8sQ0FBQyxTQUFpQixDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7QUFDakQsT0FBTyxDQUFDLFNBQWlCLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQ2xELE9BQU8sQ0FBQyxTQUFpQixDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUN0RCxPQUFPLENBQUMsU0FBaUIsQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUMiLCJmaWxlIjoidmlzaXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbi8vIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuLy8gZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbi8vIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbi8vIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbi8vIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuLy8gd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuLy8gc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbi8vIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4vLyBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbi8vIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbi8vIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG5pbXBvcnQgeyBEYXRhIH0gZnJvbSAnLi9kYXRhJztcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gJy4vdmVjdG9yJztcbmltcG9ydCB7IFR5cGUsIFByZWNpc2lvbiwgRGF0ZVVuaXQsIFRpbWVVbml0LCBJbnRlcnZhbFVuaXQsIFVuaW9uTW9kZSB9IGZyb20gJy4vZW51bSc7XG5pbXBvcnQgeyBEYXRhVHlwZSwgRmxvYXQsIEludCwgRGF0ZV8sIEludGVydmFsLCBUaW1lLCBUaW1lc3RhbXAsIFVuaW9uLCB9IGZyb20gJy4vdHlwZSc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWaXNpdG9yIHtcbiAgICBwdWJsaWMgdmlzaXRNYW55KG5vZGVzOiBhbnlbXSwgLi4uYXJnczogYW55W11bXSkge1xuICAgICAgICByZXR1cm4gbm9kZXMubWFwKChub2RlLCBpKSA9PiB0aGlzLnZpc2l0KG5vZGUsIC4uLmFyZ3MubWFwKCh4KSA9PiB4W2ldKSkpO1xuICAgIH1cbiAgICBwdWJsaWMgdmlzaXQobm9kZTogYW55LCAuLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWaXNpdEZuKG5vZGUsIGZhbHNlKS5jYWxsKHRoaXMsIG5vZGUsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0VmlzaXRGbihub2RlOiBhbnksIHRocm93SWZOb3RGb3VuZCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGdldFZpc2l0Rm4odGhpcywgbm9kZSwgdGhyb3dJZk5vdEZvdW5kKTtcbiAgICB9XG4gICAgcHVibGljIHZpc2l0TnVsbCAgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdEJvb2wgICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRJbnQgICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0RmxvYXQgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdFV0ZjggICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRCaW5hcnkgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0Rml4ZWRTaXplQmluYXJ5IChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdERhdGUgICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRUaW1lc3RhbXAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0VGltZSAgICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdERlY2ltYWwgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRMaXN0ICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0U3RydWN0ICAgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdFVuaW9uICAgICAgICAgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXREaWN0aW9uYXJ5ICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG4gICAgcHVibGljIHZpc2l0SW50ZXJ2YWwgICAgICAgIChfbm9kZTogYW55LCAuLi5fYXJnczogYW55W10pOiBhbnkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHB1YmxpYyB2aXNpdEZpeGVkU2l6ZUxpc3QgICAoX25vZGU6IGFueSwgLi4uX2FyZ3M6IGFueVtdKTogYW55IHsgcmV0dXJuIG51bGw7IH1cbiAgICBwdWJsaWMgdmlzaXRNYXAgICAgICAgICAgICAgKF9ub2RlOiBhbnksIC4uLl9hcmdzOiBhbnlbXSk6IGFueSB7IHJldHVybiBudWxsOyB9XG59XG5cbi8qKiBAaWdub3JlICovXG5mdW5jdGlvbiBnZXRWaXNpdEZuPFQgZXh0ZW5kcyBEYXRhVHlwZT4odmlzaXRvcjogVmlzaXRvciwgbm9kZTogYW55LCB0aHJvd0lmTm90Rm91bmQgPSB0cnVlKSB7XG4gICAgbGV0IGZuOiBhbnkgPSBudWxsO1xuICAgIGxldCBkdHlwZTogVFsnVFR5cGUnXSA9IFR5cGUuTk9ORTtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZVxuICAgIGlmICAgICAgKG5vZGUgaW5zdGFuY2VvZiBEYXRhICAgICkgeyBkdHlwZSA9IGluZmVyRFR5cGUobm9kZS50eXBlIGFzIFQpOyB9XG4gICAgZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIFZlY3RvciAgKSB7IGR0eXBlID0gaW5mZXJEVHlwZShub2RlLnR5cGUgYXMgVCk7IH1cbiAgICBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgRGF0YVR5cGUpIHsgZHR5cGUgPSBpbmZlckRUeXBlKG5vZGUgICAgICBhcyBUKTsgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiAoZHR5cGUgPSBub2RlKSAhPT0gJ251bWJlcicpIHsgZHR5cGUgPSBUeXBlW25vZGVdIGFzIGFueSBhcyBUWydUVHlwZSddOyB9XG5cbiAgICBzd2l0Y2ggKGR0eXBlKSB7XG4gICAgICAgIGNhc2UgVHlwZS5OdWxsOiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0TnVsbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5Cb29sOiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0Qm9vbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnQ6ICAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkludDg6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRJbnQ4IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50MTY6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEludDE2IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50MzI6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEludDMyIHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50NjQ6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEludDY0IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVWludDg6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFVpbnQ4IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVWludDE2OiAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFVpbnQxNiB8fCB2aXNpdG9yLnZpc2l0SW50OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlVpbnQzMjogICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRVaW50MzIgfHwgdmlzaXRvci52aXNpdEludDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5VaW50NjQ6ICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VWludDY0IHx8IHZpc2l0b3IudmlzaXRJbnQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuRmxvYXQ6ICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEZsb2F0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkZsb2F0MTY6ICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRGbG9hdDE2IHx8IHZpc2l0b3IudmlzaXRGbG9hdDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5GbG9hdDMyOiAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RmxvYXQzMiB8fCB2aXNpdG9yLnZpc2l0RmxvYXQ7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuRmxvYXQ2NDogICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdEZsb2F0NjQgfHwgdmlzaXRvci52aXNpdEZsb2F0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlV0Zjg6ICAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRVdGY4OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLkJpbmFyeTogICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRCaW5hcnk7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuRml4ZWRTaXplQmluYXJ5OiAgICAgIGZuID0gdmlzaXRvci52aXNpdEZpeGVkU2l6ZUJpbmFyeTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EYXRlOiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGF0ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EYXRlRGF5OiAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGF0ZURheSB8fCB2aXNpdG9yLnZpc2l0RGF0ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EYXRlTWlsbGlzZWNvbmQ6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGF0ZU1pbGxpc2Vjb25kIHx8IHZpc2l0b3IudmlzaXREYXRlOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcDogICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXA7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZXN0YW1wU2Vjb25kOiAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVzdGFtcFNlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZXN0YW1wOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcE1pbGxpc2Vjb25kOiBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXBNaWxsaXNlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZXN0YW1wOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcE1pY3Jvc2Vjb25kOiBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXBNaWNyb3NlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZXN0YW1wOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVzdGFtcE5hbm9zZWNvbmQ6ICBmbiA9IHZpc2l0b3IudmlzaXRUaW1lc3RhbXBOYW5vc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lc3RhbXA7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZTogICAgICAgICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWU7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZVNlY29uZDogICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVTZWNvbmQgfHwgdmlzaXRvci52aXNpdFRpbWU7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuVGltZU1pbGxpc2Vjb25kOiAgICAgIGZuID0gdmlzaXRvci52aXNpdFRpbWVNaWxsaXNlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lTWljcm9zZWNvbmQ6ICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0VGltZU1pY3Jvc2Vjb25kIHx8IHZpc2l0b3IudmlzaXRUaW1lOyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlRpbWVOYW5vc2Vjb25kOiAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRUaW1lTmFub3NlY29uZCB8fCB2aXNpdG9yLnZpc2l0VGltZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EZWNpbWFsOiAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGVjaW1hbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5MaXN0OiAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0TGlzdDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5TdHJ1Y3Q6ICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0U3RydWN0OyBicmVhaztcbiAgICAgICAgY2FzZSBUeXBlLlVuaW9uOiAgICAgICAgICAgICAgICBmbiA9IHZpc2l0b3IudmlzaXRVbmlvbjsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EZW5zZVVuaW9uOiAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGVuc2VVbmlvbiB8fCB2aXNpdG9yLnZpc2l0VW5pb247IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuU3BhcnNlVW5pb246ICAgICAgICAgIGZuID0gdmlzaXRvci52aXNpdFNwYXJzZVVuaW9uIHx8IHZpc2l0b3IudmlzaXRVbmlvbjsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5EaWN0aW9uYXJ5OiAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0RGljdGlvbmFyeTsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbDogICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0SW50ZXJ2YWw7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50ZXJ2YWxEYXlUaW1lOiAgICAgIGZuID0gdmlzaXRvci52aXNpdEludGVydmFsRGF5VGltZSB8fCB2aXNpdG9yLnZpc2l0SW50ZXJ2YWw7IGJyZWFrO1xuICAgICAgICBjYXNlIFR5cGUuSW50ZXJ2YWxZZWFyTW9udGg6ICAgIGZuID0gdmlzaXRvci52aXNpdEludGVydmFsWWVhck1vbnRoIHx8IHZpc2l0b3IudmlzaXRJbnRlcnZhbDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5GaXhlZFNpemVMaXN0OiAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0Rml4ZWRTaXplTGlzdDsgYnJlYWs7XG4gICAgICAgIGNhc2UgVHlwZS5NYXA6ICAgICAgICAgICAgICAgICAgZm4gPSB2aXNpdG9yLnZpc2l0TWFwOyBicmVhaztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZuO1xuICAgIGlmICghdGhyb3dJZk5vdEZvdW5kKSByZXR1cm4gKCkgPT4gbnVsbDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCB0eXBlICcke1R5cGVbZHR5cGVdfSdgKTtcbn1cblxuLyoqIEBpZ25vcmUgKi9cbmZ1bmN0aW9uIGluZmVyRFR5cGU8VCBleHRlbmRzIERhdGFUeXBlPih0eXBlOiBUKTogVHlwZSB7XG4gICAgc3dpdGNoICh0eXBlLnR5cGVJZCkge1xuICAgICAgICBjYXNlIFR5cGUuTnVsbDogcmV0dXJuIFR5cGUuTnVsbDtcbiAgICAgICAgY2FzZSBUeXBlLkludDpcbiAgICAgICAgICAgIGNvbnN0IHsgYml0V2lkdGgsIGlzU2lnbmVkIH0gPSAodHlwZSBhcyBhbnkgYXMgSW50KTtcbiAgICAgICAgICAgIHN3aXRjaCAoYml0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlICA4OiByZXR1cm4gaXNTaWduZWQgPyBUeXBlLkludDggIDogVHlwZS5VaW50OCA7XG4gICAgICAgICAgICAgICAgY2FzZSAxNjogcmV0dXJuIGlzU2lnbmVkID8gVHlwZS5JbnQxNiA6IFR5cGUuVWludDE2O1xuICAgICAgICAgICAgICAgIGNhc2UgMzI6IHJldHVybiBpc1NpZ25lZCA/IFR5cGUuSW50MzIgOiBUeXBlLlVpbnQzMjtcbiAgICAgICAgICAgICAgICBjYXNlIDY0OiByZXR1cm4gaXNTaWduZWQgPyBUeXBlLkludDY0IDogVHlwZS5VaW50NjQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gVHlwZS5JbnQ7XG4gICAgICAgIGNhc2UgVHlwZS5GbG9hdDpcbiAgICAgICAgICAgIHN3aXRjaCgodHlwZSBhcyBhbnkgYXMgRmxvYXQpLnByZWNpc2lvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgUHJlY2lzaW9uLkhBTEY6IHJldHVybiBUeXBlLkZsb2F0MTY7XG4gICAgICAgICAgICAgICAgY2FzZSBQcmVjaXNpb24uU0lOR0xFOiByZXR1cm4gVHlwZS5GbG9hdDMyO1xuICAgICAgICAgICAgICAgIGNhc2UgUHJlY2lzaW9uLkRPVUJMRTogcmV0dXJuIFR5cGUuRmxvYXQ2NDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLkZsb2F0O1xuICAgICAgICBjYXNlIFR5cGUuQmluYXJ5OiByZXR1cm4gVHlwZS5CaW5hcnk7XG4gICAgICAgIGNhc2UgVHlwZS5VdGY4OiByZXR1cm4gVHlwZS5VdGY4O1xuICAgICAgICBjYXNlIFR5cGUuQm9vbDogcmV0dXJuIFR5cGUuQm9vbDtcbiAgICAgICAgY2FzZSBUeXBlLkRlY2ltYWw6IHJldHVybiBUeXBlLkRlY2ltYWw7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lOlxuICAgICAgICAgICAgc3dpdGNoICgodHlwZSBhcyBhbnkgYXMgVGltZSkudW5pdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lU2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTUlMTElTRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVNaWxsaXNlY29uZDtcbiAgICAgICAgICAgICAgICBjYXNlIFRpbWVVbml0Lk1JQ1JPU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lTWljcm9zZWNvbmQ7XG4gICAgICAgICAgICAgICAgY2FzZSBUaW1lVW5pdC5OQU5PU0VDT05EOiByZXR1cm4gVHlwZS5UaW1lTmFub3NlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLlRpbWU7XG4gICAgICAgIGNhc2UgVHlwZS5UaW1lc3RhbXA6XG4gICAgICAgICAgICBzd2l0Y2ggKCh0eXBlIGFzIGFueSBhcyBUaW1lc3RhbXApLnVuaXQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFRpbWVVbml0LlNFQ09ORDogcmV0dXJuIFR5cGUuVGltZXN0YW1wU2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTUlMTElTRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVzdGFtcE1pbGxpc2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTUlDUk9TRUNPTkQ6IHJldHVybiBUeXBlLlRpbWVzdGFtcE1pY3Jvc2Vjb25kO1xuICAgICAgICAgICAgICAgIGNhc2UgVGltZVVuaXQuTkFOT1NFQ09ORDogcmV0dXJuIFR5cGUuVGltZXN0YW1wTmFub3NlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLlRpbWVzdGFtcDtcbiAgICAgICAgY2FzZSBUeXBlLkRhdGU6XG4gICAgICAgICAgICBzd2l0Y2ggKCh0eXBlIGFzIGFueSBhcyBEYXRlXykudW5pdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgRGF0ZVVuaXQuREFZOiByZXR1cm4gVHlwZS5EYXRlRGF5O1xuICAgICAgICAgICAgICAgIGNhc2UgRGF0ZVVuaXQuTUlMTElTRUNPTkQ6IHJldHVybiBUeXBlLkRhdGVNaWxsaXNlY29uZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLkRhdGU7XG4gICAgICAgIGNhc2UgVHlwZS5JbnRlcnZhbDpcbiAgICAgICAgICAgIHN3aXRjaCAoKHR5cGUgYXMgYW55IGFzIEludGVydmFsKS51bml0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBJbnRlcnZhbFVuaXQuREFZX1RJTUU6IHJldHVybiBUeXBlLkludGVydmFsRGF5VGltZTtcbiAgICAgICAgICAgICAgICBjYXNlIEludGVydmFsVW5pdC5ZRUFSX01PTlRIOiByZXR1cm4gVHlwZS5JbnRlcnZhbFllYXJNb250aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLkludGVydmFsO1xuICAgICAgICBjYXNlIFR5cGUuTWFwOiByZXR1cm4gVHlwZS5NYXA7XG4gICAgICAgIGNhc2UgVHlwZS5MaXN0OiByZXR1cm4gVHlwZS5MaXN0O1xuICAgICAgICBjYXNlIFR5cGUuU3RydWN0OiByZXR1cm4gVHlwZS5TdHJ1Y3Q7XG4gICAgICAgIGNhc2UgVHlwZS5VbmlvbjpcbiAgICAgICAgICAgIHN3aXRjaCAoKHR5cGUgYXMgYW55IGFzIFVuaW9uKS5tb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBVbmlvbk1vZGUuRGVuc2U6IHJldHVybiBUeXBlLkRlbnNlVW5pb247XG4gICAgICAgICAgICAgICAgY2FzZSBVbmlvbk1vZGUuU3BhcnNlOiByZXR1cm4gVHlwZS5TcGFyc2VVbmlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlLlVuaW9uO1xuICAgICAgICBjYXNlIFR5cGUuRml4ZWRTaXplQmluYXJ5OiByZXR1cm4gVHlwZS5GaXhlZFNpemVCaW5hcnk7XG4gICAgICAgIGNhc2UgVHlwZS5GaXhlZFNpemVMaXN0OiByZXR1cm4gVHlwZS5GaXhlZFNpemVMaXN0O1xuICAgICAgICBjYXNlIFR5cGUuRGljdGlvbmFyeTogcmV0dXJuIFR5cGUuRGljdGlvbmFyeTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgdHlwZSAnJHtUeXBlW3R5cGUudHlwZUlkXX0nYCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlzaXRvciB7XG4gICAgdmlzaXROdWxsICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRCb29sICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQgICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQ4PyAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQxNj8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQzMj8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnQ2ND8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50OD8gICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50MTY/ICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50MzI/ICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVaW50NjQ/ICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdCAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdDE2PyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdDMyPyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGbG9hdDY0PyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVdGY4ICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRCaW5hcnkgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGaXhlZFNpemVCaW5hcnkgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREYXRlICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREYXRlRGF5PyAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREYXRlTWlsbGlzZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBTZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBNaWxsaXNlY29uZD8gKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBNaWNyb3NlY29uZD8gKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lc3RhbXBOYW5vc2Vjb25kPyAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lU2Vjb25kPyAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lTWlsbGlzZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lTWljcm9zZWNvbmQ/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRUaW1lTmFub3NlY29uZD8gICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREZWNpbWFsICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRMaXN0ICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRTdHJ1Y3QgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRVbmlvbiAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREZW5zZVVuaW9uPyAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRTcGFyc2VVbmlvbj8gICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXREaWN0aW9uYXJ5ICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnRlcnZhbCAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnRlcnZhbERheVRpbWU/ICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRJbnRlcnZhbFllYXJNb250aD8gICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRGaXhlZFNpemVMaXN0ICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG4gICAgdmlzaXRNYXAgICAgICAgICAgICAgICAgICAgKG5vZGU6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnk7XG59XG5cbi8vIEFkZCB0aGVzZSBoZXJlIHNvIHRoZXkncmUgcGlja2VkIHVwIGJ5IHRoZSBleHRlcm5zIGNyZWF0b3Jcbi8vIGluIHRoZSBidWlsZCwgYW5kIGNsb3N1cmUtY29tcGlsZXIgZG9lc24ndCBtaW5pZnkgdGhlbSBhd2F5XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludDggPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRJbnQxNiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludDMyID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0SW50NjQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRVaW50OCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFVpbnQxNiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFVpbnQzMiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFVpbnQ2NCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEZsb2F0MTYgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRGbG9hdDMyID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0RmxvYXQ2NCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdERhdGVEYXkgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXREYXRlTWlsbGlzZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lc3RhbXBTZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lc3RhbXBNaWxsaXNlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVzdGFtcE1pY3Jvc2Vjb25kID0gbnVsbDtcbihWaXNpdG9yLnByb3RvdHlwZSBhcyBhbnkpLnZpc2l0VGltZXN0YW1wTmFub3NlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdFRpbWVTZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lTWlsbGlzZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lTWljcm9zZWNvbmQgPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRUaW1lTmFub3NlY29uZCA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdERlbnNlVW5pb24gPSBudWxsO1xuKFZpc2l0b3IucHJvdG90eXBlIGFzIGFueSkudmlzaXRTcGFyc2VVbmlvbiA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludGVydmFsRGF5VGltZSA9IG51bGw7XG4oVmlzaXRvci5wcm90b3R5cGUgYXMgYW55KS52aXNpdEludGVydmFsWWVhck1vbnRoID0gbnVsbDtcbiJdfQ==
