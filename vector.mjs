// Licensed to the Apache Software Foundation (ASF) under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ASF licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.
import { ChunkedData, FlatData, BoolData } from './data';
import { TypeVisitor, VectorVisitor } from './visitor';
import { Precision, DateUnit, IntervalUnit, UnionMode } from './type';
export class Vector {
    constructor(data, view) {
        this.data = data;
        let nulls;
        if ((data instanceof ChunkedData) && !(view instanceof ChunkedView)) {
            this.view = new ChunkedView(data);
        }
        else if (!(view instanceof ValidityView) && (nulls = data.nullBitmap) && nulls.length > 0 && data.nullCount > 0) {
            this.view = new ValidityView(data, view);
        }
        else {
            this.view = view;
        }
    }
    static create(data) {
        return createVector(data);
    }
    get type() { return this.data.type; }
    get length() { return this.data.length; }
    get nullCount() { return this.data.nullCount; }
    get nullBitmap() { return this.data.nullBitmap; }
    get [Symbol.toStringTag]() {
        return `Vector<${this.type[Symbol.toStringTag]}>`;
    }
    toJSON() { return this.toArray(); }
    clone(data, view = this.view.clone(data)) {
        return new this.constructor(data, view);
    }
    isValid(index) {
        return this.view.isValid(index);
    }
    get(index) {
        return this.view.get(index);
    }
    set(index, value) {
        return this.view.set(index, value);
    }
    toArray() {
        return this.view.toArray();
    }
    [Symbol.iterator]() {
        return this.view[Symbol.iterator]();
    }
    concat(...others) {
        if ((others = others.filter(Boolean)).length === 0) {
            return this;
        }
        const { view } = this;
        const vecs = !(view instanceof ChunkedView)
            ? [this, ...others]
            : [...view.chunks, ...others];
        const offsets = ChunkedData.computeOffsets(vecs);
        const chunksLength = offsets[offsets.length - 1];
        const chunkedData = new ChunkedData(this.type, chunksLength, vecs, 0, -1, offsets);
        return this.clone(chunkedData, new ChunkedView(chunkedData));
    }
    slice(begin, end) {
        let { length } = this;
        let size = this.view.size || 1;
        let total = length, from = (begin || 0) * size;
        let to = (typeof end === 'number' ? end : total) * size;
        if (to < 0) {
            to = total - (to * -1) % total;
        }
        if (from < 0) {
            from = total - (from * -1) % total;
        }
        if (to < from) {
            [from, to] = [to, from];
        }
        total = !isFinite(total = (to - from)) || total < 0 ? 0 : total;
        const slicedData = this.data.slice(from, Math.min(total, length));
        return this.clone(slicedData, this.view.clone(slicedData));
    }
    acceptTypeVisitor(visitor) {
        return TypeVisitor.visitTypeInline(visitor, this.type);
    }
    acceptVectorVisitor(visitor) {
        return VectorVisitor.visitTypeInline(visitor, this.type, this);
    }
}
export class FlatVector extends Vector {
    get values() { return this.data.values; }
}
export class ListVectorBase extends Vector {
    get values() { return this.data.values; }
    get valueOffsets() { return this.data.valueOffsets; }
    getValueOffset(index) {
        return this.valueOffsets[index];
    }
    getValueLength(index) {
        return this.valueOffsets[index + 1] - this.valueOffsets[index];
    }
}
export class NestedVector extends Vector {
    get childData() {
        return this.data.childData;
    }
    getChildAt(index) {
        return this.view.getChildAt(index);
    }
}
import { Bool, } from './type';
import { Uint8, Uint16, Uint32, Uint64, Int8, Int16, Int32, Int64, Float16, Float32, Float64 } from './type';
import { ChunkedView } from './vector/chunked';
import { DictionaryView } from './vector/dictionary';
import { ListView, FixedSizeListView, BinaryView, Utf8View } from './vector/list';
import { UnionView, DenseUnionView, StructView, MapView } from './vector/nested';
import { FlatView, NullView, BoolView, ValidityView, FixedSizeView, Float16View, DateDayView, DateMillisecondView, IntervalYearMonthView } from './vector/flat';
import { packBools } from './util/bit';
export class NullVector extends Vector {
    constructor(data, view = new NullView(data)) {
        super(data, view);
    }
}
export class BoolVector extends Vector {
    static from(data) {
        return new BoolVector(new BoolData(new Bool(), data.length, null, packBools(data)));
    }
    get values() { return this.data.values; }
    constructor(data, view = new BoolView(data)) {
        super(data, view);
    }
}
export class IntVector extends FlatVector {
    constructor(data, view = IntVector.defaultView(data)) {
        super(data, view);
    }
    static from(data, is64) {
        if (is64 === true) {
            return data instanceof Int32Array
                ? new IntVector(new FlatData(new Int64(), data.length, null, data))
                : new IntVector(new FlatData(new Uint64(), data.length, null, data));
        }
        switch (data.constructor) {
            case Int8Array: return new IntVector(new FlatData(new Int8(), data.length, null, data));
            case Int16Array: return new IntVector(new FlatData(new Int16(), data.length, null, data));
            case Int32Array: return new IntVector(new FlatData(new Int32(), data.length, null, data));
            case Uint8Array: return new IntVector(new FlatData(new Uint8(), data.length, null, data));
            case Uint16Array: return new IntVector(new FlatData(new Uint16(), data.length, null, data));
            case Uint32Array: return new IntVector(new FlatData(new Uint32(), data.length, null, data));
        }
        throw new TypeError('Unrecognized Int data');
    }
    static defaultView(data) {
        return data.type.bitWidth <= 32 ? new FlatView(data) : new FixedSizeView(data, (data.type.bitWidth / 32) | 0);
    }
}
export class FloatVector extends FlatVector {
    constructor(data, view = FloatVector.defaultView(data)) {
        super(data, view);
    }
    static from(data) {
        switch (data.constructor) {
            case Uint16Array: return new FloatVector(new FlatData(new Float16(), data.length, null, data));
            case Float32Array: return new FloatVector(new FlatData(new Float32(), data.length, null, data));
            case Float64Array: return new FloatVector(new FlatData(new Float64(), data.length, null, data));
        }
        throw new TypeError('Unrecognized Float data');
    }
    static defaultView(data) {
        return data.type.precision !== Precision.HALF ? new FlatView(data) : new Float16View(data);
    }
}
export class DateVector extends FlatVector {
    static defaultView(data) {
        return data.type.unit === DateUnit.DAY ? new DateDayView(data) : new DateMillisecondView(data, 2);
    }
    constructor(data, view = DateVector.defaultView(data)) {
        super(data, view);
    }
}
export class DecimalVector extends FlatVector {
    constructor(data, view = new FixedSizeView(data, 4)) {
        super(data, view);
    }
}
export class TimeVector extends FlatVector {
    static defaultView(data) {
        return data.type.bitWidth <= 32 ? new FlatView(data) : new FixedSizeView(data, (data.type.bitWidth / 32) | 0);
    }
    constructor(data, view = TimeVector.defaultView(data)) {
        super(data, view);
    }
}
export class TimestampVector extends FlatVector {
    constructor(data, view = new FixedSizeView(data, 2)) {
        super(data, view);
    }
}
export class IntervalVector extends FlatVector {
    static defaultView(data) {
        return data.type.unit === IntervalUnit.YEAR_MONTH ? new IntervalYearMonthView(data) : new FixedSizeView(data, 2);
    }
    constructor(data, view = IntervalVector.defaultView(data)) {
        super(data, view);
    }
}
export class BinaryVector extends ListVectorBase {
    constructor(data, view = new BinaryView(data)) {
        super(data, view);
    }
}
export class FixedSizeBinaryVector extends FlatVector {
    constructor(data, view = new FixedSizeView(data, data.type.byteWidth)) {
        super(data, view);
    }
}
export class Utf8Vector extends ListVectorBase {
    constructor(data, view = new Utf8View(data)) {
        super(data, view);
    }
}
export class ListVector extends ListVectorBase {
    constructor(data, view = new ListView(data)) {
        super(data, view);
    }
}
export class FixedSizeListVector extends ListVectorBase {
    constructor(data, view = new FixedSizeListView(data)) {
        super(data, view);
    }
}
export class MapVector extends NestedVector {
    constructor(data, view = new MapView(data)) {
        super(data, view);
    }
}
export class StructVector extends NestedVector {
    constructor(data, view = new StructView(data)) {
        super(data, view);
    }
}
export class UnionVector extends NestedVector {
    constructor(data, view = (data.type.mode === UnionMode.Sparse ? new UnionView(data) : new DenseUnionView(data))) {
        super(data, view);
    }
}
export class DictionaryVector extends Vector {
    constructor(data, view = new DictionaryView(data.dictionary, new IntVector(data.indicies))) {
        super(data, view);
        if (view instanceof DictionaryView) {
            this.indicies = view.indicies;
            this.dictionary = view.dictionary;
        }
        else if (view instanceof ChunkedView) {
            this.dictionary = view.chunks[0].dictionary;
            this.indicies = view.chunks.reduce((idxs, dict) => !idxs ? dict.indicies : idxs.concat(dict.indicies), null);
        }
    }
    getKey(index) { return this.indicies.get(index); }
    getValue(key) { return this.dictionary.get(key); }
}
export const createVector = ((VectorLoader) => ((data) => TypeVisitor.visitTypeInline(new VectorLoader(data), data.type)))(class VectorLoader extends TypeVisitor {
    constructor(data) {
        super();
        this.data = data;
    }
    visitNull(_type) { return new NullVector(this.data); }
    visitInt(_type) { return new IntVector(this.data); }
    visitFloat(_type) { return new FloatVector(this.data); }
    visitBinary(_type) { return new BinaryVector(this.data); }
    visitUtf8(_type) { return new Utf8Vector(this.data); }
    visitBool(_type) { return new BoolVector(this.data); }
    visitDecimal(_type) { return new DecimalVector(this.data); }
    visitDate(_type) { return new DateVector(this.data); }
    visitTime(_type) { return new TimeVector(this.data); }
    visitTimestamp(_type) { return new TimestampVector(this.data); }
    visitInterval(_type) { return new IntervalVector(this.data); }
    visitList(_type) { return new ListVector(this.data); }
    visitStruct(_type) { return new StructVector(this.data); }
    visitUnion(_type) { return new UnionVector(this.data); }
    visitFixedSizeBinary(_type) { return new FixedSizeBinaryVector(this.data); }
    visitFixedSizeList(_type) { return new FixedSizeListVector(this.data); }
    visitMap(_type) { return new MapVector(this.data); }
    visitDictionary(_type) { return new DictionaryVector(this.data); }
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFJLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDbkUsQ0FBQyxDQUFDLElBQUksU0FBUyxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksTUFBTSxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUM3RSxDQUFDO1FBQ0QsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDdkIsS0FBSyxTQUFTLEVBQUUsTUFBTSxDQUFDLElBQUksU0FBUyxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN4RixLQUFLLFVBQVUsRUFBRSxNQUFNLENBQUMsSUFBSSxTQUFTLENBQUMsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFGLEtBQUssVUFBVSxFQUFFLE1BQU0sQ0FBQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDMUYsS0FBSyxVQUFVLEVBQUUsTUFBTSxDQUFDLElBQUksU0FBUyxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMxRixLQUFLLFdBQVcsRUFBRSxNQUFNLENBQUMsSUFBSSxTQUFTLENBQUMsSUFBSSxRQUFRLENBQUMsSUFBSSxNQUFNLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzVGLEtBQUssV0FBVyxFQUFFLE1B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LElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0Ysa0JBQWtCLENBQUcsS0FBb0IsSUFBTSxNQUFNLENBQUMsSUFBSSxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBRyxDQUFDO0lBQzdGLFFBQVEsQ0FBYSxLQUFXLElBQWUsTUFBTSxDQUFDLElBQUksU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFhLENBQUM7SUFDN0YsZUFBZSxDQUFNLEtBQWlCLElBQVMsTUFBTSxDQUFDLElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQU0sQ0FBQztDQUNoRyxDQUFDLENBQUMiLCJmaWxlIjoidmVjdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuLy8gb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4vLyBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuLy8gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuLy8gdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuLy8gXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4vLyB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4vLyBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuLy8gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbi8vIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuLy8gc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuLy8gdW5kZXIgdGhlIExpY2Vuc2UuXG5cbmltcG9ydCB7IERhdGEsIENodW5rZWREYXRhLCBGbGF0RGF0YSwgQm9vbERhdGEgfSBmcm9tICcuL2RhdGEnO1xuaW1wb3J0IHsgVmlzaXRvck5vZGUsIFR5cGVWaXNpdG9yLCBWZWN0b3JWaXNpdG9yIH0gZnJvbSAnLi92aXNpdG9yJztcbmltcG9ydCB7IERhdGFUeXBlLCBMaXN0VHlwZSwgRmxhdFR5cGUsIE5lc3RlZFR5cGUsIEZsYXRMaXN0VHlwZSB9IGZyb20gJy4vdHlwZSc7XG5pbXBvcnQgeyBJdGVyYWJsZUFycmF5TGlrZSwgUHJlY2lzaW9uLCBEYXRlVW5pdCwgSW50ZXJ2YWxVbml0LCBVbmlvbk1vZGUgfSBmcm9tICcuL3R5cGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZlY3Rvckxpa2UgeyBsZW5ndGg6IG51bWJlcjsgbnVsbENvdW50OiBudW1iZXI7IH1cblxuZXhwb3J0IGludGVyZmFjZSBWaWV3PFQgZXh0ZW5kcyBEYXRhVHlwZT4ge1xuICAgIGNsb25lKGRhdGE6IERhdGE8VD4pOiB0aGlzO1xuICAgIGlzVmFsaWQoaW5kZXg6IG51bWJlcik6IGJvb2xlYW47XG4gICAgZ2V0KGluZGV4OiBudW1iZXIpOiBUWydUVmFsdWUnXSB8IG51bGw7XG4gICAgc2V0KGluZGV4OiBudW1iZXIsIHZhbHVlOiBUWydUVmFsdWUnXSk6IHZvaWQ7XG4gICAgdG9BcnJheSgpOiBJdGVyYWJsZUFycmF5TGlrZTxUWydUVmFsdWUnXSB8IG51bGw+O1xuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhYmxlSXRlcmF0b3I8VFsnVFZhbHVlJ10gfCBudWxsPjtcbn1cblxuZXhwb3J0IGNsYXNzIFZlY3RvcjxUIGV4dGVuZHMgRGF0YVR5cGUgPSBhbnk+IGltcGxlbWVudHMgVmVjdG9yTGlrZSwgVmlldzxUPiwgVmlzaXRvck5vZGUge1xuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlPFQgZXh0ZW5kcyBEYXRhVHlwZT4oZGF0YTogRGF0YTxUPik6IFZlY3RvcjxUPiB7XG4gICAgICAgIHJldHVybiBjcmVhdGVWZWN0b3IoZGF0YSk7XG4gICAgfVxuICAgIHB1YmxpYyByZWFkb25seSBkYXRhOiBEYXRhPFQ+O1xuICAgIHB1YmxpYyByZWFkb25seSB2aWV3OiBWaWV3PFQ+O1xuICAgIGNvbnN0cnVjdG9yKGRhdGE6IERhdGE8VD4sIHZpZXc6IFZpZXc8VD4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgbGV0IG51bGxzOiBVaW50OEFycmF5O1xuICAgICAgICBpZiAoKDxhbnk+IGRhdGEgaW5zdGFuY2VvZiBDaHVua2VkRGF0YSkgJiYgISh2aWV3IGluc3RhbmNlb2YgQ2h1bmtlZFZpZXcpKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcgPSBuZXcgQ2h1bmtlZFZpZXcoZGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoISh2aWV3IGluc3RhbmNlb2YgVmFsaWRpdHlWaWV3KSAmJiAobnVsbHMgPSBkYXRhLm51bGxCaXRtYXAhKSAmJiBudWxscy5sZW5ndGggPiAwICYmIGRhdGEubnVsbENvdW50ID4gMCkge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gbmV3IFZhbGlkaXR5VmlldyhkYXRhLCB2aWV3KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHR5cGUoKSB7IHJldHVybiB0aGlzLmRhdGEudHlwZTsgfVxuICAgIHB1YmxpYyBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aDsgfVxuICAgIHB1YmxpYyBnZXQgbnVsbENvdW50KCkgeyByZXR1cm4gdGhpcy5kYXRhLm51bGxDb3VudDsgfVxuICAgIHB1YmxpYyBnZXQgbnVsbEJpdG1hcCgpIHsgcmV0dXJuIHRoaXMuZGF0YS5udWxsQml0bWFwOyB9XG4gICAgcHVibGljIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICAgICAgcmV0dXJuIGBWZWN0b3I8JHt0aGlzLnR5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXX0+YDtcbiAgICB9XG4gICAgcHVibGljIHRvSlNPTigpOiBhbnkgeyByZXR1cm4gdGhpcy50b0FycmF5KCk7IH1cbiAgICBwdWJsaWMgY2xvbmUoZGF0YTogRGF0YTxUPiwgdmlldzogVmlldzxUPiA9IHRoaXMudmlldy5jbG9uZShkYXRhKSk6IHRoaXMge1xuICAgICAgICByZXR1cm4gbmV3ICh0aGlzLmNvbnN0cnVjdG9yIGFzIGFueSkoZGF0YSwgdmlldyk7XG4gICAgfVxuICAgIHB1YmxpYyBpc1ZhbGlkKGluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5pc1ZhbGlkKGluZGV4KTtcbiAgICB9XG4gICAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogVFsnVFZhbHVlJ10gfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXQoaW5kZXgpO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0KGluZGV4OiBudW1iZXIsIHZhbHVlOiBUWydUVmFsdWUnXSk6IHZvaWQge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LnNldChpbmRleCwgdmFsdWUpO1xuICAgIH1cbiAgICBwdWJsaWMgdG9BcnJheSgpOiBJdGVyYWJsZUFycmF5TGlrZTxUWydUVmFsdWUnXSB8IG51bGw+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy50b0FycmF5KCk7XG4gICAgfVxuICAgIHB1YmxpYyBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFRbJ1RWYWx1ZSddIHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3W1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICB9XG4gICAgcHVibGljIGNvbmNhdCguLi5vdGhlcnM6IFZlY3RvcjxUPltdKTogdGhpcyB7XG4gICAgICAgIGlmICgob3RoZXJzID0gb3RoZXJzLmZpbHRlcihCb29sZWFuKSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHZpZXcgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHZlY3MgPSAhKHZpZXcgaW5zdGFuY2VvZiBDaHVua2VkVmlldylcbiAgICAgICAgICAgID8gW3RoaXMsIC4uLm90aGVyc11cbiAgICAgICAgICAgIDogWy4uLnZpZXcuY2h1bmtzLCAuLi5vdGhlcnNdO1xuICAgICAgICBjb25zdCBvZmZzZXRzID0gQ2h1bmtlZERhdGEuY29tcHV0ZU9mZnNldHModmVjcyk7XG4gICAgICAgIGNvbnN0IGNodW5rc0xlbmd0aCA9IG9mZnNldHNbb2Zmc2V0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgY2h1bmtlZERhdGEgPSBuZXcgQ2h1bmtlZERhdGEodGhpcy50eXBlLCBjaHVua3NMZW5ndGgsIHZlY3MsIDAsIC0xLCBvZmZzZXRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoY2h1bmtlZERhdGEsIG5ldyBDaHVua2VkVmlldyhjaHVua2VkRGF0YSkpIGFzIHRoaXM7XG4gICAgfVxuICAgIHB1YmxpYyBzbGljZShiZWdpbj86IG51bWJlciwgZW5kPzogbnVtYmVyKTogdGhpcyB7XG4gICAgICAgIGxldCB7IGxlbmd0aCB9ID0gdGhpcztcbiAgICAgICAgbGV0IHNpemUgPSAodGhpcy52aWV3IGFzIGFueSkuc2l6ZSB8fCAxO1xuICAgICAgICBsZXQgdG90YWwgPSBsZW5ndGgsIGZyb20gPSAoYmVnaW4gfHwgMCkgKiBzaXplO1xuICAgICAgICBsZXQgdG8gPSAodHlwZW9mIGVuZCA9PT0gJ251bWJlcicgPyBlbmQgOiB0b3RhbCkgKiBzaXplO1xuICAgICAgICBpZiAodG8gPCAwKSB7IHRvID0gdG90YWwgLSAodG8gKiAtMSkgJSB0b3RhbDsgfVxuICAgICAgICBpZiAoZnJvbSA8IDApIHsgZnJvbSA9IHRvdGFsIC0gKGZyb20gKiAtMSkgJSB0b3RhbDsgfVxuICAgICAgICBpZiAodG8gPCBmcm9tKSB7IFtmcm9tLCB0b10gPSBbdG8sIGZyb21dOyB9XG4gICAgICAgIHRvdGFsID0gIWlzRmluaXRlKHRvdGFsID0gKHRvIC0gZnJvbSkpIHx8IHRvdGFsIDwgMCA/IDAgOiB0b3RhbDtcbiAgICAgICAgY29uc3Qgc2xpY2VkRGF0YSA9IHRoaXMuZGF0YS5zbGljZShmcm9tLCBNYXRoLm1pbih0b3RhbCwgbGVuZ3RoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lKHNsaWNlZERhdGEsIHRoaXMudmlldy5jbG9uZShzbGljZWREYXRhKSkgYXMgdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWNjZXB0VHlwZVZpc2l0b3IodmlzaXRvcjogVHlwZVZpc2l0b3IpOiBhbnkge1xuICAgICAgICByZXR1cm4gVHlwZVZpc2l0b3IudmlzaXRUeXBlSW5saW5lKHZpc2l0b3IsIHRoaXMudHlwZSk7XG4gICAgfVxuICAgIHB1YmxpYyBhY2NlcHRWZWN0b3JWaXNpdG9yKHZpc2l0b3I6IFZlY3RvclZpc2l0b3IpOiBhbnkge1xuICAgICAgICByZXR1cm4gVmVjdG9yVmlzaXRvci52aXNpdFR5cGVJbmxpbmUodmlzaXRvciwgdGhpcy50eXBlLCB0aGlzKTtcbiAgICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGbGF0VmVjdG9yPFQgZXh0ZW5kcyBGbGF0VHlwZT4gZXh0ZW5kcyBWZWN0b3I8VD4ge1xuICAgIHB1YmxpYyBnZXQgdmFsdWVzKCkgeyByZXR1cm4gdGhpcy5kYXRhLnZhbHVlczsgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTGlzdFZlY3RvckJhc2U8VCBleHRlbmRzIChMaXN0VHlwZSB8IEZsYXRMaXN0VHlwZSk+IGV4dGVuZHMgVmVjdG9yPFQ+IHtcbiAgICBwdWJsaWMgZ2V0IHZhbHVlcygpIHsgcmV0dXJuIHRoaXMuZGF0YS52YWx1ZXM7IH1cbiAgICBwdWJsaWMgZ2V0IHZhbHVlT2Zmc2V0cygpIHsgcmV0dXJuIHRoaXMuZGF0YS52YWx1ZU9mZnNldHM7IH1cbiAgICBwdWJsaWMgZ2V0VmFsdWVPZmZzZXQoaW5kZXg6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZU9mZnNldHNbaW5kZXhdO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0VmFsdWVMZW5ndGgoaW5kZXg6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZU9mZnNldHNbaW5kZXggKyAxXSAtIHRoaXMudmFsdWVPZmZzZXRzW2luZGV4XTtcbiAgICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBOZXN0ZWRWZWN0b3I8VCBleHRlbmRzIE5lc3RlZFR5cGU+IGV4dGVuZHMgVmVjdG9yPFQ+ICB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHB1YmxpYyByZWFkb25seSB2aWV3OiBOZXN0ZWRWaWV3PFQ+O1xuICAgIHB1YmxpYyBnZXQgY2hpbGREYXRhKCk6IERhdGE8YW55PltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5jaGlsZERhdGE7XG4gICAgfVxuICAgIHB1YmxpYyBnZXRDaGlsZEF0PFIgZXh0ZW5kcyBEYXRhVHlwZSA9IERhdGFUeXBlPihpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0Q2hpbGRBdDxSPihpbmRleCk7XG4gICAgfVxufVxuXG5pbXBvcnQgeyBMaXN0LCBCaW5hcnksIFV0ZjgsIEJvb2wsIH0gZnJvbSAnLi90eXBlJztcbmltcG9ydCB7IE51bGwsIEludCwgRmxvYXQsIERlY2ltYWwsIERhdGVfLCBUaW1lLCBUaW1lc3RhbXAsIEludGVydmFsIH0gZnJvbSAnLi90eXBlJztcbmltcG9ydCB7IFVpbnQ4LCBVaW50MTYsIFVpbnQzMiwgVWludDY0LCBJbnQ4LCBJbnQxNiwgSW50MzIsIEludDY0LCBGbG9hdDE2LCBGbG9hdDMyLCBGbG9hdDY0IH0gZnJvbSAnLi90eXBlJztcbmltcG9ydCB7IFN0cnVjdCwgVW5pb24sIFNwYXJzZVVuaW9uLCBEZW5zZVVuaW9uLCBGaXhlZFNpemVCaW5hcnksIEZpeGVkU2l6ZUxpc3QsIE1hcF8sIERpY3Rpb25hcnkgfSBmcm9tICcuL3R5cGUnO1xuXG5pbXBvcnQgeyBDaHVua2VkVmlldyB9IGZyb20gJy4vdmVjdG9yL2NodW5rZWQnO1xuaW1wb3J0IHsgRGljdGlvbmFyeVZpZXcgfSBmcm9tICcuL3ZlY3Rvci9kaWN0aW9uYXJ5JztcbmltcG9ydCB7IExpc3RWaWV3LCBGaXhlZFNpemVMaXN0VmlldywgQmluYXJ5VmlldywgVXRmOFZpZXcgfSBmcm9tICcuL3ZlY3Rvci9saXN0JztcbmltcG9ydCB7IFVuaW9uVmlldywgRGVuc2VVbmlvblZpZXcsIE5lc3RlZFZpZXcsIFN0cnVjdFZpZXcsIE1hcFZpZXcgfSBmcm9tICcuL3ZlY3Rvci9uZXN0ZWQnO1xuaW1wb3J0IHsgRmxhdFZpZXcsIE51bGxWaWV3LCBCb29sVmlldywgVmFsaWRpdHlWaWV3LCBGaXhlZFNpemVWaWV3LCBGbG9hdDE2VmlldywgRGF0ZURheVZpZXcsIERhdGVNaWxsaXNlY29uZFZpZXcsIEludGVydmFsWWVhck1vbnRoVmlldyB9IGZyb20gJy4vdmVjdG9yL2ZsYXQnO1xuaW1wb3J0IHsgcGFja0Jvb2xzIH0gZnJvbSAnLi91dGlsL2JpdCc7XG5cbmV4cG9ydCBjbGFzcyBOdWxsVmVjdG9yIGV4dGVuZHMgVmVjdG9yPE51bGw+IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBEYXRhPE51bGw+LCB2aWV3OiBWaWV3PE51bGw+ID0gbmV3IE51bGxWaWV3KGRhdGEpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHZpZXcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJvb2xWZWN0b3IgZXh0ZW5kcyBWZWN0b3I8Qm9vbD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbShkYXRhOiBJdGVyYWJsZUFycmF5TGlrZTxib29sZWFuPikge1xuICAgICAgICByZXR1cm4gbmV3IEJvb2xWZWN0b3IobmV3IEJvb2xEYXRhKG5ldyBCb29sKCksIGRhdGEubGVuZ3RoLCBudWxsLCBwYWNrQm9vbHMoZGF0YSkpKTtcbiAgICB9XG4gICAgcHVibGljIGdldCB2YWx1ZXMoKSB7IHJldHVybiB0aGlzLmRhdGEudmFsdWVzOyB9XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxCb29sPiwgdmlldzogVmlldzxCb29sPiA9IG5ldyBCb29sVmlldyhkYXRhKSkge1xuICAgICAgICBzdXBlcihkYXRhLCB2aWV3KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJbnRWZWN0b3I8VCBleHRlbmRzIEludCA9IEludDxhbnk+PiBleHRlbmRzIEZsYXRWZWN0b3I8VD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbShkYXRhOiBJbnQ4QXJyYXkpOiBJbnRWZWN0b3I8SW50OD47XG4gICAgcHVibGljIHN0YXRpYyBmcm9tKGRhdGE6IEludDE2QXJyYXkpOiBJbnRWZWN0b3I8SW50MTY+O1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbShkYXRhOiBJbnQzMkFycmF5KTogSW50VmVjdG9yPEludDMyPjtcbiAgICBwdWJsaWMgc3RhdGljIGZyb20oZGF0YTogVWludDhBcnJheSk6IEludFZlY3RvcjxVaW50OD47XG4gICAgcHVibGljIHN0YXRpYyBmcm9tKGRhdGE6IFVpbnQxNkFycmF5KTogSW50VmVjdG9yPFVpbnQxNj47XG4gICAgcHVibGljIHN0YXRpYyBmcm9tKGRhdGE6IFVpbnQzMkFycmF5KTogSW50VmVjdG9yPFVpbnQzMj47XG4gICAgcHVibGljIHN0YXRpYyBmcm9tKGRhdGE6IEludDMyQXJyYXksIGlzNjQ6IHRydWUpOiBJbnRWZWN0b3I8SW50NjQ+O1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbShkYXRhOiBVaW50MzJBcnJheSwgaXM2NDogdHJ1ZSk6IEludFZlY3RvcjxVaW50NjQ+O1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbShkYXRhOiBhbnksIGlzNjQ/OiBib29sZWFuKSB7XG4gICAgICAgIGlmIChpczY0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YSBpbnN0YW5jZW9mIEludDMyQXJyYXlcbiAgICAgICAgICAgICAgICA/IG5ldyBJbnRWZWN0b3IobmV3IEZsYXREYXRhKG5ldyBJbnQ2NCgpLCBkYXRhLmxlbmd0aCwgbnVsbCwgZGF0YSkpXG4gICAgICAgICAgICAgICAgOiBuZXcgSW50VmVjdG9yKG5ldyBGbGF0RGF0YShuZXcgVWludDY0KCksIGRhdGEubGVuZ3RoLCBudWxsLCBkYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChkYXRhLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgICAgICBjYXNlIEludDhBcnJheTogcmV0dXJuIG5ldyBJbnRWZWN0b3IobmV3IEZsYXREYXRhKG5ldyBJbnQ4KCksIGRhdGEubGVuZ3RoLCBudWxsLCBkYXRhKSk7XG4gICAgICAgICAgICBjYXNlIEludDE2QXJyYXk6IHJldHVybiBuZXcgSW50VmVjdG9yKG5ldyBGbGF0RGF0YShuZXcgSW50MTYoKSwgZGF0YS5sZW5ndGgsIG51bGwsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhc2UgSW50MzJBcnJheTogcmV0dXJuIG5ldyBJbnRWZWN0b3IobmV3IEZsYXREYXRhKG5ldyBJbnQzMigpLCBkYXRhLmxlbmd0aCwgbnVsbCwgZGF0YSkpO1xuICAgICAgICAgICAgY2FzZSBVaW50OEFycmF5OiByZXR1cm4gbmV3IEludFZlY3RvcihuZXcgRmxhdERhdGEobmV3IFVpbnQ4KCksIGRhdGEubGVuZ3RoLCBudWxsLCBkYXRhKSk7XG4gICAgICAgICAgICBjYXNlIFVpbnQxNkFycmF5OiByZXR1cm4gbmV3IEludFZlY3RvcihuZXcgRmxhdERhdGEobmV3IFVpbnQxNigpLCBkYXRhLmxlbmd0aCwgbnVsbCwgZGF0YSkpO1xuICAgICAgICAgICAgY2FzZSBVaW50MzJBcnJheTogcmV0dXJuIG5ldyBJbnRWZWN0b3IobmV3IEZsYXREYXRhKG5ldyBVaW50MzIoKSwgZGF0YS5sZW5ndGgsIG51bGwsIGRhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbnJlY29nbml6ZWQgSW50IGRhdGEnKTtcbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRWaWV3PFQgZXh0ZW5kcyBJbnQ+KGRhdGE6IERhdGE8VD4pIHtcbiAgICAgICAgcmV0dXJuIGRhdGEudHlwZS5iaXRXaWR0aCA8PSAzMiA/IG5ldyBGbGF0VmlldyhkYXRhKSA6IG5ldyBGaXhlZFNpemVWaWV3KGRhdGEsIChkYXRhLnR5cGUuYml0V2lkdGggLyAzMikgfCAwKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxUPiwgdmlldzogVmlldzxUPiA9IEludFZlY3Rvci5kZWZhdWx0VmlldyhkYXRhKSkge1xuICAgICAgICBzdXBlcihkYXRhLCB2aWV3KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGbG9hdFZlY3RvcjxUIGV4dGVuZHMgRmxvYXQgPSBGbG9hdDxhbnk+PiBleHRlbmRzIEZsYXRWZWN0b3I8VD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbShkYXRhOiBVaW50MTZBcnJheSk6IEZsb2F0VmVjdG9yPEZsb2F0MTY+O1xuICAgIHB1YmxpYyBzdGF0aWMgZnJvbShkYXRhOiBGbG9hdDMyQXJyYXkpOiBGbG9hdFZlY3RvcjxGbG9hdDMyPjtcbiAgICBwdWJsaWMgc3RhdGljIGZyb20oZGF0YTogRmxvYXQ2NEFycmF5KTogRmxvYXRWZWN0b3I8RmxvYXQ2ND47XG4gICAgcHVibGljIHN0YXRpYyBmcm9tKGRhdGE6IGFueSkge1xuICAgICAgICBzd2l0Y2ggKGRhdGEuY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGNhc2UgVWludDE2QXJyYXk6IHJldHVybiBuZXcgRmxvYXRWZWN0b3IobmV3IEZsYXREYXRhKG5ldyBGbG9hdDE2KCksIGRhdGEubGVuZ3RoLCBudWxsLCBkYXRhKSk7XG4gICAgICAgICAgICBjYXNlIEZsb2F0MzJBcnJheTogcmV0dXJuIG5ldyBGbG9hdFZlY3RvcihuZXcgRmxhdERhdGEobmV3IEZsb2F0MzIoKSwgZGF0YS5sZW5ndGgsIG51bGwsIGRhdGEpKTtcbiAgICAgICAgICAgIGNhc2UgRmxvYXQ2NEFycmF5OiByZXR1cm4gbmV3IEZsb2F0VmVjdG9yKG5ldyBGbGF0RGF0YShuZXcgRmxvYXQ2NCgpLCBkYXRhLmxlbmd0aCwgbnVsbCwgZGF0YSkpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VucmVjb2duaXplZCBGbG9hdCBkYXRhJyk7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZhdWx0VmlldzxUIGV4dGVuZHMgRmxvYXQ+KGRhdGE6IERhdGE8VD4pOiBGbGF0Vmlldzxhbnk+IHtcbiAgICAgICAgcmV0dXJuIGRhdGEudHlwZS5wcmVjaXNpb24gIT09IFByZWNpc2lvbi5IQUxGID8gbmV3IEZsYXRWaWV3KGRhdGEpIDogbmV3IEZsb2F0MTZWaWV3KGRhdGEgYXMgRGF0YTxGbG9hdDE2Pik7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGRhdGE6IERhdGE8VD4sIHZpZXc6IFZpZXc8VD4gPSBGbG9hdFZlY3Rvci5kZWZhdWx0VmlldyhkYXRhKSkge1xuICAgICAgICBzdXBlcihkYXRhLCB2aWV3KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRlVmVjdG9yIGV4dGVuZHMgRmxhdFZlY3RvcjxEYXRlXz4ge1xuICAgIHN0YXRpYyBkZWZhdWx0VmlldzxUIGV4dGVuZHMgRGF0ZV8+KGRhdGE6IERhdGE8VD4pIHtcbiAgICAgICAgcmV0dXJuIGRhdGEudHlwZS51bml0ID09PSBEYXRlVW5pdC5EQVkgPyBuZXcgRGF0ZURheVZpZXcoZGF0YSkgOiBuZXcgRGF0ZU1pbGxpc2Vjb25kVmlldyhkYXRhLCAyKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxEYXRlXz4sIHZpZXc6IFZpZXc8RGF0ZV8+ID0gRGF0ZVZlY3Rvci5kZWZhdWx0VmlldyhkYXRhKSkge1xuICAgICAgICBzdXBlcihkYXRhLCB2aWV3KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEZWNpbWFsVmVjdG9yIGV4dGVuZHMgRmxhdFZlY3RvcjxEZWNpbWFsPiB7XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxEZWNpbWFsPiwgdmlldzogVmlldzxEZWNpbWFsPiA9IG5ldyBGaXhlZFNpemVWaWV3KGRhdGEsIDQpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHZpZXcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRpbWVWZWN0b3IgZXh0ZW5kcyBGbGF0VmVjdG9yPFRpbWU+IHtcbiAgICBzdGF0aWMgZGVmYXVsdFZpZXc8VCBleHRlbmRzIFRpbWU+KGRhdGE6IERhdGE8VD4pIHtcbiAgICAgICAgcmV0dXJuIGRhdGEudHlwZS5iaXRXaWR0aCA8PSAzMiA/IG5ldyBGbGF0VmlldyhkYXRhKSA6IG5ldyBGaXhlZFNpemVWaWV3KGRhdGEsIChkYXRhLnR5cGUuYml0V2lkdGggLyAzMikgfCAwKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxUaW1lPiwgdmlldzogVmlldzxUaW1lPiA9IFRpbWVWZWN0b3IuZGVmYXVsdFZpZXcoZGF0YSkpIHtcbiAgICAgICAgc3VwZXIoZGF0YSwgdmlldyk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVGltZXN0YW1wVmVjdG9yIGV4dGVuZHMgRmxhdFZlY3RvcjxUaW1lc3RhbXA+IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBEYXRhPFRpbWVzdGFtcD4sIHZpZXc6IFZpZXc8VGltZXN0YW1wPiA9IG5ldyBGaXhlZFNpemVWaWV3KGRhdGEsIDIpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHZpZXcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludGVydmFsVmVjdG9yIGV4dGVuZHMgRmxhdFZlY3RvcjxJbnRlcnZhbD4ge1xuICAgIHN0YXRpYyBkZWZhdWx0VmlldzxUIGV4dGVuZHMgSW50ZXJ2YWw+KGRhdGE6IERhdGE8VD4pIHtcbiAgICAgICAgcmV0dXJuIGRhdGEudHlwZS51bml0ID09PSBJbnRlcnZhbFVuaXQuWUVBUl9NT05USCA/IG5ldyBJbnRlcnZhbFllYXJNb250aFZpZXcoZGF0YSkgOiBuZXcgRml4ZWRTaXplVmlldyhkYXRhLCAyKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxJbnRlcnZhbD4sIHZpZXc6IFZpZXc8SW50ZXJ2YWw+ID0gSW50ZXJ2YWxWZWN0b3IuZGVmYXVsdFZpZXcoZGF0YSkpIHtcbiAgICAgICAgc3VwZXIoZGF0YSwgdmlldyk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmluYXJ5VmVjdG9yIGV4dGVuZHMgTGlzdFZlY3RvckJhc2U8QmluYXJ5PiB7XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxCaW5hcnk+LCB2aWV3OiBWaWV3PEJpbmFyeT4gPSBuZXcgQmluYXJ5VmlldyhkYXRhKSkge1xuICAgICAgICBzdXBlcihkYXRhLCB2aWV3KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGaXhlZFNpemVCaW5hcnlWZWN0b3IgZXh0ZW5kcyBGbGF0VmVjdG9yPEZpeGVkU2l6ZUJpbmFyeT4ge1xuICAgIGNvbnN0cnVjdG9yKGRhdGE6IERhdGE8Rml4ZWRTaXplQmluYXJ5PiwgdmlldzogVmlldzxGaXhlZFNpemVCaW5hcnk+ID0gbmV3IEZpeGVkU2l6ZVZpZXcoZGF0YSwgZGF0YS50eXBlLmJ5dGVXaWR0aCkpIHtcbiAgICAgICAgc3VwZXIoZGF0YSwgdmlldyk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgVXRmOFZlY3RvciBleHRlbmRzIExpc3RWZWN0b3JCYXNlPFV0Zjg+IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBEYXRhPFV0Zjg+LCB2aWV3OiBWaWV3PFV0Zjg+ID0gbmV3IFV0ZjhWaWV3KGRhdGEpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHZpZXcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExpc3RWZWN0b3I8VCBleHRlbmRzIERhdGFUeXBlID0gRGF0YVR5cGU+IGV4dGVuZHMgTGlzdFZlY3RvckJhc2U8TGlzdDxUPj4ge1xuICAgIGNvbnN0cnVjdG9yKGRhdGE6IERhdGE8TGlzdDxUPj4sIHZpZXc6IFZpZXc8TGlzdDxUPj4gPSBuZXcgTGlzdFZpZXcoZGF0YSkpIHtcbiAgICAgICAgc3VwZXIoZGF0YSwgdmlldyk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRml4ZWRTaXplTGlzdFZlY3RvciBleHRlbmRzIExpc3RWZWN0b3JCYXNlPEZpeGVkU2l6ZUxpc3Q+IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBEYXRhPEZpeGVkU2l6ZUxpc3Q+LCB2aWV3OiBWaWV3PEZpeGVkU2l6ZUxpc3Q+ID0gbmV3IEZpeGVkU2l6ZUxpc3RWaWV3KGRhdGEpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHZpZXcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1hcFZlY3RvciBleHRlbmRzIE5lc3RlZFZlY3RvcjxNYXBfPiB7XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxNYXBfPiwgdmlldzogVmlldzxNYXBfPiA9IG5ldyBNYXBWaWV3KGRhdGEpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHZpZXcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN0cnVjdFZlY3RvciBleHRlbmRzIE5lc3RlZFZlY3RvcjxTdHJ1Y3Q+IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhOiBEYXRhPFN0cnVjdD4sIHZpZXc6IFZpZXc8U3RydWN0PiA9IG5ldyBTdHJ1Y3RWaWV3KGRhdGEpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHZpZXcpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVuaW9uVmVjdG9yPFQgZXh0ZW5kcyAoU3BhcnNlVW5pb24gfCBEZW5zZVVuaW9uKSA9IGFueT4gZXh0ZW5kcyBOZXN0ZWRWZWN0b3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKGRhdGE6IERhdGE8VD4sIHZpZXc6IFZpZXc8VD4gPSA8YW55PiAoZGF0YS50eXBlLm1vZGUgPT09IFVuaW9uTW9kZS5TcGFyc2UgPyBuZXcgVW5pb25WaWV3PFNwYXJzZVVuaW9uPihkYXRhIGFzIERhdGE8U3BhcnNlVW5pb24+KSA6IG5ldyBEZW5zZVVuaW9uVmlldyhkYXRhIGFzIERhdGE8RGVuc2VVbmlvbj4pKSkge1xuICAgICAgICBzdXBlcihkYXRhLCB2aWV3KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEaWN0aW9uYXJ5VmVjdG9yPFQgZXh0ZW5kcyBEYXRhVHlwZSA9IERhdGFUeXBlPiBleHRlbmRzIFZlY3RvcjxEaWN0aW9uYXJ5PFQ+PiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHB1YmxpYyByZWFkb25seSBpbmRpY2llczogVmVjdG9yPEludD47XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHB1YmxpYyByZWFkb25seSBkaWN0aW9uYXJ5OiBWZWN0b3I8VD47XG4gICAgY29uc3RydWN0b3IoZGF0YTogRGF0YTxEaWN0aW9uYXJ5PFQ+PiwgdmlldzogVmlldzxEaWN0aW9uYXJ5PFQ+PiA9IG5ldyBEaWN0aW9uYXJ5VmlldzxUPihkYXRhLmRpY3Rpb25hcnksIG5ldyBJbnRWZWN0b3IoZGF0YS5pbmRpY2llcykpKSB7XG4gICAgICAgIHN1cGVyKGRhdGEgYXMgRGF0YTxhbnk+LCB2aWV3KTtcbiAgICAgICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBEaWN0aW9uYXJ5Vmlldykge1xuICAgICAgICAgICAgdGhpcy5pbmRpY2llcyA9IHZpZXcuaW5kaWNpZXM7XG4gICAgICAgICAgICB0aGlzLmRpY3Rpb25hcnkgPSB2aWV3LmRpY3Rpb25hcnk7XG4gICAgICAgIH0gZWxzZSBpZiAodmlldyBpbnN0YW5jZW9mIENodW5rZWRWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLmRpY3Rpb25hcnkgPSAodmlldy5jaHVua3NbMF0gYXMgRGljdGlvbmFyeVZlY3RvcjxUPikuZGljdGlvbmFyeTtcbiAgICAgICAgICAgIHRoaXMuaW5kaWNpZXMgPSAodmlldy5jaHVua3MgYXMgRGljdGlvbmFyeVZlY3RvcjxUPltdKS5yZWR1Y2U8VmVjdG9yPEludD4gfCBudWxsPihcbiAgICAgICAgICAgICAgICAoaWR4czogVmVjdG9yPEludD4gfCBudWxsLCBkaWN0OiBEaWN0aW9uYXJ5VmVjdG9yPFQ+KSA9PlxuICAgICAgICAgICAgICAgICAgICAhaWR4cyA/IGRpY3QuaW5kaWNpZXMhIDogaWR4cy5jb25jYXQoZGljdC5pbmRpY2llcyEpLFxuICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICkhO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBnZXRLZXkoaW5kZXg6IG51bWJlcikgeyByZXR1cm4gdGhpcy5pbmRpY2llcy5nZXQoaW5kZXgpOyB9XG4gICAgcHVibGljIGdldFZhbHVlKGtleTogbnVtYmVyKSB7IHJldHVybiB0aGlzLmRpY3Rpb25hcnkuZ2V0KGtleSk7IH1cbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZlY3RvciA9ICgoVmVjdG9yTG9hZGVyOiBuZXcgPFQgZXh0ZW5kcyBEYXRhVHlwZT4oZGF0YTogRGF0YTxUPikgPT4gVHlwZVZpc2l0b3IpID0+IChcbiAgICA8VCBleHRlbmRzIERhdGFUeXBlPihkYXRhOiBEYXRhPFQ+KSA9PiBUeXBlVmlzaXRvci52aXNpdFR5cGVJbmxpbmUobmV3IFZlY3RvckxvYWRlcihkYXRhKSwgZGF0YS50eXBlKSBhcyBWZWN0b3I8VD5cbikpKGNsYXNzIFZlY3RvckxvYWRlcjxUIGV4dGVuZHMgRGF0YVR5cGU+IGV4dGVuZHMgVHlwZVZpc2l0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZGF0YTogRGF0YTxUPikgeyBzdXBlcigpOyB9XG4gICAgdmlzaXROdWxsICAgICAgICAgICAoX3R5cGU6IE51bGwpICAgICAgICAgICAgeyByZXR1cm4gbmV3IE51bGxWZWN0b3IodGhpcy5kYXRhKTsgICAgICAgICAgICB9XG4gICAgdmlzaXRJbnQgICAgICAgICAgICAoX3R5cGU6IEludCkgICAgICAgICAgICAgeyByZXR1cm4gbmV3IEludFZlY3Rvcih0aGlzLmRhdGEpOyAgICAgICAgICAgICB9XG4gICAgdmlzaXRGbG9hdCAgICAgICAgICAoX3R5cGU6IEZsb2F0KSAgICAgICAgICAgeyByZXR1cm4gbmV3IEZsb2F0VmVjdG9yKHRoaXMuZGF0YSk7ICAgICAgICAgICB9XG4gICAgdmlzaXRCaW5hcnkgICAgICAgICAoX3R5cGU6IEJpbmFyeSkgICAgICAgICAgeyByZXR1cm4gbmV3IEJpbmFyeVZlY3Rvcih0aGlzLmRhdGEpOyAgICAgICAgICB9XG4gICAgdmlzaXRVdGY4ICAgICAgICAgICAoX3R5cGU6IFV0ZjgpICAgICAgICAgICAgeyByZXR1cm4gbmV3IFV0ZjhWZWN0b3IodGhpcy5kYXRhKTsgICAgICAgICAgICB9XG4gICAgdmlzaXRCb29sICAgICAgICAgICAoX3R5cGU6IEJvb2wpICAgICAgICAgICAgeyByZXR1cm4gbmV3IEJvb2xWZWN0b3IodGhpcy5kYXRhKTsgICAgICAgICAgICB9XG4gICAgdmlzaXREZWNpbWFsICAgICAgICAoX3R5cGU6IERlY2ltYWwpICAgICAgICAgeyByZXR1cm4gbmV3IERlY2ltYWxWZWN0b3IodGhpcy5kYXRhKTsgICAgICAgICB9XG4gICAgdmlzaXREYXRlICAgICAgICAgICAoX3R5cGU6IERhdGVfKSAgICAgICAgICAgeyByZXR1cm4gbmV3IERhdGVWZWN0b3IodGhpcy5kYXRhKTsgICAgICAgICAgICB9XG4gICAgdmlzaXRUaW1lICAgICAgICAgICAoX3R5cGU6IFRpbWUpICAgICAgICAgICAgeyByZXR1cm4gbmV3IFRpbWVWZWN0b3IodGhpcy5kYXRhKTsgICAgICAgICAgICB9XG4gICAgdmlzaXRUaW1lc3RhbXAgICAgICAoX3R5cGU6IFRpbWVzdGFtcCkgICAgICAgeyByZXR1cm4gbmV3IFRpbWVzdGFtcFZlY3Rvcih0aGlzLmRhdGEpOyAgICAgICB9XG4gICAgdmlzaXRJbnRlcnZhbCAgICAgICAoX3R5cGU6IEludGVydmFsKSAgICAgICAgeyByZXR1cm4gbmV3IEludGVydmFsVmVjdG9yKHRoaXMuZGF0YSk7ICAgICAgICB9XG4gICAgdmlzaXRMaXN0ICAgICAgICAgICAoX3R5cGU6IExpc3QpICAgICAgICAgICAgeyByZXR1cm4gbmV3IExpc3RWZWN0b3IodGhpcy5kYXRhKTsgICAgICAgICAgICB9XG4gICAgdmlzaXRTdHJ1Y3QgICAgICAgICAoX3R5cGU6IFN0cnVjdCkgICAgICAgICAgeyByZXR1cm4gbmV3IFN0cnVjdFZlY3Rvcih0aGlzLmRhdGEpOyAgICAgICAgICB9XG4gICAgdmlzaXRVbmlvbiAgICAgICAgICAoX3R5cGU6IFVuaW9uKSAgICAgICAgICAgeyByZXR1cm4gbmV3IFVuaW9uVmVjdG9yKHRoaXMuZGF0YSk7ICAgICAgICAgICB9XG4gICAgdmlzaXRGaXhlZFNpemVCaW5hcnkoX3R5cGU6IEZpeGVkU2l6ZUJpbmFyeSkgeyByZXR1cm4gbmV3IEZpeGVkU2l6ZUJpbmFyeVZlY3Rvcih0aGlzLmRhdGEpOyB9XG4gICAgdmlzaXRGaXhlZFNpemVMaXN0ICAoX3R5cGU6IEZpeGVkU2l6ZUxpc3QpICAgeyByZXR1cm4gbmV3IEZpeGVkU2l6ZUxpc3RWZWN0b3IodGhpcy5kYXRhKTsgICB9XG4gICAgdmlzaXRNYXAgICAgICAgICAgICAoX3R5cGU6IE1hcF8pICAgICAgICAgICAgeyByZXR1cm4gbmV3IE1hcFZlY3Rvcih0aGlzLmRhdGEpOyAgICAgICAgICAgICB9XG4gICAgdmlzaXREaWN0aW9uYXJ5ICAgICAoX3R5cGU6IERpY3Rpb25hcnkpICAgICAgeyByZXR1cm4gbmV3IERpY3Rpb25hcnlWZWN0b3IodGhpcy5kYXRhKTsgICAgICB9XG59KTtcbiJdfQ==
